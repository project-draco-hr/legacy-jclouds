{
  HttpRequest queryRequest=HttpRequest.builder().method("GET").endpoint(URI.create(endpoint + "/admin/groups/query")).headers(ImmutableMultimap.<String,String>builder().put("Accept","*/*").put("x-vcloud-authorization",token).build()).build();
  HttpResponse queryResponse=HttpResponse.builder().statusCode(200).payload(payloadFromResourceWithContentType("/query/admin/allGroups.xml",VCloudDirectorMediaType.QUERY_RESULT_RECORDS + ";version=1.5")).build();
  VCloudDirectorAdminClient client=requestsSendResponses(loginRequest,sessionResponse,queryRequest,queryResponse);
  QueryResultRecords expected=QueryResultRecords.builder().href(URI.create("https://vcloudbeta.bluelock.com/api/admin/groups/query?page=1&pageSize=25&format=records")).type("application/vnd.vmware.vcloud.query.records+xml").name("group").page(1).pageSize(25).total(0L).link(Link.builder().rel("alternate").type("application/vnd.vmware.vcloud.query.references+xml").href(URI.create("https://vcloudbeta.bluelock.com/api/admin/groups/query?page=1&pageSize=25&format=references")).build()).link(Link.builder().rel("alternate").type("application/vnd.vmware.vcloud.query.idrecords+xml").href(URI.create("https://vcloudbeta.bluelock.com/api/admin/groups/query?page=1&pageSize=25&format=idrecords")).build()).build();
  assertEquals(client.getQueryClient().groupsQueryAll(),expected);
}
