{
  if (!securityGroupsSupported)   return;
  Long defaultTemplate=(imageId != null && !"".equals(imageId)) ? new Long(imageId) : null;
  vm=VirtualMachineClientLiveTest.createVirtualMachineWithSecurityGroupInZone(zone.getId(),defaultTemplateOrPreferredInZone(defaultTemplate,client,zone.getId()),group.getId(),client,jobComplete,virtualMachineRunning);
  if (vm.getPassword() != null)   password=vm.getPassword();
  checkSSH(new IPSocket(vm.getIPAddress(),22));
}
