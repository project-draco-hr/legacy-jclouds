{
  String tag=String.format("NOTAG-%s",instance.getId());
  try {
    tag=Iterables.getOnlyElement(Iterables.filter(instance.getGroupIds(),new Predicate<String>(){
      @Override public boolean apply(      String input){
        return input.startsWith("jclouds#") && input.endsWith("#" + instance.getRegion());
      }
    }
)).substring(8).replaceAll("#" + instance.getRegion() + "$","");
  }
 catch (  NoSuchElementException e) {
    logger.debug("no tag parsed from %s's groups: %s",instance.getId(),instance.getGroupIds());
  }
catch (  IllegalArgumentException e) {
    logger.debug("too many groups match %s; %s's groups: %s","jclouds#",instance.getId(),instance.getGroupIds());
  }
  return tag;
}
