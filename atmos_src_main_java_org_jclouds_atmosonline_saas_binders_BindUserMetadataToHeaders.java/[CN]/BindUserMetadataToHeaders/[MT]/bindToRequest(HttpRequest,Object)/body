{
  UserMetadata md=(UserMetadata)checkNotNull(payload,"payload");
  if (md.getMetadata().size() > 0) {
    String header=Joiner.on(',').withKeyValueSeparator("=").join(md.getMetadata());
    request.getHeaders().put("x-emc-meta",header);
  }
  if (md.getListableMetadata().size() > 0) {
    String header=Joiner.on(',').withKeyValueSeparator("=").join(md.getListableMetadata());
    request.getHeaders().put("x-emc-listable-meta",header);
  }
  if (md.getTags().size() > 0) {
    String header=Joiner.on(',').join(md.getTags());
    request.getHeaders().put("x-emc-tags",header);
  }
  if (md.getListableTags().size() > 0) {
    String header=Joiner.on(',').join(md.getListableTags());
    request.getHeaders().put("x-emc-listable-tags",header);
  }
}
