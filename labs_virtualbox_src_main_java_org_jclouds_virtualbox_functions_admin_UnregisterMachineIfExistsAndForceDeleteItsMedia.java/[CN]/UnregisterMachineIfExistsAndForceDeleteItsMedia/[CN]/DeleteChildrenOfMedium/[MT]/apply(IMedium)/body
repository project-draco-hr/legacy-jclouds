{
  checkNotNull(medium.getChildren());
  if (medium.getDeviceType().equals(DeviceType.HardDisk)) {
    for (    IMedium child : medium.getChildren()) {
      try {
        IProgress deletion=child.deleteStorage();
        deletion.waitForCompletion(-1);
      }
 catch (      Exception e) {
        if (e.getMessage().contains("is still attached to the following")) {
          logger.warn("Media could not be deleted. Ignoring... [Message %s]",e.getMessage());
        }
      }
    }
  }
  return medium;
}
