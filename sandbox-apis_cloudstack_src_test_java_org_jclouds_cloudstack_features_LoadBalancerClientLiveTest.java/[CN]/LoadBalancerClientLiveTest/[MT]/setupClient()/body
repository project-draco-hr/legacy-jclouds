{
  super.setupClient();
  loadBalancerRuleActive=new RetryablePredicate<LoadBalancerRule>(new LoadBalancerRuleActive(client),60,1,1,TimeUnit.SECONDS);
  prefix+="rule";
  try {
    network=find(client.getNetworkClient().listNetworks(),NetworkPredicates.hasLoadBalancerService());
    Long defaultTemplate=(imageId != null && !"".equals(imageId)) ? new Long(imageId) : null;
    vm=VirtualMachineClientLiveTest.createVirtualMachineInNetwork(network,defaultTemplateOrPreferredInZone(defaultTemplate,client,network.getZoneId()),client,jobComplete,virtualMachineRunning);
    if (vm.getPassword() != null)     password=vm.getPassword();
  }
 catch (  NoSuchElementException e) {
    networksDisabled=true;
  }
}
