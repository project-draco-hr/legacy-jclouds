{
  SunCloudS3Error error=new SunCloudS3Error();
  error.setRequestId(response.getFirstHeaderOrNull(S3Headers.REQUEST_ID));
  error.setRequestToken(response.getFirstHeaderOrNull(S3Headers.REQUEST_TOKEN));
  InputStream errorStream=response.getContent();
  try {
    if (errorStream != null) {
      error.setMessage(Utils.toStringAndClose(errorStream));
    }
  }
 catch (  Exception e) {
    logger.warn(e,"error parsing XML reponse: %1$s",response);
  }
 finally {
    command.setException(new AWSResponseException(command,response,error));
    IOUtils.closeQuietly(errorStream);
  }
}
