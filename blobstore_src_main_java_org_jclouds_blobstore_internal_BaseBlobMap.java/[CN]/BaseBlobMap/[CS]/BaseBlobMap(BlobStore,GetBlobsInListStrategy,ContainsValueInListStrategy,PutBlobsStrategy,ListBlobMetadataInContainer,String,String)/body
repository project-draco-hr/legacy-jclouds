{
  this.blobstore=checkNotNull(blobstore,"blobstore");
  this.containerName=checkNotNull(containerName,"container");
  this.options=new ImmutableListContainerOptions(dir != null ? inDirectory(dir) : ListContainerOptions.NONE);
  if (dir == null) {
    prefixer=new PassThrough<String>();
    pathStripper=prefixer;
  }
 else {
    prefixer=new PrefixKey(dir,"/");
    pathStripper=new StripPath(dir,"/");
  }
  this.getAllBlobs=checkNotNull(getAllBlobs,"getAllBlobs");
  this.listStrategy=checkNotNull(listStrategy,"listStrategy");
  this.containsValueStrategy=checkNotNull(containsValueStrategy,"containsValueStrategy");
  this.putBlobsStrategy=checkNotNull(putBlobsStrategy,"putBlobsStrategy");
  checkArgument(!containerName.equals(""),"container name must not be a blank string!");
}
