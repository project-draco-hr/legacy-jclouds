{
  VCloudDirectorClient client=requestsSendResponses(loginRequest,sessionResponse,new VcloudHttpRequestPrimer().apiCommand("PUT",vmId + "/media/action/ejectMedia").xmlFilePayload("/vApp/ejectMediaParams.xml",VCloudDirectorMediaType.MEDIA_PARAMS).acceptAnyMedia().httpRequestBuilder().build(),new VcloudHttpResponsePrimer().xmlFilePayload("/vApp/ejectMediaTask.xml",VCloudDirectorMediaType.TASK).httpResponseBuilder().build());
  MediaInsertOrEjectParams params=MediaInsertOrEjectParams.builder().build();
  Task expected=ejectMediaTask();
  assertEquals(client.getVmClient().ejectMedia(vmURI,params),expected);
}
