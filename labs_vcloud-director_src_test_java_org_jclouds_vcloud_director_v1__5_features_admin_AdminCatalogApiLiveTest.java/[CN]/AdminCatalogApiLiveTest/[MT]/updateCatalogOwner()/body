{
  URI adminOrgHref=Iterables.find(context.getApi().resolveEntity(org.getId()).getLinks(),LinkPredicates.typeEquals(VCloudDirectorMediaType.ADMIN_ORG)).getHref();
  User newOwnerUser=randomTestUser("testUpdateCatalogOwner");
  newOwnerUser=adminContext.getApi().getUserApi().createUser(adminOrgHref,newOwnerUser);
  assertNotNull(newOwnerUser,"failed to create temp user to test updateCatalogOwner");
  Owner oldOwner=owner;
  Owner newOwner=Owner.builder().type("application/vnd.vmware.vcloud.owner+xml").user(Reference.builder().fromEntity(newOwnerUser).build()).build();
  try {
    catalogApi.setOwner(catalog.getId(),newOwner);
    owner=catalogApi.getOwner(catalog.getId());
    Checks.checkOwner(owner);
    assertTrue(equal(owner.toBuilder().links(Collections.<Link>emptySet()).build(),newOwner.toBuilder().user(newOwner.getUser().toBuilder().id(null).build()).build()),String.format(OBJ_FIELD_UPDATABLE,CATALOG,"owner"));
  }
  finally {
    catalogApi.setOwner(catalog.getId(),oldOwner);
    owner=catalogApi.getOwner(catalog.getId());
    adminContext.getApi().getUserApi().deleteUser(newOwnerUser.getHref());
  }
}
