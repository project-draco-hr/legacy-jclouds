{
  Vdc vdc=context.getApi().getVdcClient().getVdc(vdcURI);
  assertNotNull(vdc,String.format(ENTITY_NON_NULL,VDC));
  Set<Reference> networks=vdc.getAvailableNetworks().getNetworks();
  Optional<Reference> parentNetwork=Iterables.tryFind(networks,new Predicate<Reference>(){
    @Override public boolean apply(    Reference reference){
      return reference.getHref().equals(networkURI);
    }
  }
);
  if (!parentNetwork.isPresent()) {
    fail(String.format("Could not find network %s in vdc",networkURI.toASCIIString()));
  }
  NetworkConfiguration networkConfiguration=NetworkConfiguration.builder().parentNetwork(parentNetwork.get()).fenceMode("bridged").build();
  return networkConfiguration;
}
