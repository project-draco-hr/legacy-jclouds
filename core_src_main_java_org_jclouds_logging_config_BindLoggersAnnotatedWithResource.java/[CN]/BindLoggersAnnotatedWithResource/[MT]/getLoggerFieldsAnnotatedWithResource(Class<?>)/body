{
  Set<Field> fields=new HashSet<Field>();
  Class<?> type=declaredType;
  while (type != null) {
    fields.addAll(Arrays.asList(type.getDeclaredFields()));
    type=type.getSuperclass();
  }
  Set<Field> loggerFields=Sets.newHashSet(Iterables.transform(fields,new LoggerFieldsAnnotatedWithResource()));
  loggerFields.remove(null);
  return loggerFields;
}
