{
  InputStream is=getClass().getResourceAsStream("/ec2/run_instances.xml");
  Reservation expected=new Reservation(Region.DEFAULT,ImmutableSortedSet.of("default"),ImmutableSet.of(new RunningInstance(Region.DEFAULT,"0",null,"ami-60a54009","i-2ba64342",InstanceState.PENDING,InstanceType.M1_SMALL,(InetAddress)null,null,"example-key-name",dateService.iso8601DateParse("2007-08-07T11:51:50.000Z"),true,AvailabilityZone.US_EAST_1B,null,null,(InetAddress)null,Sets.<String>newTreeSet(),null,null,null,null,RootDeviceType.INSTANCE_STORE,null,ImmutableMap.<String,EbsBlockDevice>of()),new RunningInstance(Region.DEFAULT,"1",null,"ami-60a54009","i-2bc64242",InstanceState.PENDING,InstanceType.M1_SMALL,(InetAddress)null,null,"example-key-name",dateService.iso8601DateParse("2007-08-07T11:51:50.000Z"),true,AvailabilityZone.US_EAST_1B,null,null,(InetAddress)null,Sets.<String>newTreeSet(),null,null,null,null,RootDeviceType.INSTANCE_STORE,null,ImmutableMap.<String,EbsBlockDevice>of()),new RunningInstance(Region.DEFAULT,"2",null,"ami-60a54009","i-2be64332",InstanceState.PENDING,InstanceType.M1_SMALL,(InetAddress)null,null,"example-key-name",dateService.iso8601DateParse("2007-08-07T11:51:50.000Z"),true,AvailabilityZone.US_EAST_1B,null,null,(InetAddress)null,Sets.<String>newTreeSet(),null,null,null,null,RootDeviceType.INSTANCE_STORE,null,ImmutableMap.<String,EbsBlockDevice>of())),"AIDADH4IGTRXXKCD",null,"r-47a5402e");
  RunInstancesResponseHandler handler=injector.getInstance(RunInstancesResponseHandler.class);
  addDefaultRegionToHandler(handler);
  Reservation result=factory.create(handler).parse(is);
  assertEquals(result,expected);
}
