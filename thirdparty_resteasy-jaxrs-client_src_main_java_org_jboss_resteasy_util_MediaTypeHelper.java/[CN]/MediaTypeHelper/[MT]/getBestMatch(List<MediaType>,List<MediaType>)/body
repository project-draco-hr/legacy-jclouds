{
  sortByWeight(desired);
  sortByWeight(provided);
  boolean emptyDesired=desired == null || desired.size() == 0;
  boolean emptyProvided=provided == null || provided.size() == 0;
  if (emptyDesired && emptyProvided)   return null;
  if (emptyDesired && !emptyProvided)   return provided.get(0);
  if (emptyProvided && !emptyDesired)   return desired.get(0);
  for (  MediaType desire : desired) {
    for (    MediaType provide : provided) {
      if (provide.isCompatible(desire))       return provide;
    }
  }
  return null;
}
