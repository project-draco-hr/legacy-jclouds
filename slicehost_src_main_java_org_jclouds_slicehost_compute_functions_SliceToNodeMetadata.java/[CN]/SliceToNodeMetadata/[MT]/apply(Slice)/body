{
  Matcher matcher=DELIMETED_BY_HYPHEN_ENDING_IN_HYPHEN_HEX.matcher(from.getName());
  final String tag=matcher.find() ? matcher.group(1) : null;
  Image image=null;
  try {
    image=Iterables.find(images,new FindImageForSlice(from));
  }
 catch (  NoSuchElementException e) {
    logger.warn("could not find a matching image for slice %s in location %s",from,location);
  }
  return new NodeMetadataImpl(from.getId() + "",from.getName(),from.getId() + "",location,null,ImmutableMap.<String,String>of(),tag,image,sliceToNodeState.get(from.getStatus()),Iterables.filter(from.getAddresses(),new Predicate<String>(){
    @Override public boolean apply(    String input){
      return !input.startsWith("10.");
    }
  }
),Iterables.filter(from.getAddresses(),new Predicate<String>(){
    @Override public boolean apply(    String input){
      return input.startsWith("10.");
    }
  }
),ImmutableMap.<String,String>of(),null);
}
