{
  HttpRequest request=createMock(HttpRequest.class);
  expect(request.getEndpoint()).andReturn(URI.create("http://localhost/mypath"));
  request.setEndpoint(URI.create("https://remotehost:443/mypath"));
  Multimap<String,String> headers=HashMultimap.create();
  expect(request.getHeaders()).andReturn(headers);
  replay(request);
  changeSchemeHostAndPortTo(request,"https","remotehost",443,uriBuilderProvider.get());
  assertEquals(headers.get(HttpHeaders.HOST),Collections.singletonList("remotehost"));
}
