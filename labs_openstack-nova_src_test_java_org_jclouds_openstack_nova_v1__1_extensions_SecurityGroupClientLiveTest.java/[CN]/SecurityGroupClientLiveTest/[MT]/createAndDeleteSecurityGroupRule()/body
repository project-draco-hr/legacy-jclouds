{
  for (  String zoneId : context.getApi().getConfiguredZones()) {
    SecurityGroupClient client=context.getApi().getSecurityGroupExtensionForZone(zoneId).get();
    SecurityGroup securityGroup=null;
    try {
      securityGroup=client.createSecurityGroupWithNameAndDescription(SECURITY_GROUP_NAME,"test security group");
      assertNotNull(securityGroup);
      SecurityGroupRule rule=client.createSecurityGroupRule("tcp","443","443","0.0.0.0/0","",securityGroup.getId());
      assertNotNull(rule);
      SecurityGroupRule rule2=client.createSecurityGroupRule("tcp","443","443","",securityGroup.getId(),securityGroup.getId());
      assertNotNull(rule2);
      securityGroup=client.getSecurityGroup(securityGroup.getId());
    }
  finally {
      if (securityGroup != null) {
        client.deleteSecurityGroup(securityGroup.getId());
      }
    }
  }
}
