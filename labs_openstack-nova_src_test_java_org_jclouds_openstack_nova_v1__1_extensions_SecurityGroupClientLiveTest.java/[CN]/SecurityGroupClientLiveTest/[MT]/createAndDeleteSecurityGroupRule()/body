{
  for (  String regionId : context.getApi().getConfiguredRegions()) {
    SecurityGroupClient client=context.getApi().getSecurityGroupExtensionForRegion(regionId).get();
    SecurityGroup securityGroup=null;
    try {
      securityGroup=client.createSecurityGroup(SECURITY_GROUP_NAME,"test security group");
      assertNotNull(securityGroup);
      SecurityGroupRule rule=client.createSecurityGroupRule("tcp","443","443","0.0.0.0/0","",securityGroup.getId());
      assertNotNull(rule);
    }
  finally {
      if (securityGroup != null) {
        client.deleteSecurityGroup(securityGroup.getId());
      }
    }
  }
}
