{
  URI provider=providerSupplier.get();
  NodeMetadata hostNodeMetadata=hardcodedHostToHostNodeMetadata.apply(host.get());
  if (!socketTester.apply(HostAndPort.fromParts(provider.getHost(),provider.getPort()))) {
    logger.debug("disabling password access");
    runScriptOnNodeFactory.create(hostNodeMetadata,exec("VBoxManage setproperty websrvauthlibrary null"),runAsRoot(false).wrapInInitScript(false)).init().call();
    logger.debug(">> starting vboxwebsrv");
    String vboxwebsrv="vboxwebsrv -t0 -v -b -H " + providerSupplier.get().getHost();
    runScriptOnNodeFactory.create(hostNodeMetadata,exec(vboxwebsrv),runAsRoot(false).wrapInInitScript(false).blockOnComplete(false).nameTask("vboxwebsrv")).init().call();
    if (!socketTester.apply(HostAndPort.fromParts(provider.getHost(),provider.getPort()))) {
      throw new UncheckedTimeoutException(String.format("could not connect to virtualbox at %s",provider));
    }
  }
  manager=managerForNode.apply(host);
  manager.connect(provider.toASCIIString(),"","");
  if (logger.isDebugEnabled())   if (manager.getSessionObject().getState() != SessionState.Unlocked)   logger.warn("manager is not in unlocked state " + manager.getSessionObject().getState());
}
