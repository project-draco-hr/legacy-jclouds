{
  String bucketName=getBucketName();
  try {
    String objectKey="key-testGetObjectDetailsImpl";
    String objectValue="test";
    String metadataName="metadata-name-1";
    String metadataValue="metadata-value-1";
    org.jclouds.aws.s3.domain.S3Object s3Object=new org.jclouds.aws.s3.domain.S3Object(objectKey,objectValue);
    s3Object.getMetadata().getUserMetadata().put(S3Constants.USER_METADATA_PREFIX + metadataName,metadataValue);
    addObjectToBucket(bucketName,s3Object);
    S3Object objectDetails=service.getObjectDetails(new S3Bucket(bucketName),objectKey);
    assertEquals(objectDetails.getKey(),objectKey);
    assertEquals(objectDetails.getContentLength(),4);
    assertNull(objectDetails.getDataInputStream());
    assertEquals(objectDetails.getMetadata(metadataName),metadataValue);
  }
  finally {
    returnBucket(bucketName);
  }
}
