{
  Vdc vdc=context.getApi().getVdcApi().getVdc(vdcURI);
  assertNotNull(vdc,String.format(ENTITY_NON_NULL,VDC));
  Set<Reference> networks=vdc.getAvailableNetworks();
  Optional<Reference> parentNetwork=tryFind(networks,new Predicate<Reference>(){
    @Override public boolean apply(    Reference reference){
      return reference.getHref().equals(network.getHref());
    }
  }
);
  if (!parentNetwork.isPresent()) {
    fail(String.format("Could not find network %s in vdc",network.getHref().toASCIIString()));
  }
  NetworkConfiguration networkConfiguration=NetworkConfiguration.builder().parentNetwork(parentNetwork.get()).fenceMode(Network.FenceMode.BRIDGED).build();
  return networkConfiguration;
}
