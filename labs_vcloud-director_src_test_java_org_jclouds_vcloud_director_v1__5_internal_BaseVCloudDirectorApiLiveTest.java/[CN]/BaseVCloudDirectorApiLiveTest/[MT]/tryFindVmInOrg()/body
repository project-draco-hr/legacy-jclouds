{
  FluentIterable<Vm> vms=FluentIterable.from(vdc.getResourceEntities()).filter(ReferencePredicates.<Reference>typeEquals(VM)).transform(new Function<Reference,Vm>(){
    @Override public Vm apply(    Reference in){
      return context.getApi().getVmApi().get(in.getHref());
    }
  }
).filter(Predicates.notNull());
  Optional<Vm> optionalVm=tryFind(vms,new Predicate<Vm>(){
    @Override public boolean apply(    Vm input){
      return input.getId() != null;
    }
  }
);
  if (optionalVm.isPresent()) {
    Logger.CONSOLE.info("found vAppTemplate: %s",prettyVm.apply(optionalVm.get()));
  }
 else {
    Logger.CONSOLE.warn("%s doesn't have any vm in org %s; vms: %s",context.getApi().getCurrentSession().getUser(),org.getName(),Iterables.transform(vms,prettyVm));
  }
  return optionalVm;
}
