{
  String publicReadObjectKey="p?blic-read-acl";
  String bucketName=getBucketName();
  try {
    client.putObject(bucketName,new S3Object(publicReadObjectKey,""),new PutObjectOptions().withAcl(CannedAccessPolicy.PUBLIC_READ));
    AccessControlList acl=client.getObjectACL(bucketName,publicReadObjectKey).get(10,TimeUnit.SECONDS);
    assertEquals(acl.getGrants().size(),2);
    assertEquals(acl.getPermissions(GroupGranteeURI.ALL_USERS).size(),1);
    assertTrue(acl.getOwner() != null);
    String ownerId=acl.getOwner().getId();
    assertTrue(acl.hasPermission(ownerId,Permission.FULL_CONTROL));
    assertTrue(acl.hasPermission(GroupGranteeURI.ALL_USERS,Permission.READ));
  }
  finally {
    returnBucket(bucketName);
  }
}
