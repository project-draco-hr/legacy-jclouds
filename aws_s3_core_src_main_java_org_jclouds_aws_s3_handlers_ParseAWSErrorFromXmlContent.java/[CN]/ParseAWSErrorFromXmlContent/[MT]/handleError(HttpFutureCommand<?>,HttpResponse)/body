{
  String content;
  try {
    content=response.getContent() != null ? Utils.toStringAndClose(response.getContent()) : null;
    if (content != null) {
      try {
        if (content.indexOf('<') >= 0) {
          AWSError error=parseAWSErrorFromContent(command,response,content);
          command.setException(new AWSResponseException(command,response,error));
        }
 else {
          command.setException(new HttpResponseException(command,response,content));
        }
      }
 catch (      Exception he) {
        command.setException(new HttpResponseException(command,response,content));
        Utils.rethrowIfRuntime(he);
      }
    }
 else {
      command.setException(new HttpResponseException(command,response));
    }
  }
 catch (  Exception e) {
    command.setException(new HttpResponseException(command,response));
    Utils.rethrowIfRuntime(e);
  }
}
