{
  SecurityGroupClient securityGroupClient=createMock(SecurityGroupClient.class);
  ListSecurityGroupsOptions options=new ListSecurityGroupsOptions();
  PaginatedIterable<SecurityGroup> response1=PaginatedIterables.forwardWithMarker(ImmutableSet.of(createMock(SecurityGroup.class)),"NEXTTOKEN");
  PaginatedIterable<SecurityGroup> response2=PaginatedIterables.forward(ImmutableSet.of(createMock(SecurityGroup.class)));
  expect(securityGroupClient.list(anyObject(ListSecurityGroupsOptions.class))).andReturn(response1).once();
  expect(securityGroupClient.list(anyObject(ListSecurityGroupsOptions.class))).andReturn(response2).once();
  EasyMock.replay(securityGroupClient);
  Assert.assertEquals(2,Iterables.size(RDS.listSecurityGroups(securityGroupClient,options)));
}
