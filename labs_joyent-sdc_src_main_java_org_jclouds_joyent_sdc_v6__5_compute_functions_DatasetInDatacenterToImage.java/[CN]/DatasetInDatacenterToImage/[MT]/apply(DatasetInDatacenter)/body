{
  Location location=locationIndex.get().get(datasetInDatacenter.getDatacenter());
  checkState(location != null,"location %s not in locationIndex: %s",datasetInDatacenter.getDatacenter(),locationIndex.get());
  Dataset image=datasetInDatacenter.getDataset();
  return new ImageBuilder().id(datasetInDatacenter.slashEncode()).providerId(image.getId()).name(image.getName()).operatingSystem(imageToOs.apply(image)).description(image.getName()).location(location).status(Image.Status.AVAILABLE).build();
}
