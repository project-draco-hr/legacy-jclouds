{
  Location location=locationIndex.get().get(datasetInDatacenter.getDatacenter());
  checkState(location != null,"location %s not in locationIndex: %s",datasetInDatacenter.getDatacenter(),locationIndex.get());
  Dataset dataset=datasetInDatacenter.get();
  return new ImageBuilder().id(datasetInDatacenter.slashEncode()).providerId(dataset.getId()).name(dataset.getName()).operatingSystem(imageToOs.apply(dataset)).description(dataset.getUrn()).version(dataset.getVersion()).location(location).status(Image.Status.AVAILABLE).build();
}
