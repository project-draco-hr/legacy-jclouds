{
  filesystemContainerNameValidator.validate(container);
  filesystemBlobKeyValidator.validate(blobKey);
  File outputFile=getFileForBlobKey(container,blobKey);
  if (payload.getRawContent().equals(outputFile)) {
    return;
  }
  FileOutputStream output=null;
  try {
    Files.createParentDirs(outputFile);
    if (payload.getRawContent() instanceof File)     Files.copy(File.class.cast(payload.getRawContent()),outputFile);
 else     payload.writeTo(new FileOutputStream(outputFile));
  }
 catch (  IOException ex) {
    if (outputFile != null) {
      outputFile.delete();
    }
    throw ex;
  }
 finally {
    Closeables.closeQuietly(output);
    payload.release();
  }
}
