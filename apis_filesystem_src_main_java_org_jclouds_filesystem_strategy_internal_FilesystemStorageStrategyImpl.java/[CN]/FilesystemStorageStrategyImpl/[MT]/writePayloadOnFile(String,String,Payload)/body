{
  filesystemContainerNameValidator.validate(container);
  filesystemBlobKeyValidator.validate(blobKey);
  File outputFile=getFileForBlobKey(container,blobKey);
  FileOutputStream output=null;
  try {
    Files.createParentDirs(outputFile);
    if (payload.getRawContent() instanceof File)     Files.copy((File)payload.getRawContent(),outputFile);
 else {
      output=new FileOutputStream(outputFile);
      payload.writeTo(output);
    }
  }
 catch (  IOException ex) {
    if (outputFile != null) {
      outputFile.delete();
    }
    throw ex;
  }
 finally {
    Closeables.closeQuietly(output);
    payload.release();
  }
}
