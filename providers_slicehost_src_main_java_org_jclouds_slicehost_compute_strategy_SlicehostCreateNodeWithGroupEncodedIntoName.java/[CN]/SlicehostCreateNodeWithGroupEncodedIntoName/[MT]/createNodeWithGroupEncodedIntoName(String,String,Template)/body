{
  checkState(group != null,"group (that which groups identical nodes together) must be specified");
  checkState(name != null && name.indexOf(group) != -1,"name should have %s encoded into it",group);
  checkState(template != null,"template must be specified");
  Slice slice=client.createSlice(name,Integer.parseInt(template.getImage().getProviderId()),Integer.parseInt(template.getHardware().getProviderId()));
  NodeAndInitialCredentials<Slice> from=new NodeAndInitialCredentials<Slice>(slice,slice.getId() + "",LoginCredentials.builder().password(slice.getRootPassword()).build());
  LoginCredentials fromNode=from.getCredentials();
  LoginCredentials creds=prioritizeCredentialsFromTemplate.apply(template,fromNode);
  if (creds != null)   credentialStore.put("node#" + from.getNodeId(),creds);
  NodeMetadata node=sliceToNodeMetadata.apply(from.getNode());
  return node;
}
