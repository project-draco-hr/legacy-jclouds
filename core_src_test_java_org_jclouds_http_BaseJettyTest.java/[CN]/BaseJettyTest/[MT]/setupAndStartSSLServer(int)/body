{
  Handler server2Handler=new AbstractHandler(){
    public void handle(    String target,    Request baseRequest,    HttpServletRequest request,    HttpServletResponse response) throws IOException, ServletException {
      if (request.getMethod().equals("PUT")) {
        if (request.getContentLength() > 0) {
          response.setStatus(HttpServletResponse.SC_OK);
          response.getWriter().println(Strings2.toStringAndClose(request.getInputStream()) + "PUTREDIRECT");
        }
      }
 else       if (request.getMethod().equals("POST")) {
        if (request.getContentLength() > 0) {
          handlePost(request,response);
        }
 else {
          handleAction(request,response);
        }
      }
 else       if (request.getMethod().equals("HEAD")) {
        response.setContentType("text/xml");
        response.setStatus(HttpServletResponse.SC_OK);
      }
 else {
        response.setContentType("text/xml");
        response.setStatus(HttpServletResponse.SC_OK);
        response.getWriter().println(XML2);
      }
      ((Request)request).setHandled(true);
    }
  }
;
  server2=new Server();
  server2.setHandler(server2Handler);
  SslSocketConnector ssl=new SslSocketConnector();
  ssl.setPort(testPort + 1);
  ssl.setMaxIdleTime(30000);
  ssl.setKeystore("src/test/resources/test.jks");
  ssl.setKeyPassword("jclouds");
  ssl.setTruststore("src/test/resources/test.jks");
  ssl.setTrustPassword("jclouds");
  server2.setConnectors(new Connector[]{ssl});
  server2.start();
}
