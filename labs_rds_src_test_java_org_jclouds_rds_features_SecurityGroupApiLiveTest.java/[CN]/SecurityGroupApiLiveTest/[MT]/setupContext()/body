{
  super.setupContext();
  ipRangesAuthorized=retry(new Predicate<SecurityGroup>(){
    public boolean apply(    SecurityGroup input){
      return Iterables.all(api().get(input.getName()).getIPRanges(),new Predicate<Authorization>(){
        public boolean apply(        Authorization i2){
          return i2.getStatus() == Status.AUTHORIZED;
        }
      }
);
    }
  }
,30000,100,500,MILLISECONDS);
  ipRangesRevoked=retry(new Predicate<SecurityGroup>(){
    public boolean apply(    SecurityGroup input){
      return api().get(input.getName()).getIPRanges().size() == 0;
    }
  }
,30000,100,500,MILLISECONDS);
}
