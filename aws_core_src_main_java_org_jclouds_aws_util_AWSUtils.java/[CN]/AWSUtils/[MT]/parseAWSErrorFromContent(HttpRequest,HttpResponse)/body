{
  if (response.getPayload() == null)   return null;
  if (response.getPayload().getContentType() != null && response.getPayload().getContentType().indexOf("text/plain") != -1)   return null;
  try {
    AWSError error=(AWSError)factory.create(errorHandlerProvider.get()).setContext(request).apply(response);
    if (error.getRequestId() == null)     error.setRequestId(response.getFirstHeaderOrNull(requestId));
    error.setRequestToken(response.getFirstHeaderOrNull(requestToken));
    if ("SignatureDoesNotMatch".equals(error.getCode())) {
      error.setStringSigned(signer.createStringToSign(request));
      error.setSignature(signer.sign(error.getStringSigned()));
    }
    return error;
  }
 catch (  HttpException e) {
    logger.warn(e,"error parsing error");
    return null;
  }
}
