{
  Long adapterId=0l;
  IMachine machine=createMock(IMachine.class);
  INetworkAdapter networkAdapter=createMock(INetworkAdapter.class);
  expect(machine.getNetworkAdapter(adapterId)).andReturn(networkAdapter);
  networkAdapter.setAttachmentType(Bridged);
  networkAdapter.setAdapterType(Am79C973);
  networkAdapter.setMACAddress(macAddress);
  networkAdapter.setBridgedInterface(hostInterface);
  networkAdapter.setEnabled(true);
  machine.saveSettings();
  replay(machine,networkAdapter);
  new AttachBridgedAdapterToMachine(adapterId,macAddress,hostInterface).apply(machine);
  verify(machine,networkAdapter);
}
