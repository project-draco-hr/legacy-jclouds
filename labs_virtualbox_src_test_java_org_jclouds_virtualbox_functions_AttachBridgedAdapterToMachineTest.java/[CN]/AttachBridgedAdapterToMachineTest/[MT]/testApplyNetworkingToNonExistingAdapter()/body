{
  Long adapterId=0l;
  IMachine machine=createMock(IMachine.class);
  INetworkAdapter iNetworkAdapter=createMock(INetworkAdapter.class);
  expect(machine.getNetworkAdapter(adapterId)).andReturn(iNetworkAdapter);
  iNetworkAdapter.setAttachmentType(Bridged);
  iNetworkAdapter.setAdapterType(Am79C973);
  iNetworkAdapter.setMACAddress(macAddress);
  iNetworkAdapter.setBridgedInterface(hostInterface);
  iNetworkAdapter.setEnabled(true);
  machine.saveSettings();
  replay(machine,iNetworkAdapter);
  NetworkAdapter networkAdapter=NetworkAdapter.builder().networkAttachmentType(NetworkAttachmentType.Bridged).build();
  NetworkInterfaceCard networkInterfaceCard=NetworkInterfaceCard.builder().addNetworkAdapter(networkAdapter).build();
  new AttachBridgedAdapterToMachine(networkInterfaceCard).apply(machine);
  verify(machine,iNetworkAdapter);
}
