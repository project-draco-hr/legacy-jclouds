{
  PaginatedSet<String> initial=PaginatedSet.copyOfWithMarker(ImmutableSet.of("foo","bar"),"MARKER1");
  Function<String,PaginatedSet<String>> markerToNext=createMock(Function.class);
  expect(markerToNext.apply("MARKER1")).andReturn(PaginatedSet.copyOfWithMarker(ImmutableSet.of("boo","baz"),"MARKER2"));
  expect(markerToNext.apply("MARKER2")).andReturn(PaginatedSet.copyOfWithMarker(ImmutableSet.of("ham","cheeze"),null));
  EasyMock.replay(markerToNext);
  Assert.assertEquals(ImmutableSet.copyOf(PaginatedSets.lazyContinue(initial,markerToNext)),ImmutableSet.of("foo","bar","boo","baz","ham","cheeze"));
  EasyMock.verify(markerToNext);
}
