{
  ImmutableList<InstanceProfile> instanceProfiles=api().list().concat().toList();
  getAnonymousLogger().info("instanceProfiles: " + instanceProfiles.size());
  for (  InstanceProfile instanceProfile : instanceProfiles) {
    checkInstanceProfile(instanceProfile);
    assertEquals(api().get(instanceProfile.getName()),instanceProfile);
    ImmutableSet<InstanceProfile> instanceProfilesAtPath=api().listPathPrefix(instanceProfile.getPath()).concat().toSet();
    assertTrue(instanceProfilesAtPath.contains(instanceProfile),instanceProfile + " not in " + instanceProfilesAtPath);
  }
}
