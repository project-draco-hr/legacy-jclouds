{
  StringBuilder switchClause=new StringBuilder();
  addArgValidation(switchClause,family);
  switchClause.append(Utils.replaceTokens(OS_TO_SWITCH_PATTERN.get(family),ImmutableMap.of("arg",arg + "")));
  for (  Entry<String,Statement> entry : valueToActions.entrySet()) {
    switchClause.append(Utils.replaceTokens(OS_TO_CASE_PATTERN.get(family),ImmutableMap.of("value",entry.getKey(),"action",entry.getValue().render(family).replaceAll("^","   "))));
  }
  switchClause.append(OS_TO_END_SWITCH_PATTERN.get(family));
  return switchClause.toString();
}
