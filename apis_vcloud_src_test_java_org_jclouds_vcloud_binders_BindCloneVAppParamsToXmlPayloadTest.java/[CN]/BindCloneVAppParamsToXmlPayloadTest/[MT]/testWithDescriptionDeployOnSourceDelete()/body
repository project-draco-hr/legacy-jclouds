{
  String expected=Strings2.toStringAndClose(getClass().getResourceAsStream("/moveVApp.xml"));
  CloneVAppOptions options=new CloneVAppOptions().deploy().powerOn().description("The description of the new vApp");
  GeneratedHttpRequest request=GeneratedHttpRequest.builder().method("POST").endpoint("http://localhost/key").declaring(String.class).invoker(Invokable.from(String.class.getDeclaredMethod("toString"))).arg(options).build();
  BindCloneVAppParamsToXmlPayload binder=injector.getInstance(BindCloneVAppParamsToXmlPayload.class);
  Builder<String,Object> map=ImmutableMap.builder();
  map.put("name","new-linux-server");
  map.put("Source","https://vcenterprise.bluelock.com/api/v1.0/vapp/201");
  map.put("IsSourceDelete","true");
  assertEquals(binder.bindToRequest(request,map.build()).getPayload().getRawContent(),expected);
}
