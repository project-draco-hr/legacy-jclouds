{
  Map<Long,DeviceType> positionAndDeviceType=ImmutableMap.of(1l,DeviceType.HardDisk);
  IMachine machine=createMock(IMachine.class);
  for (  long position : positionAndDeviceType.keySet()) {
    machine.setBootOrder(position,positionAndDeviceType.get(position));
  }
  machine.saveSettings();
  replay(machine);
  new ApplyBootOrderToMachine(positionAndDeviceType).apply(machine);
  verify(machine);
}
