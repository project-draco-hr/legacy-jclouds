{
  List<Ip<?,?>> nics=env.virtualMachine.listAttachedNics();
  AsyncTask task=env.virtualMachine.setNics(nics,Lists.<UnmanagedNetwork>newArrayList(env.unmanagedNetwork,env.unmanagedNetwork));
  assertNull(task);
  nics=env.virtualMachine.listAttachedNics();
  assertEquals(nics.size(),5);
  assertEquals(nics.get(0).getId(),publicIpCloud.getId());
  assertEquals(nics.get(1).getId(),privateIp.getId());
  assertEquals(nics.get(2).getId(),externalIp.getId());
  assertEquals(nics.get(3).getNetworkName(),env.unmanagedNetwork.getName());
  assertEquals(nics.get(4).getNetworkName(),env.unmanagedNetwork.getName());
  unmanagedIp1=(UnmanagedIp)nics.get(3);
  unmanagedIp2=(UnmanagedIp)nics.get(4);
}
