{
  List<Ip<?,?>> nics=env.virtualMachine.listAttachedNics();
  AsyncTask task=env.virtualMachine.setNics(Lists.<Ip<?,?>>newArrayList(nics.get(2),nics.get(1),nics.get(0),nics.get(4),nics.get(3)));
  assertNull(task);
  nics=env.virtualMachine.listAttachedNics();
  assertEquals(nics.size(),5);
  assertEquals(nics.get(0).getId(),externalIp.getId());
  assertEquals(nics.get(1).getId(),privateIp.getId());
  assertEquals(nics.get(2).getId(),publicIpCloud.getId());
  assertEquals(nics.get(3).getId(),unmanagedIp2.getId());
  assertEquals(nics.get(4).getId(),unmanagedIp1.getId());
}
