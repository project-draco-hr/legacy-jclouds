{
  final RegionAndName knownRegionAndName=new RegionAndName("region","ami");
  ConcurrentMap<RegionAndName,Image> imageMap=new MapMaker().makeComputingMap(new Function<RegionAndName,Image>(){
    @Override public Image apply(    RegionAndName from){
      return from.equals(knownRegionAndName) ? knownImage : null;
    }
  }
);
  return new EC2TemplateBuilderImpl(locations,images,sizes,Suppliers.ofInstance(defaultLocation),optionsProvider,templateBuilderProvider,imageMap);
}
