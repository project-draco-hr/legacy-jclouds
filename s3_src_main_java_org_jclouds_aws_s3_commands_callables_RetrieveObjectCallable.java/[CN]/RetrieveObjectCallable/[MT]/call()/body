{
  if (getResponse().getStatusCode() == 200) {
    S3Object object=new S3Object(key);
    String md5Header=getResponse().getFirstHeaderOrNull("x-amz-meta-object-md5");
    if (md5Header != null)     object.setContentMD5(md5Header);
    object.setLastModified(dateParser.dateTimeFromHeaderFormat(getResponse().getFirstHeaderOrNull("Last-Modified")));
    String eTag=getResponse().getFirstHeaderOrNull("ETag");
    if (eTag != null) {
      object.setETag(eTag.replaceAll("\"",""));
    }
    object.setContentType(getResponse().getFirstHeaderOrNull("Content-Type"));
    object.setSize(Long.parseLong(getResponse().getFirstHeaderOrNull("Content-Length")));
    object.setServer(getResponse().getFirstHeaderOrNull("Server"));
    if (getResponse().getContent() != null) {
      object.setContent(getResponse().getContent());
    }
    return object;
  }
 else   if (getResponse().getStatusCode() == 404) {
    return S3Object.NOT_FOUND;
  }
 else {
    String reason=null;
    try {
      reason=Utils.toStringAndClose(getResponse().getContent());
    }
 catch (    IOException e) {
      logger.error(e,"error parsing reason");
    }
    throw new HttpException("Error parsing object " + getResponse() + " reason: "+ reason);
  }
}
