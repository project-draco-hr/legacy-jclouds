{
  ComputeServiceContext context=null;
  try {
    context=new ComputeServiceContextFactory().createContext(new ViComputeServiceContextSpec(endpoint,identity,credential),ImmutableSet.<Module>of(new Log4JLoggingModule()),new ViPropertiesBuilder().build());
    Set<? extends Location> locations=context.getComputeService().listAssignableLocations();
    for (    Location location : locations) {
      System.out.println("location id: " + location.getId() + " - desc: "+ location.getDescription());
    }
    Set<? extends Image> images=context.getComputeService().listImages();
    for (    Image image : images) {
      System.out.println("id: " + image.getId() + " - name:"+ image.getName());
      Set<? extends Hardware> hardwares=context.getComputeService().listHardwareProfiles();
      for (      Hardware hardware : hardwares) {
        System.out.println("hardware id: " + hardware.getId() + " - name: "+ hardware.getName());
      }
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    if (context != null)     context.close();
  }
}
