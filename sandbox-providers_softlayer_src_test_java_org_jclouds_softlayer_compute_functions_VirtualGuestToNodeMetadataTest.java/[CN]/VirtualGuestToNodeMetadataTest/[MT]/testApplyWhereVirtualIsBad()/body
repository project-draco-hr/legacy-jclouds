{
  VirtualGuest guest=new ParseBadVirtualGuest().expected();
  Map<String,Credentials> credentialStore=ImmutableMap.<String,Credentials>of();
  Supplier<Set<? extends Location>> locationSupplier=Suppliers.<Set<? extends Location>>ofInstance(ImmutableSet.<Location>of());
  VirtualGuestToNodeMetadata parser=new VirtualGuestToNodeMetadata(credentialStore,new FindLocationForVirtualGuest(locationSupplier),new GetHardwareForVirtualGuestMock(),new GetImageForVirtualGuestMock());
  NodeMetadata node=parser.apply(guest);
  assertEquals(node,new NodeMetadataBuilder().ids("413348").name("foo-ef4").hostname("foo-ef4").group("foo").state(NodeState.PENDING).hardware(new GetHardwareForVirtualGuestMock().getHardware(guest)).imageId(new GetImageForVirtualGuestMock().getImage(guest).getId()).operatingSystem(new GetImageForVirtualGuestMock().getImage(guest).getOperatingSystem()).build());
  assertEquals(node.getCredentials(),null);
}
