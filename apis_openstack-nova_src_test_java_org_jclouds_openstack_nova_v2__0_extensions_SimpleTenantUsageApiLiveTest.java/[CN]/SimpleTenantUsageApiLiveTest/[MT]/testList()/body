{
  for (  String zoneId : novaContext.getApi().getConfiguredZones()) {
    Optional<? extends SimpleTenantUsageApi> optApi=novaContext.getApi().getSimpleTenantUsageExtensionForZone(zoneId);
    if (optApi.isPresent() && identity.endsWith(":admin")) {
      SimpleTenantUsageApi api=optApi.get();
      Set<? extends SimpleTenantUsage> usages=api.listTenantUsages();
      assertNotNull(usages);
      for (      SimpleTenantUsage usage : usages) {
        SimpleTenantUsage details=api.getTenantUsage(usage.getTenantId());
        assertNotNull(details);
      }
    }
  }
}
