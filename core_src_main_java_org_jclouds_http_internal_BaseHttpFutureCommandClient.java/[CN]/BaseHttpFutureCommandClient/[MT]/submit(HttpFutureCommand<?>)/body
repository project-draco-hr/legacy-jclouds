{
  HttpRequest request=command.getRequest();
  Q nativeRequest=null;
  try {
    for (    HttpRequestFilter filter : requestFilters) {
      filter.filter(request);
    }
    HttpResponse response=null;
    for (; ; ) {
      logger.trace("%1$s - converting request %2$s",request.getEndPoint(),request);
      nativeRequest=convert(request);
      response=invoke(nativeRequest);
      int statusCode=response.getStatusCode();
      if (statusCode >= 500 && httpRetryHandler.shouldRetryRequest(command,response))       continue;
      break;
    }
    handleResponse(command,response);
  }
 catch (  Exception e) {
    command.setException(e);
  }
 finally {
    cleanup(nativeRequest);
  }
}
