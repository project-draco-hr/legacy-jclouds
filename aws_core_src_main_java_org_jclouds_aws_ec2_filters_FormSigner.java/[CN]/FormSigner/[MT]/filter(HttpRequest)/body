{
  GeneratedHttpRequest<?> request=(GeneratedHttpRequest<?>)in;
  checkNotNull(request.getFirstHeaderOrNull(HttpHeaders.HOST),"request is not ready to sign; host not present");
  Multimap<String,String> decodedParams=RestAnnotationProcessor.parseQueryToMap(request.getEntity().toString());
  addSigningParams(decodedParams);
  validateParams(decodedParams);
  String stringToSign=createStringToSign(request,decodedParams);
  String signature=signString(stringToSign);
  addSignature(decodedParams,signature);
  setEntity(request,decodedParams);
  HttpUtils.logRequest(signatureLog,request,"<<");
}
