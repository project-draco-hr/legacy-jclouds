{
  Method method=OpscodePlatformAsyncClient.class.getMethod("createUser",User.class);
  GeneratedHttpRequest<OpscodePlatformAsyncClient> httpRequest=processor.createRequest(method,new User("myuser"));
  assertRequestLineEquals(httpRequest,"POST https://api.opscode.com/users HTTP/1.1");
  assertHeadersEqual(httpRequest,"Accept: application/json\nContent-Length: 21\nContent-Type: application/json\n");
  assertPayloadEquals(httpRequest,"{\"username\":\"myuser\"}");
  Iterables.getOnlyElement(httpRequest.getFilters()).filter(httpRequest);
  Iterables.getOnlyElement(httpRequest.getFilters()).filter(httpRequest);
  assertRequestLineEquals(httpRequest,"POST https://api.opscode.com/users HTTP/1.1");
  assertHeadersEqual(httpRequest,new StringBuilder("Accept: application/json").append("\n").append("Content-Length: 21").append("\n").append("Content-Type: application/json").append("\n").append("X-Ops-Authorization-1: kfrkDpfgNU26k70R1vl1bEWk0Q0f9Fs/3kxOX7gHd7iNoJq03u7RrcrAOSgL").append("\n").append("X-Ops-Authorization-2: ETj5JNeCk18BmFkHMAbCA9hXVo1T4rlHCpbuzAzFlFxUGAT4wj8UoO7V886X").append("\n").append("X-Ops-Authorization-3: Kf8DvihP6ElthCNuu1xuhN0B4GEmWC9+ut7UMLe0L2T34VzkbCtuInGbf42/").append("\n").append("X-Ops-Authorization-4: G7iu94/xFOT1gN9cex4pNyTnRCHzob4JVU1usxt/2g5grN2SyYwRS5+4MNLN").append("\n").append("X-Ops-Authorization-5: WY/iLUPb/9dwtiIQsnUOXqDrs28zNswZulQW4AzYRd7MczJVKU4y4+4XRcB4").append("\n").append("X-Ops-Authorization-6: 2+BFLT5o6P6G0D+eCu3zSuaqEJRucPJPaDGWdKIMag==").append("\n").append("X-Ops-Content-Hash: yLHOxvgIEtNw5UrZDxslOeMw1gw=").append("\n").append("X-Ops-Sign: version=1.0").append("\n").append("X-Ops-Timestamp: timestamp").append("\n").append("X-Ops-Userid: user").append("\n").toString());
  assertPayloadEquals(httpRequest,"{\"username\":\"myuser\"}");
  assertResponseParserClassEquals(method,httpRequest,ParseKeyFromJson.class);
  assertSaxResponseParserClassEquals(method,null);
  assertExceptionParserClassEquals(method,null);
  checkFilters(httpRequest);
}
