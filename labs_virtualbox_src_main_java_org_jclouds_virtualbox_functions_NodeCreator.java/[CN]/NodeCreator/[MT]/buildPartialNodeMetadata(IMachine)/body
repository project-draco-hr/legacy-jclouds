{
  INetworkAdapter realNatAdapter=clone.getNetworkAdapter(0l);
  NodeMetadataBuilder nodeMetadataBuilder=new NodeMetadataBuilder();
  nodeMetadataBuilder.id(clone.getName());
  nodeMetadataBuilder.state(VirtualBoxComputeServiceContextModule.machineToNodeState.get(clone.getState()));
  nodeMetadataBuilder.publicAddresses(ImmutableSet.of(realNatAdapter.getNatDriver().getHostIP()));
  for (  String nameProtocolnumberAddressInboudportGuestTargetport : realNatAdapter.getNatDriver().getRedirects()) {
    Iterable<String> stuff=Splitter.on(',').split(nameProtocolnumberAddressInboudportGuestTargetport);
    String protocolNumber=Iterables.get(stuff,1);
    String inboundPort=Iterables.get(stuff,3);
    String targetPort=Iterables.get(stuff,5);
    if ("1".equals(protocolNumber) && "22".equals(targetPort)) {
      int inPort=Integer.parseInt(inboundPort);
      nodeMetadataBuilder.loginPort(inPort);
    }
  }
  LoginCredentials loginCredentials=new LoginCredentials("toor","password",null,true);
  nodeMetadataBuilder.credentials(loginCredentials);
  return nodeMetadataBuilder.build();
}
