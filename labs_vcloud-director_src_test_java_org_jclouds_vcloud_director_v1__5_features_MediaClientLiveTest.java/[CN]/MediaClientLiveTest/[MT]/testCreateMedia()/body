{
  assertNotNull(vdcRef,String.format(REF_REQ_LIVE,VDC));
  assertNotNull(vdcClient.getVdc(vdcRef),String.format(OBJ_REQ_LIVE,VDC));
  java.io.File sourceFile=new java.io.File(getClass().getResource("/media/test.iso").toURI());
  Media sourceMedia=Media.builder().type(VCloudDirectorMediaType.MEDIA).name("Test media 1").size(sourceFile.length()).imageType(Media.ImageType.ISO).description("Test media generated by testCreateMedia()").build();
  media=vdcClient.createMedia(vdcRef,sourceMedia);
  Checks.checkMediaFor(MEDIA,media);
  assertNotNull(media.getFiles(),"");
  assertTrue(media.getFiles().getFiles().size() == 1,"");
  File uploadFile=Iterables.getFirst(media.getFiles().getFiles(),null);
  assertNotNull(uploadFile,"");
  assertTrue(equal(uploadFile.getSize(),sourceMedia.getSize()),"");
  Set<Link> links=uploadFile.getLinks();
  assertNotNull(links,"");
  assertTrue(links.size() == 1,"");
  Link uploadLink=Iterables.getFirst(links,null);
  assertTrue(equal(uploadLink.getRel(),Link.Rel.UPLOAD_DEFAULT),"");
  fail();
  context.getApi().getUploadClient().uploadFile(uploadLink,sourceFile);
}
