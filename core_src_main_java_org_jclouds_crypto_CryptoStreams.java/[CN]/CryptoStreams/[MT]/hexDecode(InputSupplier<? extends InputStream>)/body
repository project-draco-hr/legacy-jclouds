{
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  return com.google.common.io.ByteStreams.readBytes(supplier,new ByteProcessor<byte[]>(){
    int currentPos=0;
    public boolean processBytes(    byte[] buf,    int off,    int len){
      if (currentPos == 0 && new String(Arrays.copyOfRange(buf,off,2),Charsets.US_ASCII).equals("0x")) {
        off+=2;
      }
      byte[] decoded=hex(new String(Arrays.copyOfRange(buf,off,len),Charsets.US_ASCII));
      out.write(decoded,0,decoded.length);
      currentPos+=len;
      return true;
    }
    public byte[] getResult(){
      return out.toByteArray();
    }
  }
);
}
