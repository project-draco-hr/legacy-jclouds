{
  String provisional=base64(in);
  int length=provisional.length();
  if (length == 0)   return provisional;
 else   if (provisional.charAt(length - 2) == '=')   length-=2;
 else   if (provisional.charAt(length - 1) == '=')   length-=1;
  char[] tmp=new char[length];
  for (int i=0; i < length; i++) {
    char c=provisional.charAt(i);
switch (c) {
case '+':
      tmp[i]='-';
    break;
case '/':
  tmp[i]='_';
break;
default :
tmp[i]=c;
break;
}
}
return new String(tmp);
}
