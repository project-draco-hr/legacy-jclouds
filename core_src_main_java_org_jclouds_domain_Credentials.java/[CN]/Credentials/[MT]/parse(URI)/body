{
  checkNotNull(uri,"uri");
  List<String> userInfo=Lists.newArrayList(Splitter.on(':').split(checkNotNull(uri.getUserInfo(),"no userInfo in " + uri)));
  String identity=checkNotNull(userInfo.get(0),"no username in " + uri.getUserInfo());
  if (Strings2.isUrlEncoded(identity)) {
    identity=Strings2.urlDecode(identity);
  }
  String credential=userInfo.size() > 1 ? userInfo.get(1) : null;
  if (credential != null && Strings2.isUrlEncoded(credential)) {
    credential=Strings2.urlDecode(credential);
  }
  return new Credentials(identity,credential);
}
