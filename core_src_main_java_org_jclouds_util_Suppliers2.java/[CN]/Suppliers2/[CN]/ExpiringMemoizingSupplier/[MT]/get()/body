{
  long nanos=expirationNanos;
  long now=System.nanoTime();
  if (nanos == 0 || now - nanos >= 0) {
synchronized (this) {
      if (nanos == expirationNanos) {
        value=null;
        T t=delegate.get();
        value=t;
        now=System.nanoTime();
        nanos=now + durationNanos;
        expirationNanos=(nanos == 0) ? 1 : nanos;
        return t;
      }
    }
  }
  return value;
}
