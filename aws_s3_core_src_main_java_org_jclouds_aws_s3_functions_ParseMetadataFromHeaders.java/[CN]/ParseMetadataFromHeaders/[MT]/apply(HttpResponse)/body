{
  String objectKey=from.getRequestURL().getPath();
  if (objectKey.startsWith("/")) {
    objectKey=objectKey.substring(1);
  }
  S3Object.Metadata to=new S3Object.Metadata(objectKey);
  addAllHeadersTo(from,to);
  addUserMetadataTo(from,to);
  addETagTo(from,to);
  parseLastModifiedOrThrowException(from,to);
  setContentTypeOrThrowException(from,to);
  setContentLengthOrThrowException(from,to);
  to.setCacheControl(from.getFirstHeaderOrNull(HttpHeaders.CACHE_CONTROL));
  to.setContentDisposition(from.getFirstHeaderOrNull("Content-Disposition"));
  to.setContentEncoding(from.getFirstHeaderOrNull(HttpHeaders.CONTENT_ENCODING));
  return to;
}
