{
  checkNotNull(deviceName,"deviceName cannot be null");
  Preconditions2.checkNotEmpty(deviceName,"deviceName must be non-empty");
  checkNotNull(virtualName,"virtualName cannot be null");
  Preconditions2.checkNotEmpty(virtualName,"virtualName must be non-empty");
  Set<BlockDeviceMapping> mappings=new HashSet<BlockDeviceMapping>();
  mappings.addAll(blockDeviceMappings);
  MapEphemeralDeviceToDevice mapping=new MapEphemeralDeviceToDevice(deviceName,virtualName);
  mappings.add(mapping);
  blockDeviceMappings=ImmutableSet.copyOf(mappings);
  return this;
}
