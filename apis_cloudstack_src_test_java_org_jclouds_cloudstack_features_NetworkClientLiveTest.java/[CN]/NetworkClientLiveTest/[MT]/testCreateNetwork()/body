{
  if (!networksSupported)   return;
  try {
    network=client.getNetworkClient().createNetworkInZone(zone.getId(),offering.getId(),prefix,prefix);
    weCreatedNetwork=true;
  }
 catch (  IllegalStateException e) {
    network=find(client.getNetworkClient().listNetworks(zoneId(zone.getId()).accountInDomain(currentUser.getAccount(),currentUser.getDomainId())),new Predicate<Network>(){
      @Override public boolean apply(      Network arg0){
        return arg0.getNetworkOfferingId() == offering.getId();
      }
    }
);
  }
  checkNetwork(network);
}
