{
  String containerName=getContainerName();
  String destinationContainer=getContainerName();
  try {
    addToContainerAndValidate(containerName,sourceKey);
    context.getApi().copyBlob(containerName,sourceKey,destinationContainer,destinationKey,ifSourceETagDoesntMatch(badETag)).get(10,TimeUnit.SECONDS);
    validateContent(destinationContainer,destinationKey);
    try {
      context.getApi().copyBlob(containerName,sourceKey,destinationContainer,destinationKey,ifSourceETagDoesntMatch(goodETag)).get(10,TimeUnit.SECONDS);
    }
 catch (    ExecutionException e) {
      HttpResponseException ex=(HttpResponseException)e.getCause();
      assertEquals(ex.getResponse().getStatusCode(),412);
    }
  }
  finally {
    returnContainer(containerName);
    returnContainer(destinationContainer);
  }
}
