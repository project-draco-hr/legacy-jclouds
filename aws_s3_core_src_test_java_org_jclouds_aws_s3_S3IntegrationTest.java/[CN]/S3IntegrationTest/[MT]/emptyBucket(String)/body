{
  if (client.bucketExists(name).get(10,TimeUnit.SECONDS)) {
    assertEventually(new Runnable(){
      public void run(){
        try {
          Map<String,InputStream> map=context.createInputStreamMap(name);
          Set<String> keys=map.keySet();
          if (keys.size() > 0) {
            map.clear();
            assertEquals(map.size(),0,String.format("deleting %s, we still have %s left in bucket %s, using encoding %s",keys,map.keySet(),name,LOCAL_ENCODING));
          }
        }
 catch (        Exception e) {
          Utils.<RuntimeException>rethrowIfRuntimeOrSameType(e);
        }
      }
    }
);
  }
}
