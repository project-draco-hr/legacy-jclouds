{
  NodeMetadataBuilder builder=new NodeMetadataBuilder();
  builder.ids(from.getId());
  builder.name(from.getDescription());
  builder.location(location.get());
  builder.tag(from.getGroup());
  builder.operatingSystem(new OperatingSystemBuilder().arch(from.getOsArch()).family(OsFamily.fromValue(from.getOsFamily())).name(from.getOsName()).version(from.getOsVersion()).description(from.getDescription()).build());
  builder.state(NodeState.RUNNING);
  builder.publicAddresses(ImmutableSet.<String>of(from.getHostname()));
  Credentials creds=new Credentials(from.getUsername(),new String(CryptoStreams.base64(from.getCredential()),Charsets.UTF_8));
  builder.credentials(creds);
  if (from.getSudoPassword() != null)   builder.adminPassword(new String(CryptoStreams.base64(from.getSudoPassword()),Charsets.UTF_8));
  credentialStore.put("node#" + from.getId(),creds);
  return builder.build();
}
