{
  UndeployVAppParams params=UndeployVAppParams.builder().build();
  Task undeploy=vAppClient.undeploy(vApp.getHref(),params);
  assertTrue(retryTaskSuccess.apply(undeploy),String.format(TASK_COMPLETE_TIMELY,"undeploy"));
  vApp=vAppClient.getVApp(vApp.getHref());
  Status poweredOnStatus=Status.POWERED_ON;
  assertEquals(vApp.getStatus(),poweredOnStatus.getValue(),String.format(OBJ_FIELD_EQ,VAPP,"status",poweredOnStatus.toString(),Status.fromValue(vApp.getStatus()).toString()));
}
