{
  String expected=Strings2.toStringAndClose(getClass().getResourceAsStream("/cloneVApp-default.xml"));
  GeneratedHttpRequest request=GeneratedHttpRequest.builder().method("POST").endpoint("http://localhost/key").declaring(String.class).javaMethod(String.class.getDeclaredMethod("toString")).build();
  BindCloneVAppParamsToXmlPayload binder=injector.getInstance(BindCloneVAppParamsToXmlPayload.class);
  Map<String,Object> map=Maps.newHashMap();
  map.put("newName","my-vapp");
  map.put("vApp","https://vcloud.safesecureweb.com/api/v0.8/vapp/4181");
  assertEquals(binder.bindToRequest(request,map).getPayload().getRawContent(),expected);
}
