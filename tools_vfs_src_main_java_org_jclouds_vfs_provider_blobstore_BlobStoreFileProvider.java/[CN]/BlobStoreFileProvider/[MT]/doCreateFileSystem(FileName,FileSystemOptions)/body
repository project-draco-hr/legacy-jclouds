{
  BlobStoreFileName rootName=(BlobStoreFileName)name;
  UserAuthenticationData authData=null;
  BlobStoreContext context;
  try {
    String uriToParse=rootName.getFriendlyURI();
    authData=UserAuthenticatorUtils.authenticate(fileSystemOptions,AUTHENTICATOR_TYPES);
    URI location=HttpUtils.createUri(uriToParse);
    context=new BlobStoreContextFactory().createContext(location.getHost(),UserAuthenticatorUtils.toString(UserAuthenticatorUtils.getData(authData,UserAuthenticationData.USERNAME,UserAuthenticatorUtils.toChar(rootName.getUserName()))),UserAuthenticatorUtils.toString(UserAuthenticatorUtils.getData(authData,UserAuthenticationData.PASSWORD,UserAuthenticatorUtils.toChar(rootName.getPassword()))),modules,new Properties());
  }
  finally {
    UserAuthenticatorUtils.cleanup(authData);
  }
  return new BlobStoreFileSystem(rootName,context,fileSystemOptions);
}
