{
  ContextBuilder builder=null;
  try {
    ProviderMetadata pm=Providers.withId(providerOrApi);
    builder=ContextBuilder.newBuilder(pm);
  }
 catch (  NoSuchElementException e) {
    builder=ContextBuilder.newBuilder(Apis.withId(providerOrApi));
  }
  builder.modules(wiring);
  builder.overrides(overrides);
  if (identity != null)   builder.credentials(identity,credential);
  return builder.build(ComputeServiceContext.class);
}
