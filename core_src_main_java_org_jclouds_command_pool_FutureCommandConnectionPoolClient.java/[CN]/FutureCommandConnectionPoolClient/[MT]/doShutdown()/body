{
  exception.compareAndSet(null,getExceptionFromDependenciesOrNull());
  while (!commandQueue.isEmpty()) {
    FutureCommand<E,?,?,?> command=(FutureCommand<E,?,?,?>)commandQueue.remove();
    if (command != null) {
      if (exception.get() != null)       command.setException(exception.get());
 else       command.cancel(true);
    }
  }
}
