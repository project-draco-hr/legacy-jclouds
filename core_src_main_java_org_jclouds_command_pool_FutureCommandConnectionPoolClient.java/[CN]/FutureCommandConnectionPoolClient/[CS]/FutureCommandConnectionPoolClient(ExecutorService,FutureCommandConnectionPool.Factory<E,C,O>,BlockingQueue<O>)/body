{
  super(executor);
  this.poolFactory=pf;
  poolMap=new MapMaker().makeComputingMap(new Function<E,FutureCommandConnectionPool<E,C,O>>(){
    public FutureCommandConnectionPool<E,C,O> apply(    E endPoint){
      try {
        FutureCommandConnectionPool<E,C,O> pool=poolFactory.create(endPoint);
        addDependency(pool);
        return pool;
      }
 catch (      RuntimeException e) {
        logger.error(e,"error creating entry for %s",endPoint);
        throw e;
      }
    }
  }
);
  this.commandQueue=commandQueue;
}
