{
  URI endpoint=URI.create("https://dfw.loadbalancers.api.rackspacecloud.com/v1.0/123123/loadbalancers");
  LoadBalancerApi api=requestsSendResponses(rackspaceAuthWithUsernameAndApiKey,responseWithAccess,authenticatedGET().method("POST").payload(payloadFromResource("/loadbalancer-create.json")).endpoint(endpoint).build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/loadbalancer-get.json")).build()).getLoadBalancerApiForZone("DFW");
  NodeRequest nodeRequest1=NodeRequest.builder().address("10.1.1.1").condition(NodeRequest.Condition.ENABLED).port(80).build();
  NodeRequest nodeRequest2=NodeRequest.builder().address("10.1.1.2").condition(NodeRequest.Condition.ENABLED).port(80).build();
  Set<NodeRequest> nodeRequests=Sets.newHashSet(nodeRequest1,nodeRequest2);
  LoadBalancerRequest lbRequest=LoadBalancerRequest.builder().name("sample-loadbalancer").protocol("HTTP").port(80).algorithm(LoadBalancer.Algorithm.RANDOM).virtualIPType(VirtualIP.Type.PUBLIC).nodes(nodeRequests).build();
  LoadBalancer loadBalancer=api.create(lbRequest);
  assertEquals(loadBalancer,testLoadBalancer());
}
