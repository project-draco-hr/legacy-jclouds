{
  AdminClient client=requestsSendResponses(keystoneAuthWithUsernameAndPassword,responseWithKeystoneAccess,standardRequestBuilder(endpoint + "/v2.0/").headers(ImmutableMultimap.of("Accept",APPLICATION_JSON)).build(),standardResponseBuilder(200).payload(payloadFromResourceWithContentType("/api_metadata.json",APPLICATION_JSON)).build()).getAdminClientForRegion("region-a.geo-1");
  ApiMetadata metadata=client.getApiMetadata();
  assertNotNull(metadata);
  assertEquals(metadata.getId(),"v2.0");
  ApiMetadata expected=ApiMetadata.builder().id("v2.0").links(ImmutableSet.of(Link.builder().relation(Link.Relation.SELF).href(URI.create("http://172.16.89.140:5000/v2.0/")).build(),Link.builder().relation(Link.Relation.DESCRIBEDBY).type("text/html").href(URI.create("http://docs.openstack.org/api/openstack-identity-service/2.0/content/")).build(),Link.builder().relation(Link.Relation.DESCRIBEDBY).type("application/pdf").href(URI.create("http://docs.openstack.org/api/openstack-identity-service/2.0/identity-dev-guide-2.0.pdf")).build())).status("beta").updated(new SimpleDateFormatDateService().iso8601SecondsDateParse("2011-11-19T00:00:00Z")).mediaTypes(ImmutableSet.of(MediaType.builder().base("application/json").type("application/vnd.openstack.identity-v2.0+json").build(),MediaType.builder().base("application/xml").type("application/vnd.openstack.identity-v2.0+xml").build())).build();
  assertEquals(metadata,expected);
}
