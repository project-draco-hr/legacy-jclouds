{
  vmName="jclouds-test-create-1-node";
  String vmId=UUID.randomUUID().toString();
  StorageController ideController=StorageController.builder().name(ideControllerName).bus(StorageBus.IDE).attachISO(0,0,operatingSystemIso).attachHardDisk(HardDisk.builder().diskpath(adminDisk(vmName)).controllerPort(0).deviceSlot(1).build()).attachISO(1,1,guestAdditionsIso).build();
  VmSpec vmSpec=VmSpec.builder().id(vmId).name(vmName).memoryMB(512).controller(ideController).cleanUpMode(mode).osTypeId("Debian").forceOverwrite(true).build();
  NetworkAdapter networkAdapter=NetworkAdapter.builder().networkAttachmentType(NetworkAttachmentType.NAT).tcpRedirectRule("127.0.0.1",2222,"",22).build();
  NetworkInterfaceCard networkInterfaceCard=NetworkInterfaceCard.builder().addNetworkAdapter(networkAdapter).build();
  NetworkSpec networkSpec=NetworkSpec.builder().addNIC(networkInterfaceCard).build();
  MasterSpec machineSpec=MasterSpec.builder().iso(IsoSpec.builder().sourcePath(operatingSystemIso).installationScript("").build()).vm(vmSpec).network(networkSpec).build();
  IMachine debianNode=view.utils().injector().getInstance(CreateAndRegisterMachineFromIsoIfNotAlreadyExists.class).apply(machineSpec);
  IMachine machine=manager.get().getVBox().findMachine(vmName);
  assertEquals(debianNode.getName(),machine.getName());
}
