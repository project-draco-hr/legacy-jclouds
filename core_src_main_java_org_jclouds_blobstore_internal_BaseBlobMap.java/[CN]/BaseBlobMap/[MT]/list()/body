{
  SortedSet<? extends BlobMetadata> returnVal=getAllBlobMetadata.execute(containerName,options);
  if (options.getDir() != null) {
    returnVal=Sets.newTreeSet(Iterables.transform(returnVal,new Function<BlobMetadata,BlobMetadata>(){
      public BlobMetadata apply(      BlobMetadata from){
        MutableBlobMetadata md=new MutableBlobMetadataImpl(from);
        md.setName(pathStripper.apply(from.getName()));
        return md;
      }
    }
));
  }
  return returnVal;
}
