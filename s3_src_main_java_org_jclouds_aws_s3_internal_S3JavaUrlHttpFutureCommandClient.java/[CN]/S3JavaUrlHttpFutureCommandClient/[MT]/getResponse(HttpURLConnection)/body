{
  HttpResponse response=super.getResponse(connection);
  int code=response.getStatusCode();
  if (code >= 300) {
    InputStream errorStream=response.getContent();
    if (errorStream != null) {
      try {
        S3Error error=parserFactory.createErrorParser().parse(errorStream);
        logger.error("received the following error from s3: %1s",error);
        throw new S3ResponseException(error,response);
      }
 catch (      HttpException he) {
        logger.error(he,"error parsing response");
      }
 finally {
        IOUtils.closeQuietly(errorStream);
      }
    }
  }
  return response;
}
