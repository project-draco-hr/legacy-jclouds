{
  AccountClient client=requestSendsResponse(HttpRequest.builder().method("GET").endpoint(URI.create("http://localhost:8080/client/api?response=json&command=listAccounts&apiKey=identity&signature=maSZcp9ivkL7osVh87qxlrYbZC8%3D")).headers(ImmutableMultimap.<String,String>builder().put("Accept","application/json").build()).build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/listaccountsresponse.json")).build());
  Set<User> users=ImmutableSet.of(User.builder().id(505).name("jclouds").firstName("Adrian").lastName("Cole").email("adrian@jclouds.org").created(new SimpleDateFormatDateService().iso8601SecondsDateParse("2011-04-19T01:57:24+0000")).state(User.State.ENABLED).account("jclouds").accountType(Account.Type.USER).domainId(457).domain("AA000062-jclouds-dev").apiKey("APIKEY").secretKey("SECRETKEY").build());
  assertEquals(client.listAccounts(),ImmutableSet.of(Account.builder().id(505).name("jclouds").type(Account.Type.USER).domainId(457).domain("AA000062-jclouds-dev").receivedBytes(318900216).sentBytes(23189677).VMLimit(15l).VMs(1).IPsAvailable(14l).IPLimit(15l).IPs(0).IPsAvailable(15l).volumeLimit(90l).volumes(2).volumesAvailable(88l).snapshotLimit(250l).snapshots(0).snapshotsAvailable(250l).templateLimit(15l).templates(0).templatesAvailable(15l).VMsAvailable(14l).VMsStopped(0).VMsRunning(1).state(Account.State.ENABLED).users(users).build()));
}
