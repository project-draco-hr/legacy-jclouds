{
  VirtualBoxManager manager=createMock(VirtualBoxManager.class);
  Factory runScriptOnNodeFactory=createMock(Factory.class);
  RetryIfSocketNotYetOpen client=createMock(RetryIfSocketNotYetOpen.class);
  NodeMetadata host=new NodeMetadataBuilder().id("host").state(NodeState.RUNNING).build();
  URI provider=URI.create("http://localhost:18083/");
  String identity="adminstrator";
  String credential="12345";
  expect(client.apply(new IPSocket(provider.getHost(),provider.getPort()))).andReturn(true);
  manager.connect(provider.toASCIIString(),identity,credential);
  replay(manager,runScriptOnNodeFactory,client);
  new StartVBoxIfNotAlreadyRunning((Function)Functions.constant(manager),runScriptOnNodeFactory,client,Suppliers.ofInstance(host),Suppliers.ofInstance(provider),identity,credential).start();
  verify(manager,runScriptOnNodeFactory,client);
}
