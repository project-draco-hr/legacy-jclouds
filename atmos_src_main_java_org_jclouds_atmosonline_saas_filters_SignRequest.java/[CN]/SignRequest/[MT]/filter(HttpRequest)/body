{
  Builder<String,String> builder=ImmutableMap.builder();
  builder.put(AtmosStorageHeaders.UID,uid);
  String date=timeStampProvider.get();
  builder.put(HttpHeaders.DATE,date);
  if (request.getHeaders().containsKey(AtmosStorageHeaders.DATE))   builder.put(AtmosStorageHeaders.DATE,date);
  request=ModifyRequest.replaceHeaders(request,Multimaps.forMap(builder.build()));
  String signature=calculateSignature(createStringToSign(request));
  request=ModifyRequest.replaceHeader(request,AtmosStorageHeaders.SIGNATURE,signature);
  utils.logRequest(signatureLog,request,"<<");
  return request;
}
