{
  Supplier<String> delegate=createMock(Supplier.class);
  TimeoutException timeout=createMock(TimeoutException.class);
  RuntimeException throwable=new RuntimeException(timeout);
  expect(delegate.get()).andThrow(throwable);
  expect(timeout.getCause()).andReturn(null).anyTimes();
  expect(delegate.get()).andThrow(throwable);
  expect(delegate.get()).andThrow(throwable);
  replay(delegate);
  replay(timeout);
  RetryOnTimeOutExceptionSupplier<String> supplier=new RetryOnTimeOutExceptionSupplier<String>(delegate);
  try {
    supplier.get();
    fail();
  }
 catch (  RuntimeException e) {
    assertEquals(e.getCause(),timeout);
  }
  verify(delegate);
  verify(timeout);
}
