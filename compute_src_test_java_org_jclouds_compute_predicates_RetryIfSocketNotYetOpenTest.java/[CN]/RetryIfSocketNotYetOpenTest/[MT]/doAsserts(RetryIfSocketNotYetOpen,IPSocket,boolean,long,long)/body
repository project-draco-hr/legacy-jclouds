{
  long startTime=System.currentTimeMillis();
  boolean result=predicate.apply(socket);
  long elapsedTime=System.currentTimeMillis() - startTime;
  assertEquals(result,expectedResult);
  assertTrue(elapsedTime >= minMilliseconds && elapsedTime < maxMilliseconds,"apply() returned after ~" + elapsedTime + "ms, expected it to take between "+ minMilliseconds+ " and "+ maxMilliseconds);
}
