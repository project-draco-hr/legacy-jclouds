{
  if (nothingChangedExceptOptions())   return defaultTemplateProvider.get().build();
  if (locationId == null)   locationId=defaultLocation.getId();
  if (options == null)   options=optionsProvider.get();
  logger.debug(">> searching params(%s)",this);
  Location location=resolveLocation();
  Image image=resolveImage();
  this.arch=image.getArchitecture();
  Ordering<Size> sizeOrdering=sizeSorter();
  Size size=resolveSize(sizeOrdering);
  return new TemplateImpl(image,size,location,options);
}
