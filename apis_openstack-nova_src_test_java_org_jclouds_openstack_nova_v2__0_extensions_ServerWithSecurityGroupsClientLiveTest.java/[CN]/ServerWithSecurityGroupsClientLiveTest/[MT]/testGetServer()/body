{
  if (clientOption.isPresent()) {
    for (    Resource server : serverClient.listServers()) {
      ServerWithSecurityGroups serverWithGroups=clientOption.get().getServer(server.getId());
      assertEquals(serverWithGroups.getId(),server.getId());
      assertEquals(serverWithGroups.getName(),server.getName());
      assertNotNull(serverWithGroups.getSecurityGroupNames());
    }
    Server testServer=null;
    try {
      testServer=createServerInZone(zone);
      ServerWithSecurityGroups results=clientOption.get().getServer(testServer.getId());
      assertEquals(results.getId(),testServer.getId());
      assertEquals(results.getSecurityGroupNames(),ImmutableSet.of("default"));
    }
  finally {
      if (testServer != null) {
        serverClient.deleteServer(testServer.getId());
      }
    }
  }
}
