{
  checkNotNull(virtualMachine,"virtualMachine");
  try {
    VirtualMachineState state=virtualMachine.getState();
    if (state.existsInHypervisor()) {
      return MonitorStatus.FAILED;
    }
switch (state) {
case UNKNOWN:
      return MonitorStatus.FAILED;
case NOT_ALLOCATED:
    return MonitorStatus.DONE;
default :
  return MonitorStatus.CONTINUE;
}
}
 catch (ResourceNotFoundException nfe) {
logger.warn("virtual machine %s not found, assuming it was undeployed successfully, " + "stop monitor with DONE",virtualMachine);
return MonitorStatus.DONE;
}
catch (Exception ex) {
logger.warn(ex,"exception thrown while monitoring %s on %s, returning CONTINUE",virtualMachine,getClass().getName());
return MonitorStatus.CONTINUE;
}
}
