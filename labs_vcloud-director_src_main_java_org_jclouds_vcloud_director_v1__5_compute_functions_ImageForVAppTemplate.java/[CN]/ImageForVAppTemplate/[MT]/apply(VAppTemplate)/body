{
  checkNotNull(from,"VAppTemplate");
  Envelope ovf=templateToEnvelope.apply(from);
  ImageBuilder builder=new ImageBuilder();
  builder.ids(from.getHref().toASCIIString());
  builder.uri(from.getHref());
  builder.name(from.getName());
  Link vdc=Iterables.find(checkNotNull(from,"from").getLinks(),LinkPredicates.typeEquals(VCloudDirectorMediaType.VDC));
  if (vdc != null) {
    builder.location(findLocationForResource.apply(vdc));
  }
 else {
  }
  builder.description(from.getDescription() != null ? from.getDescription() : from.getName());
  builder.operatingSystem(CIMOperatingSystem.toComputeOs(ovf));
  builder.status(toPortableImageStatus.get(from.getStatus()));
  return builder.build();
}
