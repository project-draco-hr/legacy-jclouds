{
  Map<String,JsonBall> returnVal=newLinkedHashMap();
  Properties systemProperties=systemPropertiesProvider.get();
  returnVal.put("ohai_time",toOhaiTime(nanoTimeProvider.get()));
  returnVal.put("java",new JsonBall(json.toJson(systemProperties)));
  String platform=systemProperties.getProperty("os.name");
  platform=platform.replaceAll("[ -]","").toLowerCase();
  returnVal.put("platform",new JsonBall(platform));
  if (systemProperties.getProperty("os.version") != null)   returnVal.put("platform_version",new JsonBall(systemProperties.getProperty("os.version")));
  if (systemProperties.getProperty("user.name") != null)   returnVal.put("current_user",new JsonBall(systemProperties.getProperty("user.name")));
  return returnVal;
}
