{
  VApp vApp=client.getVApp(id);
  if (vApp == null)   return null;
  String tag=null;
  Image image=null;
  Matcher matcher=TAG_PATTERN_WITHOUT_TEMPLATE.matcher(vApp.getName());
  if (matcher.find()) {
    tag=matcher.group(1);
  }
 else {
    tag="NOTAG-" + vApp.getName();
  }
  Location location=findLocationForResourceInVDC.apply(vApp.getVDC());
  return new NodeMetadataImpl(vApp.getId(),vApp.getName(),vApp.getId(),location,vApp.getLocation(),ImmutableMap.<String,String>of(),tag,image,vAppStatusToNodeState.get(vApp.getStatus()),computeClient.getPublicAddresses(id),computeClient.getPrivateAddresses(id),getExtra.apply(vApp),null);
}
