{
  URI mediaUri=URI.create(endpoint + "/media/794eb334-754e-4917-b5a0-5df85cbd61d1");
  VCloudDirectorClient client=requestsSendResponses(loginRequest,sessionResponse,new VcloudHttpRequestPrimer().apiCommand("PUT","/media/794eb334-754e-4917-b5a0-5df85cbd61d1").xmlFilePayload("/media/media.xml",VCloudDirectorMediaType.MEDIA).acceptMedia(VCloudDirectorMediaType.MEDIA).httpRequestBuilder().build(),new VcloudHttpResponsePrimer().xmlFilePayload("/media/media.xml",VCloudDirectorMediaType.MEDIA).httpResponseBuilder().build());
  Media expected=media();
  Reference mediaRef=Reference.builder().href(mediaUri).build();
  assertEquals(client.getMediaClient().updateMedia(mediaRef,expected),expected);
}
