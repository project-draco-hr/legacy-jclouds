{
  Method method=TestMultipartForm.class.getMethod("withParamFilePart",String.class,File.class);
  File file=File.createTempFile("foo","bar");
  Files.append("foobledata",file,Charsets.UTF_8);
  file.deleteOnExit();
  GeneratedHttpRequest<TestMultipartForm> httpRequest=factory(TestMultipartForm.class).createRequest(method,"name",file);
  assertRequestLineEquals(httpRequest,"POST http://localhost:9999 HTTP/1.1");
  assertHeadersEqual(httpRequest,"Content-Length: 185\nContent-Type: multipart/form-data; boundary=--JCLOUDS--\n");
  assertPayloadEquals(httpRequest,"----JCLOUDS--\r\n" + "Content-Disposition: form-data; name=\"name\"\r\n" + "\r\n"+ "name\r\n"+ "----JCLOUDS--\r\n"+ "Content-Disposition: form-data; name=\"file\"\r\n"+ "Content-Type: text/plain\r\n"+ "\r\n"+ "foobledata\r\n"+ "----JCLOUDS----\r\n");
}
