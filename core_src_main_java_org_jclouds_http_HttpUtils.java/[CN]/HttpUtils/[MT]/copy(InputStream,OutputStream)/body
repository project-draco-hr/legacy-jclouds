{
  byte[] buffer=new byte[1024];
  long length=0;
  int numRead=-1;
  try {
    do {
      numRead=input.read(buffer);
      if (numRead > 0) {
        length+=numRead;
        output.write(buffer,0,numRead);
      }
    }
 while (numRead != -1);
  }
  finally {
    output.close();
    closeQuietly(input);
  }
}
