{
  String region=getRequest() != null ? AWSUtils.findRegionInArgsOrNull(getRequest()) : null;
  if (builder.getIpAddress() == null && builder.getDnsName() != null && builder.getDnsName().matches(".*[0-9]$")) {
    builder.ipAddress(builder.getDnsName());
    builder.dnsName(null);
  }
  if (builder.getPrivateIpAddress() == null && builder.getPrivateDnsName() != null && builder.getPrivateDnsName().matches(".*[0-9]$")) {
    builder.privateIpAddress(builder.getPrivateDnsName());
    builder.privateDnsName(null);
  }
  builder.region((region == null) ? defaultRegion.get() : region);
  builder.groupIds(groupIds);
}
