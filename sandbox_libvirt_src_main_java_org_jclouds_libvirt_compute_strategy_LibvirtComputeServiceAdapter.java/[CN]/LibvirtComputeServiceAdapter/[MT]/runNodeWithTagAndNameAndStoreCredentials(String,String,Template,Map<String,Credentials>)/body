{
  try {
    Domain domain=null;
    String domainName=tag;
    domain=client.domainLookupByName(domainName);
    XMLBuilder builder=XMLBuilder.parse(new InputSource(new StringReader(domain.getXMLDesc(0))));
    Document doc=builder.getDocument();
    XPathExpression expr=null;
    NodeList nodes=null;
    String xpathString="//devices/disk[@device='disk']/source/@file";
    expr=XPathFactory.newInstance().newXPath().compile(xpathString);
    nodes=(NodeList)expr.evaluate(doc,XPathConstants.NODESET);
    String diskFileName=nodes.item(0).getNodeValue();
    StorageVol storageVol=client.storageVolLookupByPath(diskFileName);
    String poolName=storageVol.storagePoolLookupByVolume().getName();
    StoragePool storagePool=client.storagePoolLookupByName(poolName);
    StorageVol clonedVol=cloneVolume(storagePool,storageVol);
    String xmlFinal=generateClonedDomainXML(domain.getXMLDesc(0),clonedVol);
    Domain newDomain=client.domainDefineXML(xmlFinal);
    newDomain.create();
    credentialStore.put(domain.getUUIDString() + "",new Credentials("identity","credential"));
    return newDomain;
  }
 catch (  LibvirtException e) {
    return propogate(e);
  }
catch (  Exception e) {
    return propogate(e);
  }
}
