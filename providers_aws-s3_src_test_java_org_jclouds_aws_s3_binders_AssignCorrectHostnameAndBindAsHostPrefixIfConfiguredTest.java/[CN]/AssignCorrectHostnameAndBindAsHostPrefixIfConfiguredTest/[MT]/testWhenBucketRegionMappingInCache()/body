{
  HttpRequest request=new HttpRequest("GET",URI.create("https://s3.amazonaws.com"));
  AssignCorrectHostnameAndBindAsHostPrefixIfConfigured binder=new AssignCorrectHostnameAndBindAsHostPrefixIfConfigured(new BindAsHostPrefix(uriBuilderProvider),true,"/",new RegionToEndpointOrProviderIfNull("aws-s3",Suppliers.ofInstance(URI.create("https://s3.amazonaws.com")),Suppliers.<Map<String,Supplier<URI>>>ofInstance(ImmutableMap.of("us-standard",Suppliers.ofInstance(URI.create("https://s3.amazonaws.com")),"us-west-1",Suppliers.ofInstance(URI.create("https://s3-us-west-1.amazonaws.com"))))),uriBuilderProvider,ImmutableMap.<String,String>of("bucket","us-west-1"));
  request=binder.bindToRequest(request,"bucket");
  assertEquals(request.getRequestLine(),"GET https://bucket.s3-us-west-1.amazonaws.com HTTP/1.1");
}
