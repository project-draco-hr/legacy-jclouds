{
  CFObject object=(CFObject)entity;
  request.setEntity(checkNotNull(object.getData(),"object.getData()"));
  if (object.getMetadata().getSize() >= 0) {
    request.getHeaders().put(HttpHeaders.CONTENT_LENGTH,object.getMetadata().getSize() + "");
  }
 else {
    request.getHeaders().put("Transfer-Encoding","chunked");
  }
  request.getHeaders().put(HttpHeaders.CONTENT_TYPE,checkNotNull(object.getMetadata().getContentType(),"object.metadata.contentType()"));
  if (object.getMetadata().getCacheControl() != null) {
    request.getHeaders().put(HttpHeaders.CACHE_CONTROL,object.getMetadata().getCacheControl());
  }
  if (object.getMetadata().getContentDisposition() != null) {
    request.getHeaders().put("Content-Disposition",object.getMetadata().getContentDisposition());
  }
  if (object.getMetadata().getContentEncoding() != null) {
    request.getHeaders().put(HttpHeaders.CONTENT_ENCODING,object.getMetadata().getContentEncoding());
  }
  if (object.getMetadata().getETag() != null) {
    try {
      String hexETag=HttpUtils.toHexString(object.getMetadata().getETag());
      request.getHeaders().put(HttpHeaders.ETAG,hexETag);
    }
 catch (    UnsupportedEncodingException e) {
      throw new RuntimeException("jclouds requires UTF-8 encoding" + object,e);
    }
  }
  request.getHeaders().putAll(object.getMetadata().getUserMetadata());
}
