{
  Blob<?> object=(Blob<?>)entity;
  if (object.getMetadata().getSize() >= 0) {
    request.getHeaders().put(HttpHeaders.CONTENT_LENGTH,object.getMetadata().getSize() + "");
  }
 else {
    request.getHeaders().put("Transfer-Encoding","chunked");
  }
  if (object.getMetadata().getContentMD5() != null) {
    request.getHeaders().put(HttpHeaders.ETAG,HttpUtils.toBase64String(object.getMetadata().getContentMD5()));
  }
  super.addEntityToRequest(entity,request);
}
