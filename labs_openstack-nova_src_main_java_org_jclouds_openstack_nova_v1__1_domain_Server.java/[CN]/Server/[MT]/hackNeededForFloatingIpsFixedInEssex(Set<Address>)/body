{
  Set<Address> publicAddresses=addresses.get(Address.Type.PUBLIC);
  ImmutableSetMultimap.Builder<Type,Address> returnMapBuilder=new ImmutableSetMultimap.Builder<Type,Address>();
  if (publicAddresses != null) {
    returnMapBuilder.putAll(Address.Type.PUBLIC,publicAddresses);
  }
  returnMapBuilder.putAll(Address.Type.PRIVATE,Iterables.filter(privateAddresses,IsPrivateAddress.INSTANCE));
  returnMapBuilder.putAll(Address.Type.PUBLIC,Iterables.filter(privateAddresses,Predicates.not(IsPrivateAddress.INSTANCE)));
  return returnMapBuilder.build();
}
