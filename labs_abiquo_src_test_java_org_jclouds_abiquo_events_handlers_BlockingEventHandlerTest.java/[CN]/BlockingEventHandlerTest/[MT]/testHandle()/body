{
  final Object object=new Object();
  final BlockingEventHandler<Object> handler=new BlockingEventHandler<Object>(object);
  Executors.newSingleThreadScheduledExecutor().schedule(new Runnable(){
    @Override public void run(){
      handler.handle(new MonitorEvent<Object>(Type.COMPLETED,object));
      assertTrue(handler.lockedObjects.isEmpty());
    }
  }
,500L,TimeUnit.MILLISECONDS);
  handler.lock();
}
