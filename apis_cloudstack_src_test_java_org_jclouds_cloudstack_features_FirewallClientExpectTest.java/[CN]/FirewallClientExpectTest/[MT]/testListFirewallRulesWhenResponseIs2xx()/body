{
  FirewallClient client=requestSendsResponse(HttpRequest.builder().method("GET").endpoint(URI.create("http://localhost:8080/client/api?response=json&command=listFirewallRules&" + "apiKey=identity&signature=MktZKKH3USVKiC9SlYTSHMCaCcg%3D")).headers(ImmutableMultimap.<String,String>builder().put("Accept","application/json").build()).build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/listfirewallrulesresponse.json")).build()).getFirewallClient();
  assertEquals(client.listFirewallRules(),ImmutableSet.of(FirewallRule.builder().id(2017).protocol(FirewallRule.Protocol.TCP).startPort(30).endPort(35).ipAddressId(2).ipAddress("10.27.27.51").state("Active").CIDRs("0.0.0.0/0").build(),FirewallRule.builder().id(2016).protocol(FirewallRule.Protocol.TCP).startPort(22).endPort(22).ipAddressId(2).ipAddress("10.27.27.51").state("Active").CIDRs("0.0.0.0/0").build(),FirewallRule.builder().id(10).protocol(FirewallRule.Protocol.TCP).startPort(22).endPort(22).ipAddressId(8).ipAddress("10.27.27.57").state("Active").CIDRs("0.0.0.0/0").build()));
}
