{
  FirewallClient client=requestSendsResponse(HttpRequest.builder().method("GET").endpoint(URI.create("http://localhost:8080/client/api?response=json&command=listFirewallRules&listAll=true&" + "apiKey=identity&signature=9%2BtdTXe2uYLzAexPNgrMy5Tq8hE%3D")).headers(ImmutableMultimap.<String,String>builder().put("Accept","application/json").build()).build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/listfirewallrulesresponse.json")).build());
  Set<String> CIDRs=ImmutableSet.of("0.0.0.0/0");
  assertEquals(client.listFirewallRules(),ImmutableSet.of(FirewallRule.builder().id("2017").protocol(FirewallRule.Protocol.TCP).startPort(30).endPort(35).ipAddressId("2").ipAddress("10.27.27.51").state(FirewallRule.State.ACTIVE).CIDRs(CIDRs).build(),FirewallRule.builder().id("2016").protocol(FirewallRule.Protocol.TCP).startPort(22).endPort(22).ipAddressId("2").ipAddress("10.27.27.51").state(FirewallRule.State.ACTIVE).CIDRs(CIDRs).build(),FirewallRule.builder().id("10").protocol(FirewallRule.Protocol.TCP).startPort(22).endPort(22).ipAddressId("8").ipAddress("10.27.27.57").state(FirewallRule.State.ACTIVE).CIDRs(CIDRs).build()));
}
