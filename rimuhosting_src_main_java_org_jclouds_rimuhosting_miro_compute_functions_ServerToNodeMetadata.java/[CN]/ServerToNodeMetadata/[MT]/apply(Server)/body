{
  Location location=new LocationImpl(LocationScope.ZONE,from.getLocation().getId(),from.getLocation().getName(),null);
  String tag=parseTagFromName(from.getName());
  Credentials creds=null;
  Image image=null;
  try {
    image=Iterables.find(images.get(),new FindImageForServer(location,from));
  }
 catch (  NoSuchElementException e) {
    logger.warn("could not find a matching image for server %s in location %s",from,location);
  }
  NodeState state=runningStateToNodeState.get(from.getState());
  return new NodeMetadataImpl(from.getId() + "",from.getName(),from.getId() + "",location,null,ImmutableMap.<String,String>of(),tag,from.getImageId(),image != null ? image.getOperatingSystem() : null,state,getPublicAddresses.apply(from),ImmutableList.<String>of(),ImmutableMap.<String,String>of(),creds);
}
