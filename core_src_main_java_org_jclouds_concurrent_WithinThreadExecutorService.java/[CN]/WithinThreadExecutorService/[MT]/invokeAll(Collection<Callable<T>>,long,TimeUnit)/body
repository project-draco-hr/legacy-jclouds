{
  checkState(!shutdown,"shutdown!");
  List<Future<T>> results=new ArrayList<Future<T>>(tasks.size());
  long timeUp=System.nanoTime() + unit.toNanos(timeout);
  for (  Callable<T> task : tasks) {
    checkNotNull(task,"task");
    RunnableFutureTask<T> future=new RunnableFutureTask<T>(task);
    if (System.nanoTime() > timeUp)     future.cancel(false);
 else     future.run();
    results.add(future);
  }
  return results;
}
