{
  IterableWithMarker<LoadBalancer> response=api().list(new ListLoadBalancersOptions());
  for (  LoadBalancer loadBalancer : response) {
    checkLoadBalancer(loadBalancer);
    for (    ListenerWithPolicies listener : loadBalancer.getListeners()) {
      checkListener(listener);
    }
  }
  if (Iterables.size(response) > 0) {
    LoadBalancer loadBalancer=response.iterator().next();
    Assert.assertEquals(api().get(loadBalancer.getName()),loadBalancer);
  }
  response=api().list(ListLoadBalancersOptions.Builder.afterMarker(response.nextMarker().orNull()));
  for (  LoadBalancer loadBalancer : response) {
    checkLoadBalancer(loadBalancer);
  }
}
