{
  String encodedJson=CryptoStreams.base64(checkNotNull(input,"json").toString().getBytes(Charsets.UTF_8));
  Builder<String,String> builder=ImmutableMultimap.builder();
  builder.put("Storage.S3.UploadPolicy",encodedJson);
  String signature=signer.sign(encodedJson);
  builder.put("Storage.S3.UploadPolicySignature",signature);
  return (R)request.toBuilder().replaceFormParams(builder.build()).build();
}
