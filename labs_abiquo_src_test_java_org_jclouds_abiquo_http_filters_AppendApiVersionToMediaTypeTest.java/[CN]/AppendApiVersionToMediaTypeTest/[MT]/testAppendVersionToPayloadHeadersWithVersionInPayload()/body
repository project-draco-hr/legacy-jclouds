{
  Payload payload=Payloads.newByteArrayPayload(new byte[]{});
  payload.getContentMetadata().setContentType("application/vnd.abiquo.racks+xml;version=1.8.5");
  HttpRequest request=HttpRequest.builder().method("GET").endpoint(URI.create("http://foo")).payload(payload).build();
  AppendApiVersionToMediaType filter=new AppendApiVersionToMediaType(new AppendApiVersionToAbiquoMimeType(AbiquoAsyncApi.API_VERSION));
  HttpRequest filtered=filter.appendVersionToPayloadHeaders(request);
  assertEquals(filtered.getPayload().getContentMetadata().getContentType(),"application/vnd.abiquo.racks+xml;version=1.8.5");
}
