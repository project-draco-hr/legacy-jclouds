{
  Multimap<String,String> headers=LinkedHashMultimap.<String,String>create();
  headers.put(HttpHeaders.ACCEPT,"application/vnd.abiquo.racks+xml");
  HttpRequest request=HttpRequest.builder().method("GET").endpoint(URI.create("http://foo")).headers(headers).build();
  AppendApiVersionToMediaType filter=new AppendApiVersionToMediaType(new AppendApiVersionToAbiquoMimeType(AbiquoAsyncApi.API_VERSION));
  HttpRequest filtered=filter.appendVersionToNonPayloadHeaders(request);
  Collection<String> accept=filtered.getHeaders().get(HttpHeaders.ACCEPT);
  assertEquals(accept.size(),1);
  assertEquals(accept.iterator().next(),"application/vnd.abiquo.racks+xml;version=" + AbiquoAsyncApi.API_VERSION);
}
