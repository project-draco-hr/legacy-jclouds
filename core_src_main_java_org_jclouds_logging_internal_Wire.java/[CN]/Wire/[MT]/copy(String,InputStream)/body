{
  int limit=256 * 1024;
  FileBackedOutputStream out=null;
  try {
    out=new FileBackedOutputStream(limit);
    long bytesRead=ByteStreams.copy(instream,out);
    if (bytesRead >= limit)     logger.debug("over limit %d/%d: wrote temp file",bytesRead,limit);
    wire(header,out.getSupplier().getInput());
    return out.getSupplier().getInput();
  }
 catch (  IOException e) {
    throw new RuntimeException("Error tapping line",e);
  }
 finally {
    closeQuietly(out);
    closeQuietly(instream);
  }
}
