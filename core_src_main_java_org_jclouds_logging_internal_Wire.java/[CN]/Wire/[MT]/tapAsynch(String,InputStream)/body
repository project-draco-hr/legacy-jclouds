{
  PipedOutputStream out=new PipedOutputStream();
  InputStream toReturn=new TeeInputStream(instream,out,true);
  final InputStream line;
  try {
    line=new PipedInputStream(out);
    exec.submit(new Runnable(){
      public void run(){
        try {
          wire(header,line);
        }
  finally {
          IOUtils.closeQuietly(line);
        }
      }
    }
);
  }
 catch (  IOException e) {
    logger.error(e,"Error tapping line");
  }
  return toReturn;
}
