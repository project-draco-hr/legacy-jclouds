{
  Builder builder=VServerMetadata.builder();
  builder.id(id);
  List<ListenableFuture<?>> futures=Lists.newArrayList();
  futures.add(asyncApi.getVirtualServerApi().getDetails(id));
  futures.add(asyncApi.getVirtualServerApi().getStatus(id));
  futures.add(asyncApi.getVirtualServerApi().getInitialPassword(id));
  String fwId=toFirewallId.apply(id);
  try {
    List<Object> results=Futures.successfulAsList(futures).get();
    VServerWithDetails server=(VServerWithDetails)results.get(0);
    VServerStatus status=(VServerStatus)results.get(1);
    System.out.println("getNode(" + id + ")'s getDetails: "+ status+ " - "+ server);
    if (server == null) {
      server=api.getVirtualServerApi().getDetails(id);
      System.out.println("getNode(" + id + ")'s getDetails(2) returns: "+ server);
    }
    builder.serverWithDetails(server);
    builder.status(status == null ? VServerStatus.UNRECOGNIZED : status);
    builder.initialPassword((String)results.get(2));
  }
 catch (  InterruptedException e) {
    throw Throwables.propagate(e);
  }
catch (  ExecutionException e) {
    throw Throwables.propagate(e);
  }
  return builder.build();
}
