{
  InputStream is=getClass().getResourceAsStream("/ec2/describe_securitygroups.xml");
  SortedSet<SecurityGroup> expected=ImmutableSortedSet.of(new SecurityGroup(Region.DEFAULT,"WebServers","UYY3TLBUXIEON5NQVUUX6OMPWBZIQNFM","Web Servers",ImmutableSortedSet.of(new IpPermission(80,80,ImmutableSortedSet.<UserIdGroupPair>of(),IpProtocol.TCP,ImmutableSortedSet.of("0.0.0.0/0")))),new SecurityGroup(Region.DEFAULT,"RangedPortsBySource","UYY3TLBUXIEON5NQVUUX6OMPWBZIQNFM","Group A",ImmutableSortedSet.of(new IpPermission(6000,7000,ImmutableSortedSet.<UserIdGroupPair>of(),IpProtocol.TCP,ImmutableSortedSet.<String>of()))));
  DescribeSecurityGroupsResponseHandler handler=injector.getInstance(DescribeSecurityGroupsResponseHandler.class);
  addDefaultRegionToHandler(handler);
  Set<SecurityGroup> result=factory.create(handler).parse(is);
  assertEquals(result,expected);
}
