{
  AWSRunningInstanceToNodeMetadata parser=createNodeParser(ImmutableSet.<Hardware>of(),ImmutableSet.<Location>of(),ImmutableSet.<Image>of(),ImmutableMap.<String,Credentials>of());
  ImmutableSet<AWSRunningInstance> contents=ImmutableSet.of(new AWSRunningInstance.Builder().region(defaultRegion).instanceId("i-911444f0").imageId("ami-63be790a").instanceState(InstanceState.RUNNING).rawState("running").privateDnsName("ip-10-212-81-7.ec2.internal").dnsName("ec2-174-129-173-155.compute-1.amazonaws.com").keyName("jclouds#zkclustertest#23").amiLaunchIndex("0").instanceType("t1.micro").launchTime(dateService.iso8601DateParse("2011-08-16T13:40:50.000Z")).availabilityZone("us-east-1c").kernelId("aki-427d952b").monitoringState(MonitoringState.DISABLED).privateIpAddress("10.212.81.7").ipAddress("174.129.173.155").securityGroupIdToNames(ImmutableMap.<String,String>of("sg-ef052b86","jclouds#zkclustertest")).rootDeviceType(RootDeviceType.EBS).rootDeviceName("/dev/sda1").device("/dev/sda1",new BlockDevice("vol-5829fc32",Attachment.Status.ATTACHED,dateService.iso8601DateParse("2011-08-16T13:41:19.000Z"),true)).virtualizationType("paravirtual").tag("Name","foo").tag("Empty","").hypervisor(Hypervisor.XEN).build(),new AWSRunningInstance.Builder().region(defaultRegion).instanceId("i-931444f2").imageId("ami-63be790a").instanceState(InstanceState.RUNNING).rawState("running").privateDnsName("ip-10-212-185-8.ec2.internal").dnsName("ec2-50-19-207-248.compute-1.amazonaws.com").keyName("jclouds#zkclustertest#23").amiLaunchIndex("0").instanceType("t1.micro").launchTime(dateService.iso8601DateParse("2011-08-16T13:40:50.000Z")).availabilityZone("us-east-1c").kernelId("aki-427d952b").monitoringState(MonitoringState.DISABLED).privateIpAddress("10.212.185.8").ipAddress("50.19.207.248").securityGroupIdToNames(ImmutableMap.<String,String>of("sg-ef052b86","jclouds#zkclustertest")).rootDeviceType(RootDeviceType.EBS).rootDeviceName("/dev/sda1").device("/dev/sda1",new BlockDevice("vol-5029fc3a",Attachment.Status.ATTACHED,dateService.iso8601DateParse("2011-08-16T13:41:19.000Z"),true)).virtualizationType("paravirtual").hypervisor(Hypervisor.XEN).build());
  assertEquals(parser.apply(Iterables.get(contents,0)).toString(),new NodeMetadataBuilder().status(Status.RUNNING).backendStatus("running").group("zkclustertest").name("foo").hostname("ip-10-212-81-7").privateAddresses(ImmutableSet.of("10.212.81.7")).publicAddresses(ImmutableSet.of("174.129.173.155")).imageId("us-east-1/ami-63be790a").id("us-east-1/i-911444f0").providerId("i-911444f0").tags(ImmutableSet.of("Empty")).userMetadata(ImmutableMap.of("Name","foo")).build().toString());
  assertEquals(parser.apply(Iterables.get(contents,1)).toString(),new NodeMetadataBuilder().status(Status.RUNNING).backendStatus("running").group("zkclustertest").hostname("ip-10-212-185-8").privateAddresses(ImmutableSet.of("10.212.185.8")).publicAddresses(ImmutableSet.of("50.19.207.248")).imageId("us-east-1/ami-63be790a").id("us-east-1/i-931444f2").providerId("i-931444f2").build().toString());
}
