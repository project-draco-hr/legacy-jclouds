{
  String key="hello";
  Blob blob=context.getBlobStore().newBlob(key);
  blob.setPayload(TEST_STRING);
  blob.getMetadata().setContentType(MediaType.TEXT_PLAIN);
  blob.getMetadata().setSize(new Long(TEST_STRING.length()));
  blob.getMetadata().getUserMetadata().put("Adrian","powderpuff");
  blob.getMetadata().setContentMD5(encryptionService.md5(Utils.toInputStream(TEST_STRING)));
  String containerName=getContainerName();
  try {
    assertNull(context.getBlobStore().blobMetadata(containerName,"powderpuff"));
    addBlobToContainer(containerName,blob);
    Blob newObject=validateContent(containerName,key);
    BlobMetadata metadata=newObject.getMetadata();
    validateMetadata(metadata);
    validateMetadata(context.getBlobStore().blobMetadata(containerName,key));
    blob.getMetadata().getUserMetadata().put("Adrian","wonderpuff");
    blob.getMetadata().getUserMetadata().put("Adrian","powderpuff");
    addBlobToContainer(containerName,blob);
    validateMetadata(context.getBlobStore().blobMetadata(containerName,key));
  }
  finally {
    returnContainer(containerName);
  }
}
