{
  String containerName=getContainerName();
  try {
    String key="apples";
    Date before=new Date(System.currentTimeMillis() - 1000);
    addObjectAndValidateContent(containerName,key);
    addObjectAndValidateContent(containerName,key);
    Date after=new Date(System.currentTimeMillis() + 1000);
    context.getBlobStore().getBlob(containerName,key,ifModifiedSince(before));
    validateContent(containerName,key);
    try {
      context.getBlobStore().getBlob(containerName,key,ifModifiedSince(after));
      validateContent(containerName,key);
    }
 catch (    HttpResponseException ex) {
      assertEquals(ex.getResponse().getStatusCode(),304);
    }
  }
  finally {
    returnContainer(containerName);
  }
}
