{
  Blob object=context.getBlobStore().newBlob(key);
  object.getMetadata().setContentType(type);
  object.setPayload(Payloads.newPayload(content));
  if (content instanceof InputStream) {
    object.generateMD5();
  }
  String containerName=getContainerName();
  try {
    assertNotNull(context.getBlobStore().putBlob(containerName,object));
    object=context.getBlobStore().getBlob(containerName,object.getMetadata().getName());
    String returnedString=BlobStoreUtils.getContentAsStringOrNullAndClose(object);
    assertEquals(returnedString,realObject);
    assertEquals(context.getBlobStore().list(containerName).size(),1);
  }
  finally {
    returnContainer(containerName);
  }
}
