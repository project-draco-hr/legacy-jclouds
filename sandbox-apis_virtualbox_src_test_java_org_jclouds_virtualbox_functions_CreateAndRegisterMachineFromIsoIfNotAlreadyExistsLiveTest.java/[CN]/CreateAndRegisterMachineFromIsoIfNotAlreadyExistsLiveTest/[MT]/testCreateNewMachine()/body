{
  String vmName="jclouds-test-create-1-node";
  VmSpec vmSpec=VmSpec.builder().id(vmName).name(vmName).memoryMB(512).controller(ideController).cleanUpMode(mode).osTypeId("Debian").forceOverwrite(true).build();
  IMachineSpec machineSpec=IMachineSpec.builder().iso(IsoSpec.builder().sourcePath(operatingSystemIso).installationScript("").preConfiguration(preconfigurationUri).build()).vm(vmSpec).network(NetworkSpec.builder().build()).build();
  undoVm(vmSpec);
  try {
    IMachine debianNode=context.utils().injector().getInstance(CreateAndRegisterMachineFromIsoIfNotAlreadyExists.class).apply(machineSpec);
    IMachine machine=manager.get().getVBox().findMachine(vmName);
    assertEquals(debianNode.getName(),machine.getName());
  }
  finally {
    undoVm(vmSpec);
  }
}
