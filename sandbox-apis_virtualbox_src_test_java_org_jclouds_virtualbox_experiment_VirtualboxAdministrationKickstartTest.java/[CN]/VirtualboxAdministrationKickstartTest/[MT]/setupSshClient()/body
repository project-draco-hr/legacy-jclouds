{
  int port=Integer.parseInt(sshPort);
  Injector i=Guice.createInjector(new SshjSshClientModule());
  SshClient.Factory factory=i.getInstance(SshClient.Factory.class);
  SshClient connection;
  if (sshKeyFile != null && !sshKeyFile.trim().equals("")) {
    connection=factory.create(new IPSocket(sshHost,port),new Credentials(sshUser,Strings2.toStringAndClose(new FileInputStream(sshKeyFile))));
  }
 else {
    connection=factory.create(new IPSocket(sshHost,port),new Credentials(sshUser,sshPass));
  }
  connection.connect();
  return connection;
}
