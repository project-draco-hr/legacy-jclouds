{
  IMedium hd=null;
  if (!new File(clonedDisk).exists()) {
    hd=manager.getVBox().createHardDisk(diskFormat,clonedDisk);
    long size=2 * 1024 * 1024* 1024 - 1;
    hd.createBaseStorage(new Long(size),new Long(MediumVariant.VMDK_SPLIT_2_G.ordinal()));
  }
 else   hd=manager.getVBox().openMedium(clonedDisk,DeviceType.HardDisk,AccessMode.ReadWrite,forceOverwrite);
  ISession session=manager.getSessionObject();
  IMachine machine=manager.getVBox().findMachine(vmName);
  machine.lockMachine(session,LockType.Write);
  IMachine mutable=session.getMachine();
  mutable.attachDevice(controllerSATA,0,0,DeviceType.HardDisk,hd);
  mutable.saveSettings();
  session.unlockMachine();
  assertEquals(hd.getId().equals(""),false);
}
