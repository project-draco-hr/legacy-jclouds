{
  NewServerResponse serverResponse=client.createServer(name,checkNotNull(template.getImage().getProviderId(),"imageId"),checkNotNull(template.getSize().getProviderId(),"sizeId"));
  serverRunning.apply(serverResponse.getServer());
  Server server=client.getServer(serverResponse.getServer().getId());
  NodeMetadata node=new NodeMetadataImpl(server.getId().toString(),name,server.getId().toString(),template.getLocation(),null,ImmutableMap.<String,String>of(),tag,template.getImage(),runningStateToNodeState.get(server.getState()),getPublicAddresses.apply(server),ImmutableList.<String>of(),ImmutableMap.<String,String>of(),new Credentials("root",serverResponse.getNewInstanceRequest().getCreateOptions().getPassword()));
  return node;
}
