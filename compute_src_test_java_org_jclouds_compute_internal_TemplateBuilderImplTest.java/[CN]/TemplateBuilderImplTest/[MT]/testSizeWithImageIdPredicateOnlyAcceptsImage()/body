{
  Location defaultLocation=createMock(Location.class);
  Image image=createMock(Image.class);
  Size size=new SizeImpl("sizeId",null,"sizeId",defaultLocation,null,ImmutableMap.<String,String>of(),0,0,0,ImagePredicates.idEquals("imageId"));
  Provider<Set<? extends Location>> locations=Providers.<Set<? extends Location>>of(ImmutableSet.<Location>of(defaultLocation));
  Provider<Set<? extends Image>> images=Providers.<Set<? extends Image>>of(ImmutableSet.<Image>of(image));
  Provider<Set<? extends Size>> sizes=Providers.<Set<? extends Size>>of(ImmutableSet.<Size>of(size));
  Provider<TemplateOptions> optionsProvider=createMock(Provider.class);
  Provider<TemplateBuilder> templateBuilderProvider=createMock(Provider.class);
  TemplateBuilder defaultTemplate=createMock(TemplateBuilder.class);
  expect(defaultLocation.getId()).andReturn("locationId").atLeastOnce();
  expect(optionsProvider.get()).andReturn(new TemplateOptions());
  expect(image.getId()).andReturn("imageId").atLeastOnce();
  expect(image.getLocation()).andReturn(defaultLocation).atLeastOnce();
  expect(image.getOsFamily()).andReturn(null);
  expect(image.getName()).andReturn(null);
  expect(image.getDescription()).andReturn(null);
  expect(image.getOsDescription()).andReturn(null);
  expect(image.getVersion()).andReturn(null);
  expect(image.getArchitecture()).andReturn(null).atLeastOnce();
  replay(image);
  replay(defaultTemplate);
  replay(defaultLocation);
  replay(optionsProvider);
  replay(templateBuilderProvider);
  TemplateBuilderImpl template=createTemplateBuilder(locations,images,sizes,defaultLocation,optionsProvider,templateBuilderProvider);
  template.imageId("imageId").build();
  verify(image);
  verify(defaultTemplate);
  verify(defaultLocation);
  verify(optionsProvider);
  verify(templateBuilderProvider);
}
