{
  checkNotNull(loadBalancerName,"loadBalancerName");
  checkNotNull(protocol,"protocol");
  checkArgument(protocol.toUpperCase().equals("HTTP") || protocol.toUpperCase().equals("TCP"),"Acceptable values for protocol are HTTP or TCP");
  Set<String> ids=Sets.newHashSet();
  Location location=null;
  for (  NodeMetadata node : Iterables.filter(context.getComputeService().listNodesDetailsMatching(NodePredicates.all()),filter)) {
    ids.add(node.getProviderId());
    location=node.getLocation();
  }
  Set<String> dnsNames=Sets.newHashSet();
  logger.debug(">> creating load balancer (%s)",loadBalancerName);
  String dnsName=loadBalancerStrategy.execute(location,loadBalancerName,protocol,loadBalancerPort,instancePort,ids);
  dnsNames.add(dnsName);
  logger.debug("<< created load balancer (%s) DNS (%s)",loadBalancerName,dnsName);
  return dnsNames;
}
