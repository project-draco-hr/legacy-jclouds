{
  final IMachine clone=cloneFromMaster();
  ISession session=machineUtils.sharedLockMachineAndApplyToSession(clone.getName(),new Function<ISession,ISession>(){
    @Override public ISession apply(    ISession session){
      assertEquals(session.getMachine().getName(),clone.getName());
      return session;
    }
  }
);
  checkState(session.getState().equals(SessionState.Unlocked));
  undoVm(clone.getName());
}
