{
  final String error="VirtualBox error: Invalid RAM size: " + "3567587327 MB (must be in range [4, 2097152] MB) (0x80070057)";
  long memorySize=1024l;
  IMachine machine=createMock(IMachine.class);
  VBoxException invalidRamSizeException=new VBoxException(createNiceMock(Throwable.class),error);
  machine.setMemorySize(memorySize);
  expectLastCall().andThrow(invalidRamSizeException);
  machine.saveSettings();
  replay(machine);
  new ApplyMemoryToMachine(memorySize).apply(machine);
}
