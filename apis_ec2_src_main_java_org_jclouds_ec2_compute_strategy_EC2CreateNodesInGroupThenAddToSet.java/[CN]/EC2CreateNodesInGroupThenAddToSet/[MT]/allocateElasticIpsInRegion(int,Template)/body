{
  Builder<String> ips=ImmutableSet.builder();
  if (!autoAllocateElasticIps)   return ips.build();
  String region=AWSUtils.getRegionFromLocationOrNull(template.getLocation());
  logger.debug("<< allocating %d elastic IPs for nodes in region (%s)",count,region);
  for (int i=0; i < count; ++i) {
    ips.add(client.getElasticIPAddressServices().allocateAddressInRegion(region));
  }
  return ips.build();
}
