{
  Location provider=new LocationImpl(LocationScope.PROVIDER,providerName,providerName,null);
  if (zoneToRegion.size() == 0)   return ImmutableSet.of(provider);
  Set<Location> providers=newLinkedHashSet();
  for (  String region : newLinkedHashSet(zoneToRegion.values())) {
    providers.add(new LocationImpl(LocationScope.REGION,region,region,provider));
  }
  ImmutableMap<String,Location> idToLocation=uniqueIndex(providers,new Function<Location,String>(){
    @Override public String apply(    Location from){
      return from.getId();
    }
  }
);
  for (  String zone : zoneToRegion.keySet()) {
    providers.add(new LocationImpl(LocationScope.ZONE,zone,zone,idToLocation.get(zoneToRegion.get(zone))));
  }
  return providers;
}
