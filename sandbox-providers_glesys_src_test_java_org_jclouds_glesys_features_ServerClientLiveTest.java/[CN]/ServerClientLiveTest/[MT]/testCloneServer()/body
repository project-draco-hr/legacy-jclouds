{
  testServer2=client.cloneServer(testServer.getId(),"jclouds-test2",ServerCloneOptions.Builder.cpucores(1));
  assertNotNull(testServer2.getId());
  assertEquals(testServer2.getHostname(),"jclouds-test2");
  assertTrue(testServer2.getIps().isEmpty());
  RetryablePredicate<ServerState> cloneChecker=new ServerStatusChecker(testServer2.getId(),300,10,TimeUnit.SECONDS);
  assertTrue(cloneChecker.apply(ServerState.STOPPED));
  client.startServer(testServer2.getId());
  cloneChecker=new RetryablePredicate<ServerState>(new Predicate<ServerState>(){
    public boolean apply(    ServerState value){
      ServerStatus status=client.getServerStatus(testServer2.getId(),ServerStatusOptions.Builder.state());
      if (status.getState() == value) {
        return true;
      }
      client.startServer(testServer2.getId());
      return false;
    }
  }
,300,10,TimeUnit.SECONDS);
  assertTrue(cloneChecker.apply(ServerState.RUNNING));
}
