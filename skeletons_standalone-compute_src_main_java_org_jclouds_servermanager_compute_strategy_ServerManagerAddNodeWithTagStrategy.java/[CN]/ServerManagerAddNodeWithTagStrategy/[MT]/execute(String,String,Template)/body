{
  checkState(tag != null,"tag (that which groups identical nodes together) must be specified");
  checkState(name != null && name.indexOf(tag) != -1,"name should have %s encoded into it",tag);
  logger.debug(">> instantiating new server dc(%s) name(%s) image(%s) hardware(%s)",template.getLocation().getId(),name,template.getImage().getProviderId(),template.getHardware().getProviderId());
  Server from=client.createServerInDC(template.getLocation().getId(),name,Integer.parseInt(template.getImage().getProviderId()),Integer.parseInt(template.getHardware().getProviderId()));
  credentialStore.put(from.id + "",new Credentials(from.loginUser,from.password));
  logger.debug("<< instantiated server(%s)",from.id);
  return serverToNodeMetadata.apply(from);
}
