{
  disconnect();
  JSch jsch=new JSch();
  session=null;
  try {
    session=jsch.getSession(username,host.getHostAddress(),port);
    session.setTimeout(120 * 1000);
    logger.debug("%s@%s:%d: Session created.",username,host.getHostAddress(),port);
    if (password != null) {
      session.setPassword(password);
    }
 else {
      jsch.addIdentity(username,privateKey,null,emptyPassPhrase);
    }
  }
 catch (  JSchException e) {
    throw new SshException(String.format("%s@%s:%d: Error creating session.",username,host.getHostAddress(),port),e);
  }
  java.util.Properties config=new java.util.Properties();
  config.put("StrictHostKeyChecking","no");
  session.setConfig(config);
  try {
    session.connect();
  }
 catch (  JSchException e) {
    throw new SshException(String.format("%s@%s:%d: Error connecting to session.",username,host.getHostAddress(),port),e);
  }
  logger.debug("%s@%s:%d: Session connected.",username,host.getHostAddress(),port);
}
