{
  if (input.identity.indexOf(':') == -1) {
    throw new AuthorizationException(String.format("Identity %s does not match format tenantName:accessKey",input.identity),null);
  }
  String tenantId=input.identity.substring(0,input.identity.indexOf(':'));
  String usernameOrAccessKey=input.identity.substring(input.identity.indexOf(':') + 1);
  String passwordOrSecretKey=input.credential;
  ApiAccessKeyCredentials apiAccessKeyCredentials=ApiAccessKeyCredentials.createWithAccessKeyAndSecretKey(usernameOrAccessKey,passwordOrSecretKey);
  Access access;
  if (tenantId.matches("^[0-9]+$")) {
    access=client.authenticateWithTenantIdAndCredentials(tenantId,apiAccessKeyCredentials);
  }
 else {
    access=client.authenticateWithTenantNameAndCredentials(tenantId,apiAccessKeyCredentials);
  }
  return access;
}
