{
  PemReader reader=new PemReader(new StringReader(new String(out.toByteArray(),US_ASCII)));
  try {
    PemObject pem=reader.readPemObject();
    byte[] bytes=pem.getContent();
    String beginMarker="-----BEGIN " + pem.getType() + "-----";
    checkState(parsers.containsKey(beginMarker),"Invalid PEM file: no parsers for marker %s in %s",beginMarker,parsers.keySet());
    return parsers.get(beginMarker).parseResult(bytes);
  }
 catch (  IOException e) {
    throw propagate(e);
  }
 finally {
    closeQuietly(reader);
  }
}
