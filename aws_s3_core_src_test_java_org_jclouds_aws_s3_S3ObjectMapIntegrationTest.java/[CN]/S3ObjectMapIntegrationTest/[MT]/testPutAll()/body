{
  String bucketName=getBucketName();
  try {
    BaseS3Map<S3Object> map=createMap(context,bucketName);
    Map<String,S3Object> newMap=new HashMap<String,S3Object>();
    for (    String key : fiveInputs.keySet()) {
      S3Object object=new S3Object(key);
      object.setData(fiveInputs.get(key));
      object.getMetadata().setSize(fiveBytes.get(key).length);
      newMap.put(key,object);
    }
    map.putAll(newMap);
    assertEventuallyMapSize(map,5);
    assertEventuallyKeySetEquals(map,new TreeSet<String>(fiveInputs.keySet()));
    fourLeftRemovingOne(map);
  }
  finally {
    returnBucket(bucketName);
  }
}
