{
  O command=getCommandFromConnection(connection);
  if (command != null) {
    if (isReplayable(command)) {
      logger.info("resubmitting command: %1$s",command);
      resubmitQueue.add(command);
    }
 else {
      command.setException(e);
    }
  }
}
