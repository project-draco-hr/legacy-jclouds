{
  checkNodeHasIps(node);
  HostAndPort socket=null;
  try {
    socket=find(transform(concat(node.getPublicAddresses(),node.getPrivateAddresses()),new Function<String,HostAndPort>(){
      @Override public HostAndPort apply(      String from){
        return HostAndPort.fromParts(from,port);
      }
    }
),socketTester);
  }
 catch (  NoSuchElementException e) {
    throw new NoSuchElementException(String.format("could not connect to any ip address port %d on node %s",port,node));
  }
  return socket;
}
