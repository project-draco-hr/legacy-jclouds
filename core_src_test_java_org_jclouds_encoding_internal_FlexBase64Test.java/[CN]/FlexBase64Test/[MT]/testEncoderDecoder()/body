{
  byte[] nums=new byte[32768];
  for (int i=0; i < 32768; i++) {
    nums[i]=(byte)(i % 255);
  }
  byte[] output=new byte[65535];
  FlexBase64.Encoder encoder=FlexBase64.createEncoder(true);
  int last=encoder.encode(nums,0,nums.length,output,0,output.length);
  last=encoder.complete(output,last);
  byte[] decode=new byte[nums.length];
  FlexBase64.Decoder decoder=FlexBase64.createDecoder();
  last=decoder.decode(output,0,last,decode,0,decode.length);
  Assert.assertEquals(nums.length,last);
  for (int i=0; i < last; i++) {
    Assert.assertEquals(nums[i],decode[i]);
  }
}
