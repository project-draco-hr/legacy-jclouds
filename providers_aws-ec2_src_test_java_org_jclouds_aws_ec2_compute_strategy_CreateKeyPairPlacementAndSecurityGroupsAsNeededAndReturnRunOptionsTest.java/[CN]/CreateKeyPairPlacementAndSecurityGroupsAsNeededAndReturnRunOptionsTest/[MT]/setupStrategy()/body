{
  Map<RegionAndName,KeyPair> knownKeys=createMock(Map.class);
  Cache<RegionAndName,KeyPair> credentialsMap=createMock(Cache.class);
  Cache<RegionAndName,String> securityGroupMap=createMock(Cache.class);
  Cache<RegionAndName,String> placementGroupMap=createMock(Cache.class);
  Function<RegionNameAndPublicKeyMaterial,KeyPair> importExistingKeyPair=createMock(Function.class);
  CreatePlacementGroupIfNeeded createPlacementGroupIfNeeded=createMock(CreatePlacementGroupIfNeeded.class);
  return new CreateKeyPairPlacementAndSecurityGroupsAsNeededAndReturnRunOptions(knownKeys,credentialsMap,securityGroupMap,OPTIONS_PROVIDER,placementGroupMap,createPlacementGroupIfNeeded,importExistingKeyPair);
}
