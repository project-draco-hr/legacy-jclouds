{
  expect(socketTester.apply(HostAndPort.fromParts("1.2.3.4",22))).andReturn(false).once();
  expect(socketTester.apply(HostAndPort.fromParts("1.2.3.5",22))).andReturn(true).once();
  replay(socketTester);
  OpenSocketFinder finder=new ConcurrentOpenSocketFinder(socketTester,alwaysTrue,threadPool);
  HostAndPort result=finder.findOpenSocketOnNode(node,22,2000,MILLISECONDS);
  assertEquals(result,HostAndPort.fromParts("1.2.3.5",22));
  verify(socketTester);
}
