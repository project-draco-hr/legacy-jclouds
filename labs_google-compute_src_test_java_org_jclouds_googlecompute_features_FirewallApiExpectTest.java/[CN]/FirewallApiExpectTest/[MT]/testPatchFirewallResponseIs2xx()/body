{
  HttpRequest update=HttpRequest.builder().method("PATCH").endpoint("https://www.googleapis.com/compute/v1beta13/projects/myproject/firewalls/myfw").addHeader("Accept","application/json").addHeader("Authorization","Bearer " + TOKEN).payload(payloadFromResourceWithContentType("/firewall_insert.json",MediaType.APPLICATION_JSON)).build();
  HttpResponse updateFirewallResponse=HttpResponse.builder().statusCode(200).payload(payloadFromResource("/operation.json")).build();
  FirewallApi api=requestsSendResponses(requestForScopes(COMPUTE_SCOPE),TOKEN_RESPONSE,update,updateFirewallResponse).getFirewallApiForProject("myproject");
  assertEquals(api.patch("myfw",Firewall.builder().name("myfw").network(URI.create("https://www.googleapis.com/compute/v1beta13/projects/myproject/networks/default")).addAllowed(Firewall.Rule.builder().IPProtocol(IPProtocol.TCP).addPort(22).addPortRange(23,24).build()).addSourceTag("tag1").addSourceRange("10.0.1.0/32").addTargetTag("tag2").build()),new ParseOperationTest().expected());
}
