{
  InstantiateVAppTemplateOptions options=new InstantiateVAppTemplateOptions();
  options.processorCount(1).memory(512).disk(1024);
  String expected=Utils.toStringAndClose(getClass().getResourceAsStream("/newvapp-cpumemdisk.xml"));
  GeneratedHttpRequest<?> request=createMock(GeneratedHttpRequest.class);
  expect(request.getEndpoint()).andReturn(URI.create("http://localhost/key")).anyTimes();
  expect(request.getArgs()).andReturn(new Object[]{options}).atLeastOnce();
  request.setPayload(expected);
  replay(request);
  BindInstantiateVCloudExpressVAppTemplateParamsToXmlPayload binder=injector.getInstance(BindInstantiateVCloudExpressVAppTemplateParamsToXmlPayload.class);
  Map<String,String> map=Maps.newHashMap();
  map.put("name","my-vapp");
  map.put("template","https://vcenterprise.bluelock.com/api/v1.0/vAppTemplate/3");
  map.put("network","https://vcenterprise.bluelock.com/api/v1.0/network/1990");
  binder.bindToRequest(request,map);
  verify(request);
}
