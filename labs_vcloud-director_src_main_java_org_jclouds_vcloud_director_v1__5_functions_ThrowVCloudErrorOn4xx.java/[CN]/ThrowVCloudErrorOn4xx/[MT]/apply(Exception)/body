{
  Iterable<HttpResponseException> throwables=Iterables.filter(Throwables.getCausalChain(from),HttpResponseException.class);
  HttpResponseException exception=Iterables.getFirst(throwables,null);
  if (exception != null && exception.getResponse() != null && exception.getResponse().getStatusCode() >= 400 && exception.getResponse().getStatusCode() < 500) {
    try {
      Error error=JAXB.unmarshal(InputSuppliers.of(exception.getContent()).getInput(),Error.class);
      if (exception.getResponse().getStatusCode() == 403 && error.getMinorErrorCode().equals("ACCESS_TO_RESOURCE_IS_FORBIDDEN")) {
        throw new ResourceNotFoundException(error.getMessage());
      }
      throw new VCloudDirectorException(error);
    }
 catch (    IOException e) {
      Throwables.propagate(e);
    }
  }
  throw Throwables.propagate(from);
}
