{
  checkArgument(checkNotNull(input,"input") instanceof Map,"This binder is only valid for Map<String, String>");
  checkNotNull(request,"request");
  Map<String,String> metadata=(Map<String,String>)input;
  List<Map<String,String>> clbMetadata=Lists.newArrayList();
  for (  String key : metadata.keySet()) {
    clbMetadata.add(ImmutableMap.<String,String>of("key",key,"value",metadata.get(key)));
  }
  String json=jsonBinder.toJson(ImmutableMap.of("metadata",clbMetadata));
  request.setPayload(json);
  request.getPayload().getContentMetadata().setContentType("application/json");
  return request;
}
