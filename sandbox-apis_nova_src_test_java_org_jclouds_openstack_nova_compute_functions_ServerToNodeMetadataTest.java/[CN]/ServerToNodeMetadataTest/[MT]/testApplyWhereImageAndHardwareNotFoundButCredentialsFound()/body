{
  Credentials creds=new Credentials("root","abdce");
  Map<ServerStatus,NodeState> serverStateToNodeState=NovaComputeServiceDependenciesModule.serverToNodeState;
  Set<org.jclouds.compute.domain.Image> images=ImmutableSet.of();
  Set<org.jclouds.compute.domain.Hardware> hardwares=ImmutableSet.of();
  Server server=ParseServerFromJsonResponseTest.parseServer();
  ServerToNodeMetadata parser=new ServerToNodeMetadata(serverStateToNodeState,ImmutableMap.<String,Credentials>of("node#1234",creds),Suppliers.<Set<? extends Image>>ofInstance(images),Suppliers.ofInstance(provider),Suppliers.<Set<? extends Hardware>>ofInstance(hardwares));
  NodeMetadata metadata=parser.apply(server);
  NodeMetadata constructedMetadata=newNodeMetadataBuilder().credentials(creds).build();
  assertEquals(metadata,constructedMetadata);
}
