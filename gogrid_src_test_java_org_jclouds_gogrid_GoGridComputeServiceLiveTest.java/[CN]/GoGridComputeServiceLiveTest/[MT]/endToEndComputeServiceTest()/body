{
  ComputeService service=context.getComputeService();
  Template t=service.templateBuilder().minRam(1024).imageId("GSI-6890f8b6-c8fb-4ac1-bc33-2563eb4e29d2").build();
  assertEquals(t.getImage().getId(),"GSI-6890f8b6-c8fb-4ac1-bc33-2563eb4e29d2");
  service.runNodesWithTag("testTag",1,t);
  Map<String,? extends ComputeMetadata> nodes=service.getNodes();
  assertEquals(nodes.size(),1);
  NodeMetadata nodeMetadata=service.getNodeMetadata(Iterables.getOnlyElement(nodes.values()));
  assertEquals(nodeMetadata.getPublicAddresses().size(),1,"There must be 1 public address for the node");
  assertTrue(nodeMetadata.getName().startsWith("testTag"));
  service.rebootNode(nodeMetadata);
  assertEquals(service.getNodeMetadata(nodeMetadata).getState(),NodeState.RUNNING);
  service.destroyNode(nodeMetadata);
}
