{
  for (  IStorageController iStorageController : machine.getStorageControllers()) {
    for (    IMediumAttachment iMediumAttachment : machine.getMediumAttachmentsOfController(iStorageController.getName())) {
      IMedium iMedium=iMediumAttachment.getMedium();
      if (iMedium.getDeviceType().equals(DeviceType.HardDisk)) {
        if (iMedium.getParent() != null) {
          for (          IMedium child : iMedium.getParent().getChildren()) {
            for (            String machineId : child.getMachineIds()) {
              IMachine iMachine=manager.get().getVBox().findMachine(machineId);
              if (!iMachine.getName().equals(machine.getName())) {
                logger.debug("Machine %s is a linked clone",machine.getName());
                return true;
              }
            }
          }
        }
      }
    }
  }
  return false;
}
