{
  Type type=typeToken.getType();
  if (typeToken.getRawType() != Map.class || !(type instanceof ParameterizedType)) {
    return null;
  }
  Type keyType=((ParameterizedType)type).getActualTypeArguments()[0];
  Type valueType=((ParameterizedType)type).getActualTypeArguments()[1];
  TypeAdapter<?> keyAdapter=gson.getAdapter(TypeToken.get(keyType));
  TypeAdapter<?> valueAdapter=gson.getAdapter(TypeToken.get(valueType));
  return (TypeAdapter<T>)newMapAdapter(keyAdapter,valueAdapter);
}
