{
  String region=getRegionFromLocation.apply(location);
  String dnsName=new String();
  String availabilityZone=new String();
  for (  String az : AvailabilityZone.zones) {
    if (az.startsWith(region))     availabilityZone=az;
  }
  dnsName=elbClient.createLoadBalancerInRegion(region,name,protocol,loadBalancerPort,instancePort,availabilityZone);
  List<String> instanceIdlist=new ArrayList<String>(instanceIds);
  String[] instanceIdArray=new String[instanceIdlist.size()];
  for (int i=0; i < instanceIdlist.size(); i++) {
    instanceIdArray[i]=instanceIdlist.get(i);
  }
  Set<String> registeredInstanceIds=elbClient.registerInstancesWithLoadBalancerInRegion(region,name,instanceIdArray);
  boolean changed=registeredInstanceIds.removeAll(instanceIds);
  if (changed) {
    List<String> list=new ArrayList<String>(registeredInstanceIds);
    instanceIdArray=new String[list.size()];
    for (int i=0; i < list.size(); i++) {
      instanceIdArray[i]=list.get(i);
    }
    if (instanceIdArray.length > 0)     elbClient.deregisterInstancesWithLoadBalancerInRegion(region,name,instanceIdArray);
  }
  return dnsName;
}
