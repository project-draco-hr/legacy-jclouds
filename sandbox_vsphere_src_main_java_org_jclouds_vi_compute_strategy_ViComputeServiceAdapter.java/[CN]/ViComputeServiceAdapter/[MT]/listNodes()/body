{
  try {
    ManagedEntity[] vmEntities=new InventoryNavigator(client.getRootFolder()).searchManagedEntities("VirtualMachine");
    List<VirtualMachine> vms=Lists.newArrayList();
    for (    ManagedEntity entity : vmEntities) {
      VirtualMachine vm=(VirtualMachine)entity;
      vms.add(vm);
    }
    return vms;
  }
 catch (  InvalidProperty e) {
    return propogate(e);
  }
catch (  RuntimeFault e) {
    return propogate(e);
  }
catch (  RemoteException e) {
    return propogate(e);
  }
}
