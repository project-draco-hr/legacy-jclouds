{
  AWSS3BlobStore ablobStore=createMock(AWSS3BlobStore.class);
  PayloadSlicer slicer=createMock(PayloadSlicer.class);
  replay(ablobStore);
  replay(slicer);
  SequentialMultipartUploadStrategy strategy=new SequentialMultipartUploadStrategy(ablobStore,slicer);
  long length=SequentialMultipartUploadStrategy.DEFAULT_PART_SIZE * SequentialMultipartUploadStrategy.DEFAULT_MAGNITUDE_BASE;
  long chunkSize=strategy.calculateChunkSize(length);
  assertEquals(chunkSize,SequentialMultipartUploadStrategy.DEFAULT_PART_SIZE);
  assertEquals(strategy.getParts(),SequentialMultipartUploadStrategy.DEFAULT_MAGNITUDE_BASE - 1);
  assertEquals(strategy.getRemaining(),SequentialMultipartUploadStrategy.DEFAULT_PART_SIZE);
  assertEquals(chunkSize * strategy.getParts() + strategy.getRemaining(),length);
  length+=1;
  chunkSize=strategy.calculateChunkSize(length);
  assertEquals(chunkSize,SequentialMultipartUploadStrategy.DEFAULT_PART_SIZE * 2);
  assertEquals(strategy.getParts(),SequentialMultipartUploadStrategy.DEFAULT_MAGNITUDE_BASE / 2);
  assertEquals(strategy.getRemaining(),1);
  assertEquals(chunkSize * strategy.getParts() + strategy.getRemaining(),length);
  verify(ablobStore);
  verify(slicer);
}
