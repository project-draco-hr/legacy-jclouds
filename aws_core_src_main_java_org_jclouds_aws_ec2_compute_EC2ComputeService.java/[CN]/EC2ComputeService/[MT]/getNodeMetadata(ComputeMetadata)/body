{
  checkArgument(node.getType() == ComputeType.NODE,"this is only valid for nodes, not " + node.getType());
  checkNotNull(node.getId(),"node.id");
  Region region=getRegionFromNodeOrDefault(node);
  RunningInstance runningInstance=Iterables.getOnlyElement(getAllRunningInstancesInRegion(region,node.getId()));
  return runningInstanceToNodeMetadata.apply(runningInstance);
}
