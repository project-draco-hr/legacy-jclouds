{
  Set<? extends NodeMetadata> deadOnes=super.destroyNodesMatching(filter);
  Map<String,String> regionTags=Maps.newHashMap();
  for (  NodeMetadata nodeMetadata : deadOnes) {
    if (nodeMetadata.getTag() != null)     regionTags.put(getRegionFromLocation.apply(nodeMetadata.getLocation()),nodeMetadata.getTag());
  }
  for (  Entry<String,String> regionTag : regionTags.entrySet()) {
    deleteKeyPair(regionTag.getKey(),regionTag.getValue());
    deleteSecurityGroup(regionTag.getKey(),regionTag.getValue());
  }
  return deadOnes;
}
