{
  VirtualMachineTemplatePersistentDto persistentData=new VirtualMachineTemplatePersistentDto();
  persistentData.setPersistentTemplateName(persistentTemplateName);
  persistentData.setPersistentVolumeName(persistentVolumeName);
  RESTLink vdcLink=new RESTLink(ParentLinkName.VIRTUAL_DATACENTER,vdc.unwrap().getEditLink().getHref());
  RESTLink templateLink=new RESTLink(ParentLinkName.VIRTUAL_MACHINE_TEMPLATE,target.getEditLink().getHref());
  persistentData.addLink(vdcLink);
  persistentData.addLink(storageLink);
  persistentData.addLink(templateLink);
  String editUri=getURI().getPath();
  Pattern p=Pattern.compile("\\d+");
  Matcher m=p.matcher(editUri);
  m.find();
  Integer idEnt=new Integer(m.group());
  m.find();
  Integer idDcRepo=new Integer(m.group());
  AcceptedRequestDto<String> response=context.getApi().getVirtualMachineTemplateApi().createPersistentVirtualMachineTemplate(idEnt,idDcRepo,persistentData);
  return getTask(response);
}
