{
  org.jclouds.rest.MapBinder mapBinder=getMapEntityBinderOrNull(request.getJavaMethod(),request.getArgs());
  Map<String,String> mapParams=buildPostParams(request.getJavaMethod(),request.getArgs());
  if (mapBinder != null) {
    mapBinder.bindToRequest(request,mapParams);
    return;
  }
  OUTER:   for (  Entry<Integer,Set<Annotation>> entry : Maps.filterValues(methodToIndexOfParamToDecoratorParamAnnotation.get(request.getJavaMethod()),new Predicate<Set<Annotation>>(){
    public boolean apply(    Set<Annotation> input){
      return input.size() >= 1;
    }
  }
).entrySet()) {
    boolean shouldBreak=false;
    BinderParam entityAnnotation=(BinderParam)entry.getValue().iterator().next();
    Binder binder=injector.getInstance(entityAnnotation.value());
    if (request.getArgs().length != 0) {
      Object input;
      Class<?> parameterType=request.getJavaMethod().getParameterTypes()[entry.getKey()];
      Class<? extends Object> argType=request.getArgs()[entry.getKey()].getClass();
      if (!argType.isArray() && request.getJavaMethod().isVarArgs() && parameterType.isArray()) {
        int arrayLength=request.getArgs().length - request.getJavaMethod().getParameterTypes().length + 1;
        if (arrayLength == 0)         break OUTER;
        input=(Object[])Array.newInstance(request.getArgs()[entry.getKey()].getClass(),arrayLength);
        System.arraycopy(request.getArgs(),entry.getKey(),input,0,arrayLength);
        shouldBreak=true;
      }
 else       if (argType.isArray() && request.getJavaMethod().isVarArgs() && parameterType.isArray()) {
        input=request.getArgs()[entry.getKey()];
      }
 else {
        input=request.getArgs()[entry.getKey()];
        if (input.getClass().isArray()) {
          Object[] entityArray=(Object[])input;
          input=entityArray.length > 0 ? entityArray[0] : null;
        }
      }
      if (input != null) {
        binder.bindToRequest(request,input);
      }
      if (shouldBreak)       break OUTER;
    }
  }
  if (request.getMethod().equals("PUT") && request.getEntity() == null) {
    request.getHeaders().replaceValues(HttpHeaders.CONTENT_LENGTH,Collections.singletonList(0 + ""));
  }
}
