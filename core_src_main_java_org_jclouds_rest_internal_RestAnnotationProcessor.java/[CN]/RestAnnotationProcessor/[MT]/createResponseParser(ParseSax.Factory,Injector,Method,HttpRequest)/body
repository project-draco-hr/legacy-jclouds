{
  Function<HttpResponse,?> transformer;
  Class<? extends HandlerWithResult<?>> handler=getSaxResponseParserClassOrNull(method);
  if (handler != null) {
    transformer=parserFactory.create(injector.getInstance(handler));
  }
 else {
    transformer=getTransformerForMethod(method,injector);
  }
  if (transformer instanceof InvocationContext<?>) {
    ((InvocationContext<?>)transformer).setContext(request);
  }
  return transformer;
}
