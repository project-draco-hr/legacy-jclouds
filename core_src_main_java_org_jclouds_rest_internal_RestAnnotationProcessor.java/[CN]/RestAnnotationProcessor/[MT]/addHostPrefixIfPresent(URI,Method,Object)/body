{
  Map<Integer,Set<Annotation>> map=indexWithOnlyOneAnnotation(method,"@HostPrefixParam",methodToIndexOfParamToHostPrefixParamAnnotations);
  UriBuilder builder=UriBuilder.fromUri(endpoint);
  if (map.size() == 1) {
    HostPrefixParam param=(HostPrefixParam)map.values().iterator().next().iterator().next();
    int index=map.keySet().iterator().next();
    String prefix=checkNotNull(args[index],String.format("argument at index %d on method %s",index,method)).toString();
    checkArgument(!prefix.equals(""),String.format("argument at index %d must be a valid hostname for method %s",index,method));
    String joinOn=param.value();
    String host=endpoint.getHost();
    builder.host(prefix + joinOn + host);
  }
  return builder;
}
