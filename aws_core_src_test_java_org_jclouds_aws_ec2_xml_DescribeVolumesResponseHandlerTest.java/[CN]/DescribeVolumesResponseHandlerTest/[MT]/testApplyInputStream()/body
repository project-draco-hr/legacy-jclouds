{
  DateService dateService=injector.getInstance(DateService.class);
  InputStream is=getClass().getResourceAsStream("/ec2/describe_volumes.xml");
  Set<Volume> expected=Sets.newLinkedHashSet();
  expected.add(new Volume("vol-2a21e543",1,null,AvailabilityZone.US_EAST_1A,Volume.Status.AVAILABLE,dateService.iso8601DateParse("2009-12-28T05:42:53.000Z"),Sets.<Attachment>newLinkedHashSet()));
  expected.add(new Volume("vol-4282672b",800,null,AvailabilityZone.US_EAST_1A,Volume.Status.IN_USE,dateService.iso8601DateParse("2008-05-07T11:51:50.000Z"),Sets.<Attachment>newHashSet(new Attachment("vol-4282672b","i-6058a509","/dev/sdh",Attachment.Status.ATTACHED,dateService.iso8601DateParse("2008-05-07T12:51:50.000Z")))));
  Set<Volume> result=factory.create(injector.getInstance(DescribeVolumesResponseHandler.class)).parse(is);
  assertEquals(result,expected);
}
