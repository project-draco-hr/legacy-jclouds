{
  try {
    unlockMachine(machineId);
    IMachine immutableMachine=manager.get().getVBox().findMachine(machineId);
    return function.apply(immutableMachine);
  }
 catch (  VBoxException e) {
    throw new RuntimeException(String.format("error applying %s to %s: %s",function,machineId,e.getMessage()),e);
  }
}
