{
  AzureBlob blob=(AzureBlob)payload;
  checkArgument(blob.getPayload().getContentMetadata().getContentLength() != null && blob.getPayload().getContentMetadata().getContentLength() >= 0,"size must be set");
  request.getHeaders().put("x-ms-blob-type",blob.getProperties().getType().toString());
switch (blob.getProperties().getType()) {
case PAGE_BLOB:
    request.getHeaders().put(HttpHeaders.CONTENT_LENGTH,"0");
  request.getHeaders().put("x-ms-blob-content-length",blob.getPayload().getContentMetadata().getContentLength().toString());
break;
case BLOCK_BLOB:
checkArgument(checkNotNull(blob.getPayload().getContentMetadata().getContentLength(),"blob.getContentLength()") <= 64l * 1024 * 1024,"maximum size for put Blob is 64MB");
break;
}
blobBinder.bindToRequest(request,azureBlob2Blob.apply(blob));
}
