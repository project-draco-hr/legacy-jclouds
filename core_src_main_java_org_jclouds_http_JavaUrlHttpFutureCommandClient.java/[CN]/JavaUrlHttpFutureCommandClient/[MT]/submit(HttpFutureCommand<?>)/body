{
  HttpRequest request=command.getRequest();
  HttpURLConnection connection=null;
  try {
    for (    HttpRequestFilter filter : getRequestFilters()) {
      filter.filter(request);
    }
    HttpResponse response=null;
    for (; ; ) {
      logger.trace("%1s - converting request %2s",target,request);
      connection=openJavaConnection(request);
      logger.trace("%1s - submitting request %2s",target,connection);
      response=getResponse(connection);
      logger.trace("%1s - received response %2s",target,response);
      if (command.getRequest().isReplayable() && response.getStatusCode() >= 500) {
        logger.info("resubmitting command: %1s",command);
        continue;
      }
      break;
    }
    command.getResponseFuture().setResponse(response);
    command.getResponseFuture().run();
  }
 catch (  Exception e) {
    command.setException(e);
  }
 finally {
    if (request.getMethod().equals("HEAD"))     connection.disconnect();
  }
}
