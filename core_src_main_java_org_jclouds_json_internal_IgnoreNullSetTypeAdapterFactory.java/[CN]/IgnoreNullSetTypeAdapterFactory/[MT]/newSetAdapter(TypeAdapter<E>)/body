{
  return new TypeAdapter<Set<E>>(){
    public void write(    JsonWriter out,    Set<E> value) throws IOException {
      out.beginArray();
      for (      E element : value) {
        elementAdapter.write(out,element);
      }
      out.endArray();
    }
    public Set<E> read(    JsonReader in) throws IOException {
      ImmutableSet.Builder<E> result=ImmutableSet.<E>builder();
      in.beginArray();
      while (in.hasNext()) {
        E element=elementAdapter.read(in);
        if (element != null)         result.add(element);
      }
      in.endArray();
      return result.build();
    }
  }
.nullSafe();
}
