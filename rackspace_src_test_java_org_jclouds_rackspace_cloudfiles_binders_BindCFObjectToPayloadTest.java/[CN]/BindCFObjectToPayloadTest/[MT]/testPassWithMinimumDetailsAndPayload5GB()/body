{
  BindUserMetadataToHeadersWithPrefix mdBinder=createMock(BindUserMetadataToHeadersWithPrefix.class);
  ObjectToBlob object2Blob=createMock(ObjectToBlob.class);
  HttpRequest request=createMock(HttpRequest.class);
  CFObject object=createMock(CFObject.class);
  Payload payload=createMock(Payload.class);
  Blob blob=createMock(Blob.class);
  MutableObjectInfoWithMetadata md=createMock(MutableObjectInfoWithMetadata.class);
  MutableContentMetadata content=createMock(MutableContentMetadata.class);
  expect(object.getPayload()).andReturn(payload).atLeastOnce();
  expect(payload.getContentMetadata()).andReturn(content).atLeastOnce();
  expect(content.getContentType()).andReturn(null).atLeastOnce();
  content.setContentType(MediaType.APPLICATION_OCTET_STREAM);
  expect(content.getContentLength()).andReturn(5368709120l).atLeastOnce();
  expect(object2Blob.apply(object)).andReturn(blob);
  mdBinder.bindToRequest(request,blob);
  replay(payload);
  replay(content);
  replay(mdBinder);
  replay(object2Blob);
  replay(request);
  replay(object);
  replay(blob);
  replay(md);
  BindCFObjectToPayload binder=new BindCFObjectToPayload(object2Blob,mdBinder);
  binder.bindToRequest(request,object);
  verify(payload);
  verify(content);
  verify(mdBinder);
  verify(object2Blob);
  verify(request);
  verify(object);
  verify(blob);
  verify(md);
}
