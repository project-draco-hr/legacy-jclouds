{
  boolean error=false;
  try {
    byte[] buffer1=new byte[1024];
    byte[] buffer2=new byte[1024];
    try {
      int numRead1=0;
      int numRead2=0;
      while (true) {
        numRead1=input1.read(buffer1);
        numRead2=input2.read(buffer2);
        if (numRead1 > -1) {
          if (numRead2 != numRead1)           return false;
          if (!Arrays.equals(buffer1,buffer2))           return false;
        }
 else {
          return numRead2 < 0;
        }
      }
    }
  finally {
      input1.close();
    }
  }
 catch (  IOException e) {
    error=true;
    throw e;
  }
catch (  RuntimeException e) {
    error=true;
    throw e;
  }
 finally {
    try {
      input2.close();
    }
 catch (    IOException e) {
      if (!error)       throw e;
    }
  }
}
