{
  try {
    if (!Assertions.eventuallyTrue(new Supplier<Boolean>(){
      public Boolean get(){
        try {
          clearContainer(container,recursive());
          return deleteAndVerifyContainerGone(container);
        }
 catch (        ContainerNotFoundException e) {
          return true;
        }
      }
    }
,30000)) {
      throw new IllegalStateException(container + " still exists after deleting!");
    }
  }
 catch (  InterruptedException e) {
    new IllegalStateException(container + " interrupted during deletion!",e);
  }
}
