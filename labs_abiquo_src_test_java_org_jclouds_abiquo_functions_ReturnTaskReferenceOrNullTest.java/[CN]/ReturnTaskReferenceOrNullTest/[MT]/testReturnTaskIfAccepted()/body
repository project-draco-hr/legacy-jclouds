{
  JAXBParser parser=new JAXBParser("false");
  AcceptedRequestDto<?> task=new AcceptedRequestDto<String>();
  Payload payload=Payloads.newPayload(parser.toXML(task));
  Function<HttpResponse,AcceptedRequestDto<String>> function=new ReturnTaskReferenceOrNull(parser,createTypeLiteral());
  HttpResponse response=EasyMock.createMock(HttpResponse.class);
  expect(response.getStatusCode()).andReturn(Status.ACCEPTED.getStatusCode());
  expect(response.getPayload()).andReturn(payload);
  expect(response.getPayload()).andReturn(payload);
  expect(response.getPayload()).andReturn(payload);
  replay(response);
  assertTrue(function.apply(response) instanceof AcceptedRequestDto);
  verify(response);
}
