{
  InputStream is=getClass().getResourceAsStream("/test_list_blobs.xml");
  Set<BlobProperties> contents=ImmutableSet.<BlobProperties>of(new BlobPropertiesImpl(BlobType.BLOCK_BLOB,"blob1.txt","mycontainer",URI.create("http://myaccount.blob.core.windows.net/mycontainer/blob1.txt"),dateService.rfc822DateParse("Thu, 18 Sep 2008 18:41:57 GMT"),"0x8CAE7D55D050B8B",8,"text/plain; charset=UTF-8",null,null,null,null,LeaseStatus.UNLOCKED,ImmutableMap.<String,String>of()),new BlobPropertiesImpl(BlobType.BLOCK_BLOB,"blob2.txt","mycontainer",URI.create("http://myaccount.blob.core.windows.net/mycontainer/blob2.txt"),dateService.rfc822DateParse("Thu, 18 Sep 2008 18:41:57 GMT"),"0x8CAE7D55CF6C339",14,"text/plain; charset=UTF-8",null,null,null,null,LeaseStatus.UNLOCKED,ImmutableMap.<String,String>of()),new BlobPropertiesImpl(BlobType.PAGE_BLOB,"newblob1.txt","mycontainer",URI.create("http://myaccount.blob.core.windows.net/mycontainer/newblob1.txt"),dateService.rfc822DateParse("Thu, 18 Sep 2008 18:41:57 GMT"),"0x8CAE7D55CF6C339",25,"text/plain; charset=UTF-8",null,null,null,null,LeaseStatus.UNLOCKED,ImmutableMap.<String,String>of()));
  ListBlobsResponse list=new HashSetListBlobsResponse(contents,URI.create("http://myaccount.blob.core.windows.net/mycontainer"),"myfolder/",null,4,"newblob2.txt",null,ImmutableSet.<String>of("myfolder/"));
  ListBlobsResponse result=factory.create(injector.getInstance(ContainerNameEnumerationResultsHandler.class)).parse(is);
  assertEquals(result,list);
}
