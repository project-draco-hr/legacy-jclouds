{
  try {
    ListResponse<? extends StorageMetadata> resources=connection.list(container,options);
    SortedSet<BlobMetadata> blobM=Sets.newTreeSet();
    for (    StorageMetadata from : resources) {
      if (from.getType() == StorageType.BLOB)       blobM.add((BlobMetadata)from);
    }
    return blobM;
  }
 catch (  Exception e) {
    Throwables.propagateIfPossible(e,BlobRuntimeException.class);
    throw new BlobRuntimeException("Error getting resource metadata in container: " + container,e);
  }
}
