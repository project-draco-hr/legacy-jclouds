{
  try {
    StorageNodeResponse response=gson.fromJson(new InputStreamReader(stream,"UTF-8"),StorageNodeResponse.class);
    if (response.ResponseCode == null || response.ResponseCode != 0)     throw new RuntimeException("bad response code: " + response.ResponseCode);
    return new UploadInfo(response.GetStorageNode.get("UploadToken"),URI.create("https://" + response.GetStorageNode.get("UploadHost")));
  }
 catch (  UnsupportedEncodingException e) {
    throw new RuntimeException("jclouds requires UTF-8 encoding",e);
  }
}
