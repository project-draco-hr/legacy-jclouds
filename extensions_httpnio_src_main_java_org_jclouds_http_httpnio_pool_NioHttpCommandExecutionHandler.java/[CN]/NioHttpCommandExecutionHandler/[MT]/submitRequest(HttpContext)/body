{
  HttpCommandRendezvous<?> rendezvous=(HttpCommandRendezvous<?>)context.removeAttribute("command");
  if (rendezvous != null) {
    HttpRequest request=rendezvous.getCommand().getRequest();
    for (    HttpRequestFilter filter : request.getFilters()) {
      filter.filter(request);
    }
    logger.debug("Sending request %s: %s",request.hashCode(),request.getRequestLine());
    if (request.getEntity() != null && wire.enabled())     request.setEntity(wire.output(request.getEntity()));
    HttpEntityEnclosingRequest nativeRequest=NioHttpUtils.convertToApacheRequest(request);
    if (headerLog.isDebugEnabled()) {
      headerLog.debug(">> %s",request.getRequestLine().toString());
      for (      Entry<String,String> header : request.getHeaders().entries()) {
        headerLog.debug(">> %s: %s",header.getKey(),header.getValue());
      }
    }
    return nativeRequest;
  }
  return null;
}
