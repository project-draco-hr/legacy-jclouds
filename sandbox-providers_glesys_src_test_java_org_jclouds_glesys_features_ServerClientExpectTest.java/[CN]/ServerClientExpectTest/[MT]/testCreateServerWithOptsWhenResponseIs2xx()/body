{
  ServerClient client=requestSendsResponse(HttpRequest.builder().method("POST").endpoint(URI.create("https://api.glesys.com/server/create/format/json")).headers(ImmutableMultimap.<String,String>builder().put("Accept","application/json").put("Authorization","Basic aWRlbnRpdHk6Y3JlZGVudGlhbA==").build()).payload(newUrlEncodedFormPayload(ImmutableMultimap.<String,String>builder().put("cpucores","1").put("memorysize","512").put("datacenter","Falkenberg").put("transfer","50").put("rootpassword","password").put("hostname","jclouds-test").put("platform","OpenVZ").put("templatename","Ubuntu 32-bit").put("disksize","5").put("description","Description-of-server").put("ip","10.0.0.1").build())).build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/server_details.json")).build()).getServerClient();
  CreateServerOptions options=CreateServerOptions.Builder.description("Description-of-server").ip("10.0.0.1");
  assertEquals(client.createServer("Falkenberg","OpenVZ","jclouds-test","Ubuntu 32-bit",5,512,1,"password",50,options),expectedServerDetails());
}
