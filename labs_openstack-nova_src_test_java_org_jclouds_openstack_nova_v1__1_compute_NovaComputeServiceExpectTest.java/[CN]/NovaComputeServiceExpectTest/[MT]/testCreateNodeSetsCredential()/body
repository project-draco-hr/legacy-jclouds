{
  Map<HttpRequest,HttpResponse> requestResponseMap=ImmutableMap.<HttpRequest,HttpResponse>builder().put(keystoneAuthWithAccessKeyAndSecretKey,responseWithKeystoneAccess).put(extensionsOfNovaRequest,extensionsOfNovaResponse).put(listImagesDetail,listImagesDetailResponse).put(listServers,listServersResponse).put(listFlavorsDetail,listFlavorsDetailResponse).put(listFloatingIps,listFloatingIpsResponse).build();
  ComputeService clientThatCreatesNode=requestsSendResponses(requestResponseMap);
  NodeMetadata node=Iterables.getOnlyElement(clientThatCreatesNode.createNodesInGroup("test",1));
  assertEquals(node.getCredentials().getPassword(),"foo");
}
