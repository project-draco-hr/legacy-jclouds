{
  checkArgument(checkNotNull(input,"input") instanceof Item,"this binder is only valid for AttributeMap");
  Item attributeMap=(Item)input;
  Builder<String,String> builder=ImmutableMultimap.builder();
  int amazonOneBasedIndex=1;
  for (  String itemName : attributeMap.getAttributes().keySet()) {
    Collection<AttributePair> c=attributeMap.getAttributes().get(itemName);
    Iterator<AttributePair> it=c.iterator();
    while (it.hasNext()) {
      AttributePair attr=it.next();
      String value=attr.getValue();
      if (value != null) {
        builder.put(format(attributeName,amazonOneBasedIndex),attr.getKey());
        builder.put(format(attributeValue,amazonOneBasedIndex),value);
        builder.put(format(attributeReplace,amazonOneBasedIndex),String.valueOf(attr.isReplace()));
      }
      amazonOneBasedIndex++;
    }
  }
  ImmutableMultimap<String,String> forms=builder.build();
  return forms.size() == 0 ? request : ModifyRequest.putFormParams(request,forms);
}
