{
  Set<String> headers=new TreeSet<String>(request.getHeaders().keySet());
  for (  String header : headers) {
    if (header.startsWith("x-amz-")) {
      toSign.append(header).append(":");
      for (      String value : request.getHeaders().get(header))       toSign.append(value.replaceAll("\r?\n","")).append(",");
      toSign.deleteCharAt(toSign.lastIndexOf(","));
      toSign.append("\n");
    }
  }
}
