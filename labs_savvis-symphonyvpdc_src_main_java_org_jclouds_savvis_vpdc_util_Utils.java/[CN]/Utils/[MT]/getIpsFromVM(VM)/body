{
  Iterable<String> ipFromConnections=transform(vm.getNetworkConnectionSections(),new Function<NetworkConnectionSection,String>(){
    @Override public String apply(    NetworkConnectionSection input){
      return input.getIpAddress();
    }
  }
);
  Iterable<String> ipsFromNat=concat(transform(vm.getNetworkConfigSections(),new Function<NetworkConfigSection,Iterable<String>>(){
    @Override public Iterable<String> apply(    NetworkConfigSection input){
      return concat(input.getInternalToExternalNATRules().keySet(),input.getInternalToExternalNATRules().values());
    }
  }
));
  return ImmutableSet.copyOf(filter(concat(ipFromConnections,ipsFromNat),notNull()));
}
