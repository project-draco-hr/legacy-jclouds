{
  UnwrapOnlyNestedJsonValue<Capabilities> parser=Guice.createInjector(new GsonModule()).getInstance(Key.get(new TypeLiteral<UnwrapOnlyNestedJsonValue<Capabilities>>(){
  }
));
  Capabilities response=parser.apply(new HttpResponse(200,"ok",Payloads.newStringPayload("{ \"listcapabilitiesresponse\" :  { \"capability\" : {\"securitygroupsenabled\":true,\"cloudstackversion\":\"2.2\",\"userpublictemplateenabled\":true} }  }")));
  assertEquals(Capabilities.builder().securityGroupsEnabled(true).sharedTemplatesEnabled(true).cloudStackVersion("2.2").build(),response);
}
