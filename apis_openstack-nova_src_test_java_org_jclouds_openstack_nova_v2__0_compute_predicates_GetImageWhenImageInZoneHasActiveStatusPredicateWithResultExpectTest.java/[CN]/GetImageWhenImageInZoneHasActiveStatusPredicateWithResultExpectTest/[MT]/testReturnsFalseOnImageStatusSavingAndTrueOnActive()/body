{
  Injector injector=requestsSendResponses(requestResponseMap);
  PredicateWithResult<ZoneAndId,Image> predicate=injector.getInstance(GetImageWhenImageInZoneHasActiveStatusPredicateWithResult.class);
  ZoneAndId zoneAdnId0=ZoneAndId.fromZoneAndId("az-1.region-a.geo-1","13");
  ZoneAndId zoneAdnId1=ZoneAndId.fromZoneAndId("az-1.region-a.geo-1","12");
  ZoneAndId zoneAdnId2=ZoneAndId.fromZoneAndId("az-1.region-a.geo-1","15");
  assertTrue(predicate.apply(zoneAdnId0));
  assertFalse(predicate.apply(zoneAdnId1));
  assertFalse(predicate.apply(zoneAdnId2));
  assertEquals("oneiric-server-cloudimg-amd64",predicate.getResult().getName());
}
