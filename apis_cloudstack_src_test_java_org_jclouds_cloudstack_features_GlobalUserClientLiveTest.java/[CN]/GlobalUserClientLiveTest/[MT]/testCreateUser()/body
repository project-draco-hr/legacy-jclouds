{
  Account testAccount=createTestAccount();
  User testUser=null;
  try {
    testUser=globalAdminClient.getUserClient().createUser(prefix + "-user",testAccount.getName(),"dummy2@example.com","md5-password","First","Last");
    assertNotNull(testUser);
    assertEquals(testUser.getName(),prefix + "-user");
    assertEquals(testUser.getAccount(),prefix + "-account");
    User updatedUser=globalAdminClient.getUserClient().updateUser(testUser.getId(),userName(prefix + "-user-2"));
    assertNotNull(updatedUser);
    assertEquals(updatedUser.getName(),prefix + "-user-2");
  }
  finally {
    if (testUser != null) {
      globalAdminClient.getUserClient().deleteUser(testUser.getId());
    }
    globalAdminClient.getAccountClient().deleteAccount(testAccount.getId());
  }
}
