{
  ServerApi api=requestSendsResponse(HttpRequest.builder().method("POST").endpoint("https://api.glesys.com/server/create/format/json").addHeader("Accept","application/json").addHeader("Authorization","Basic aWRlbnRpdHk6Y3JlZGVudGlhbA==").addFormParam("hostname","jclouds-test").addFormParam("rootpassword","password").addFormParam("datacenter","Falkenberg").addFormParam("platform","OpenVZ").addFormParam("templatename","Ubuntu 32-bit").addFormParam("disksize","5").addFormParam("memorysize","512").addFormParam("cpucores","1").addFormParam("transfer","50").addFormParam("ip","10.0.0.1").addFormParam("description","Description-of-server").build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/server_details.json")).build()).getServerApi();
  CreateServerOptions options=CreateServerOptions.Builder.description("Description-of-server").ip("10.0.0.1");
  assertEquals(api.createWithHostnameAndRootPassword(ServerSpec.builder().datacenter("Falkenberg").platform("OpenVZ").templateName("Ubuntu 32-bit").diskSizeGB(5).memorySizeMB(512).cpuCores(1).transferGB(50).build(),"jclouds-test","password",options),expectedServerDetails());
}
