{
  CopyObjectOptions options=new CopyObjectOptions();
  if (acl != null) {
    options.overrideAcl(convertACLToCannedAccessPolicy(acl));
  }
  if (ifModifiedSince != null) {
    options.ifSourceModifiedSince(ifModifiedSince.getTime());
  }
  if (ifUnmodifiedSince != null) {
    options.ifSourceUnmodifiedSince(ifUnmodifiedSince.getTime());
  }
  if (ifMatchTags != null && ifMatchTags.length > 0) {
    options.ifSourceETagMatches(ifMatchTags[0]);
  }
  if (ifNoneMatchTags != null && ifNoneMatchTags.length > 0) {
    options.ifSourceETagDoesntMatch(ifNoneMatchTags[0]);
  }
  if (destinationMetadata != null) {
    Map<String,String> newMetadata=Maps.newHashMap();
    for (    Object maybeUserMetadataObj : destinationMetadata.entrySet()) {
      String name=((Entry<String,String>)maybeUserMetadataObj).getKey();
      String value=((Entry<String,String>)maybeUserMetadataObj).getValue();
      newMetadata.put(name,value);
    }
    options.overrideMetadataWith(newMetadata);
  }
  return options;
}
