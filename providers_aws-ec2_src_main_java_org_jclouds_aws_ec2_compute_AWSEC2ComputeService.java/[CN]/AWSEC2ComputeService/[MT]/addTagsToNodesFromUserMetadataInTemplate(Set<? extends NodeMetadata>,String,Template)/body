{
  String region=AWSUtils.getRegionFromLocationOrNull(template.getLocation());
  if (template.getOptions().getUserMetadata().size() > 0 || generateInstanceNames) {
    for (    String id : transform(nodes,new Function<NodeMetadata,String>(){
      @Override public String apply(      NodeMetadata arg0){
        return arg0.getProviderId();
      }
    }
))     aclient.getTagServices().createTagsInRegion(region,ImmutableSet.of(id),metadataForId(id,group,template.getOptions().getUserMetadata()));
  }
}
