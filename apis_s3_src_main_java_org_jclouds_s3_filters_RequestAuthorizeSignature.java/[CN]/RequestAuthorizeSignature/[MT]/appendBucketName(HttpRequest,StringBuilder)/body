{
  checkArgument(req instanceof GeneratedHttpRequest<?>,"this should be a generated http request");
  GeneratedHttpRequest<?> request=GeneratedHttpRequest.class.cast(req);
  String bucketName=null;
  for (int i=0; i < request.getJavaMethod().getParameterAnnotations().length; i++) {
    if (any(Arrays.asList(request.getJavaMethod().getParameterAnnotations()[i]),ANNOTATIONTYPE_BUCKET)) {
      bucketName=(String)request.getArgs().get(i);
      break;
    }
  }
  if (bucketName != null)   toSign.append(servicePath).append(bucketName);
}
