{
  Iterable<Set<? extends Reservation<? extends RunningInstance>>> reservations=transformParallel(regions,new Function<String,Future<Set<? extends Reservation<? extends RunningInstance>>>>(){
    @Override public Future<Set<? extends Reservation<? extends RunningInstance>>> apply(    String from){
      return client.getInstanceServices().describeInstancesInRegion(from);
    }
  }
,executor,null,logger,"reservations");
  Iterable<? extends RunningInstance> instances=concat(concat(reservations));
  Iterable<? extends NodeMetadata> nodes=filter(transform(instances,runningInstanceToNodeMetadata),filter);
  return newLinkedHashSet(nodes);
}
