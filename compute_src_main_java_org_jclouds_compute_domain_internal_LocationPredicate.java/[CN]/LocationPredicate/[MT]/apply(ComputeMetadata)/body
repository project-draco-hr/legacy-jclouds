{
  Location location=locationSupplier.get();
  if (location == null)   return true;
  if (location.equals(input.getLocation()))   return true;
  checkArgument(location.getParent() != null || location.getScope() == LocationScope.PROVIDER,"only locations of scope PROVIDER can have a null parent; arg: %s",location);
  if (input.getLocation() == null)   return true;
  checkState(input.getLocation().getParent() != null || input.getLocation().getScope() == LocationScope.PROVIDER,"only locations of scope PROVIDER can have a null parent; input: %s",input.getLocation());
  return location.equals(input.getLocation()) || location.getParent() != null && location.getParent().equals(input.getLocation()) || location.getParent().getParent() != null && location.getParent().getParent().equals(input.getLocation());
}
