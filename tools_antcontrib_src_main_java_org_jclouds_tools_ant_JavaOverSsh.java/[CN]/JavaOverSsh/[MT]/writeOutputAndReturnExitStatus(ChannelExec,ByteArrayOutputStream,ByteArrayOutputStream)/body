{
  if (outputProperty != null) {
    getProject().setProperty(outputProperty,out.toString());
  }
  if (outputFile != null) {
    writeToFile(err.toString(),append,outputFile);
  }
  if (errorProperty != null) {
    getProject().setProperty(errorProperty,err.toString());
  }
  if (errorFile != null) {
    writeToFile(out.toString(),append,errorFile);
  }
  if (resultProperty != null) {
    getProject().setProperty(resultProperty,channel.getExitStatus() + "");
  }
  return channel.getExitStatus();
}
