{
  if (volumeOption.isPresent()) {
    if (testSnapshot != null) {
      final String snapshotId=testSnapshot.getId();
      assertTrue(volumeOption.get().deleteSnapshot(snapshotId));
      assertTrue(new RetryablePredicate<VolumeClient>(new Predicate<VolumeClient>(){
        @Override public boolean apply(        VolumeClient volumeClient){
          return volumeOption.get().getSnapshot(snapshotId) == null;
        }
      }
,30 * 1000L).apply(volumeOption.get()));
    }
    if (testVolume != null) {
      final String volumeId=testVolume.getId();
      assertTrue(volumeOption.get().deleteVolume(volumeId));
      assertTrue(new RetryablePredicate<VolumeClient>(new Predicate<VolumeClient>(){
        @Override public boolean apply(        VolumeClient volumeClient){
          return volumeOption.get().getVolume(volumeId) == null;
        }
      }
,180 * 1000L).apply(volumeOption.get()));
    }
  }
  super.tearDown();
}
