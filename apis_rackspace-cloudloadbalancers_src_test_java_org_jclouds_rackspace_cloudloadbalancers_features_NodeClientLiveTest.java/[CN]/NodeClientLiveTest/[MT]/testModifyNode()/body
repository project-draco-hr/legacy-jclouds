{
  for (  Entry<LoadBalancer,Set<Node>> entry : nodes.entrySet()) {
    for (    Node n : entry.getValue()) {
      String region=entry.getKey().getRegion();
      client.getNodeClient(region).updateAttributesForNodeInLoadBalancer(NodeAttributes.Builder.weight(23),n.getId(),entry.getKey().getId());
      assertEquals(client.getNodeClient(region).getNodeInLoadBalancer(n.getId(),entry.getKey().getId()).getStatus(),Node.Status.ONLINE);
      Node newNode=client.getNodeClient(region).getNodeInLoadBalancer(n.getId(),entry.getKey().getId());
      assertEquals(newNode.getStatus(),Node.Status.ONLINE);
      assertEquals(newNode.getWeight(),(Integer)23);
    }
  }
}
