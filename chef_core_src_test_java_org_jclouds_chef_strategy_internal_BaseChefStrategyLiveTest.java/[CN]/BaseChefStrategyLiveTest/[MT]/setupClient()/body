{
  String endpoint=checkNotNull(System.getProperty("jclouds.test.endpoint"),"jclouds.test.endpoint");
  String user=checkNotNull(System.getProperty("jclouds.test.identity"),"jclouds.test.identity");
  String keyfile=System.getProperty("jclouds.test.credential");
  if (keyfile == null || keyfile.equals(""))   keyfile=System.getProperty("user.home") + "/.chef/" + user+ ".pem";
  Properties props=new Properties();
  props.setProperty("chef.endpoint",endpoint);
  Set<Module> modules=Sets.newHashSet();
  modules.add(new Log4JLoggingModule());
  addTestModulesTo(modules);
  injector=new RestContextFactory().<ChefClient,ChefAsyncClient>createContextBuilder("chef",user,Files.toString(new File(keyfile),Charsets.UTF_8),modules,props).buildInjector();
}
