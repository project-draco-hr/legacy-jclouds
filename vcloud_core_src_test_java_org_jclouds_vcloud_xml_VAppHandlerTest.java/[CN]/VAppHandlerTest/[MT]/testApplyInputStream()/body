{
  InputStream is=getClass().getResourceAsStream("/vapp-hosting.xml");
  VApp result=factory.create(injector.getInstance(VAppHandler.class)).parse(is);
  ListMultimap<String,InetAddress> networkToAddresses=ImmutableListMultimap.<String,InetAddress>of("Network 1",InetAddress.getByName("204.12.59.147"));
  VirtualSystem system=new VirtualSystem(0,"Virtual Hardware Family","SimpleVM","vmx-07");
  SortedSet<ResourceAllocation> resourceAllocations=ImmutableSortedSet.<ResourceAllocation>naturalOrder().add(new ResourceAllocation(1,"1 virtual CPU(s)","Number of Virtual CPUs",ResourceType.PROCESSOR,null,null,null,null,null,1,"hertz * 10^6"),new ResourceAllocation(2,"512MB of memory","Memory Size",ResourceType.MEMORY,null,null,null,null,null,512,"byte * 2^20")).add(new ResourceAllocation(3,"SCSI Controller 0","SCSI Controller",ResourceType.SCSI_CONTROLLER,"lsilogic",0,null,null,null,1,null)).add(new ResourceAllocation(9,"Hard Disk 1",null,ResourceType.DISK_DRIVE,null,null,0,3,null,20971520,"byte * 2^20")).build();
  VApp expects=new VAppImpl("188849-74","188849-74",URI.create("https://vcloud.safesecureweb.com/api/v0.8/vapp/188849-74"),VAppStatus.ON,new Long(20971520),networkToAddresses,null,system,resourceAllocations);
  assertEquals(result,expects);
}
