{
  InputStream is=getClass().getResourceAsStream("/vapp2.xml");
  VApp result=factory.create(injector.getInstance(VAppHandler.class)).parse(is);
  ListMultimap<String,String> networkToAddresses=ImmutableListMultimap.<String,String>of("Public Network","10.23.119.221");
  VirtualSystem system=new VirtualSystem(0,"Virtual Hardware Family","m1","vmx-07");
  SortedSet<ResourceAllocation> resourceAllocations=ImmutableSortedSet.<ResourceAllocation>naturalOrder().add(new ResourceAllocation(1,"1 virtual CPU(s)","Number of Virtual CPUs",ResourceType.PROCESSOR,null,null,null,null,null,null,1,"hertz * 10^6"),new ResourceAllocation(2,"512MB of memory","Memory Size",ResourceType.MEMORY,null,null,null,null,null,null,512,"byte * 2^20")).add(new ResourceAllocation(3,"SCSI Controller 0","SCSI Controller",ResourceType.SCSI_CONTROLLER,"lsilogic",null,0,null,null,null,1,null)).add(new ResourceAllocation(8,"Network Adapter 1","PCNet32 ethernet adapter on \"Internal\" network",ResourceType.ETHERNET_ADAPTER,"PCNet32",null,null,7,null,true,1,null)).add(new ResourceAllocation(9,"Hard Disk 1",null,ResourceType.DISK_DRIVE,null,"10485760",null,0,3,null,10485760,"byte * 2^20")).build();
  VApp expects=new VAppImpl("m1",URI.create("http://localhost:8000/api/v0.8/vApp/80"),Status.ON,new Long(10485760),new NamedResourceImpl(null,"application/vnd.vmware.vcloud.vdc+xml",URI.create("http://localhost:8000/api/v0.8/vdc/28")),networkToAddresses,null,"Microsoft Windows XP Professional (32-bit)",system,resourceAllocations);
  assertEquals(result.getId(),expects.getId());
  assertEquals(result.getName(),expects.getName());
  assertEquals(result.getNetworkToAddresses(),expects.getNetworkToAddresses());
  assertEquals(result.getOperatingSystemDescription(),expects.getOperatingSystemDescription());
  assertEquals(result.getResourceAllocations(),expects.getResourceAllocations());
  assertEquals(result.getSize(),expects.getSize());
  assertEquals(result.getStatus(),expects.getStatus());
  assertEquals(result.getSystem(),expects.getSystem());
  assertEquals(result.getType(),expects.getType());
  assertEquals(result.getVDC(),expects.getVDC());
}
