{
  if (payload == null)   return emptyStringHash;
  payload=useTheFilePartIfForm(payload);
  checkArgument(payload != null,"payload was null");
  checkArgument(payload.isRepeatable(),"payload must be repeatable: " + payload);
  try {
    return CryptoStreams.base64(CryptoStreams.digest(payload,crypto.sha1()));
  }
 catch (  Exception e) {
    Throwables.propagateIfPossible(e);
    throw new HttpException("error creating sigature for payload: " + payload,e);
  }
}
