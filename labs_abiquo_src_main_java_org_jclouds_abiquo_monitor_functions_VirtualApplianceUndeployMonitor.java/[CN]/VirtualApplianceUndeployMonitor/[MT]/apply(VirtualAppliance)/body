{
  checkNotNull(virtualAppliance,"virtualAppliance");
  try {
    VirtualApplianceState state=virtualAppliance.getState();
switch (state) {
case DEPLOYED:
case UNKNOWN:
case NEEDS_SYNC:
      return MonitorStatus.FAILED;
case NOT_DEPLOYED:
    return MonitorStatus.DONE;
case LOCKED:
default :
  return MonitorStatus.CONTINUE;
}
}
 catch (ResourceNotFoundException nfe) {
logger.warn("virtual appliance %s not found, assuming it was undeployed successfully, " + "stop monitor with DONE",virtualAppliance);
return MonitorStatus.DONE;
}
catch (Exception ex) {
logger.warn(ex,"exception thrown while monitoring %s on %s, returning CONTINUE",virtualAppliance,getClass().getName());
return MonitorStatus.CONTINUE;
}
}
