{
  InputStream is=getClass().getResourceAsStream("/links.xml");
  Set<DeltacloudCollection> expects=ImmutableSet.of(new DeltacloudCollection(URI.create("http://localhost:3001/api/realms"),"realms"),new DeltacloudCollection(URI.create("http://localhost:3001/api/images"),"images"),new DeltacloudCollection(URI.create("http://localhost:3001/api/instance_states"),"instance_states"),new DeltacloudCollection(URI.create("http://localhost:3001/api/instances"),"instances",ImmutableSet.<Feature>of(new Feature("hardware_profiles"),new Feature("user_name"),new Feature("authentication_key"))),new DeltacloudCollection(URI.create("http://localhost:3001/api/hardware_profiles"),"hardware_profiles"),new DeltacloudCollection(URI.create("http://localhost:3001/api/storage_snapshots"),"storage_snapshots"),new DeltacloudCollection(URI.create("http://localhost:3001/api/storage_volumes"),"storage_volumes"),new DeltacloudCollection(URI.create("http://localhost:3001/api/keys"),"keys"),new DeltacloudCollection(URI.create("http://localhost:3001/api/buckets"),"buckets"));
  assertEquals(factory.create(injector.getInstance(DeltacloudCollectionsHandler.class)).parse(is),expects);
}
