{
  HTTPResponse gaeResponse=createMock(HTTPResponse.class);
  expect(gaeResponse.getResponseCode()).andReturn(200);
  List<HTTPHeader> headers=new ArrayList<HTTPHeader>();
  headers.add(new HTTPHeader(HttpHeaders.CONTENT_TYPE,"text/xml"));
  expect(gaeResponse.getHeaders()).andReturn(headers);
  expect(gaeResponse.getContent()).andReturn("hello".getBytes()).atLeastOnce();
  replay(gaeResponse);
  HttpResponse response=client.convert(URI.create("http://localhost"),gaeResponse);
  assertEquals(response.getStatusCode(),200);
  assertEquals(IOUtils.toString(response.getContent()),"hello");
  assertEquals(response.getHeaders().size(),1);
  assertEquals(response.getFirstHeaderOrNull(HttpHeaders.CONTENT_TYPE),"text/xml");
}
