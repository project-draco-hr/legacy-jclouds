{
  Set<NodeMetadata> nodes=Sets.newHashSet();
  for (  String region : ImmutableSet.of(Region.US_EAST_1,Region.US_WEST_1,Region.EU_WEST_1)) {
    Iterables.addAll(nodes,Iterables.transform(Iterables.concat(client.describeInstancesInRegion(region)),runningInstanceToNodeMetadata));
  }
  return Iterables.filter(nodes,filter);
}
