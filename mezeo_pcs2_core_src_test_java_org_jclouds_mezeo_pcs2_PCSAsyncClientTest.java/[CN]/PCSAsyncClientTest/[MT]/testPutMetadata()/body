{
  Method method=PCSAsyncClient.class.getMethod("putMetadataItem",URI.class,String.class,String.class);
  HttpRequest request=processor.createRequest(method,new Object[]{URI.create("http://localhost/contents/file"),"pow","bar"});
  assertEquals(request.getRequestLine(),"PUT http://localhost/contents/file/metadata/pow HTTP/1.1");
  assertEquals(request.getMethod(),HttpMethod.PUT);
  assertEquals(request.getHeaders().size(),2);
  assertEquals(request.getHeaders().get(HttpHeaders.CONTENT_LENGTH),Collections.singletonList(request.getPayload().toString().getBytes().length + ""));
  assertEquals(request.getHeaders().get(HttpHeaders.CONTENT_TYPE),Collections.singletonList("application/unknown"));
  assertEquals("bar",request.getPayload().getRawContent());
  assertEquals(processor.createExceptionParserOrThrowResourceNotFoundOn404IfNoAnnotation(method).getClass(),MapHttp4xxCodesToExceptions.class);
  assertEquals(processor.createResponseParser(method,request).getClass(),CloseContentAndReturn.class);
}
