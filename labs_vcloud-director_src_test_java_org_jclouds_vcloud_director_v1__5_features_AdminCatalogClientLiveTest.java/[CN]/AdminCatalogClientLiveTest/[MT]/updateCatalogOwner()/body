{
  User newOwnerUser=UserClientLiveTest.randomTestUser("testUpdateCatalogOwner",context);
  newOwnerUser=context.getApi().getUserClient().createUser(orgRef.getHref(),newOwnerUser);
  assertNotNull(newOwnerUser,"failed to create temp user to test updateCatalogOwner");
  Owner oldOwner=owner;
  Owner newOwner=Owner.builder().type("application/vnd.vmware.vcloud.owner+xml").user(Reference.builder().fromEntity(newOwnerUser).build()).build();
  try {
    catalogClient.setOwner(catalog.getHref(),newOwner);
    owner=catalogClient.getOwner(catalog.getHref());
    Checks.checkOwner(owner);
    assertTrue(equal(owner.toBuilder().links(Collections.<Link>emptySet()).build(),newOwner.toBuilder().user(newOwner.getUser().toBuilder().id(null).build()).build()),String.format(OBJ_FIELD_UPDATABLE,CATALOG,"owner"));
  }
  finally {
    catalogClient.setOwner(catalog.getHref(),oldOwner);
    owner=catalogClient.getOwner(catalog.getHref());
    context.getApi().getUserClient().deleteUser(newOwnerUser.getHref());
  }
}
