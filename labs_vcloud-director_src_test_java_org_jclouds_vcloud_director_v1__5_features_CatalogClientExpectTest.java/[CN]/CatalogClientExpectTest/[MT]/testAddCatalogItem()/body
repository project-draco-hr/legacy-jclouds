{
  HttpRequest catalogItemRequest=HttpRequest.builder().method("POST").endpoint(URI.create(endpoint + "/catalog/7212e451-76e1-4631-b2de-ba1dfd8080e4/catalogItems")).headers(ImmutableMultimap.<String,String>builder().put("Accept","application/vnd.vmware.vcloud.catalogItem+xml").put("x-vcloud-authorization",token).build()).payload(payloadFromResourceWithContentType("/catalog/newCatalogItem.xml",VCloudDirectorMediaType.CATALOG_ITEM)).build();
  HttpResponse catalogItemResponse=HttpResponse.builder().statusCode(200).payload(payloadFromResourceWithContentType("/catalog/catalogItem.xml",VCloudDirectorMediaType.CATALOG_ITEM + ";version=1.5")).build();
  VCloudDirectorClient client=requestsSendResponses(loginRequest,sessionResponse,catalogItemRequest,catalogItemResponse);
  Reference catalogRef=Reference.builder().type("application/vnd.vmware.vcloud.catalog+xml").name("QunyingTestCatalog").href(URI.create(endpoint + "/catalog/7212e451-76e1-4631-b2de-ba1dfd8080e4")).build();
  Reference ubuntu=Reference.builder().type("application/vnd.vmware.vcloud.vAppTemplate+xml").name("ubuntu10").href(URI.create("https://vcloudbeta.bluelock.com/api/vAppTemplate/vappTemplate-ef4415e6-d413-4cbb-9262-f9bbec5f2ea9")).build();
  CatalogItem newItem=CatalogItem.builder().name("newCatalogItem").description("New Catalog Item").entity(ubuntu).build();
  CatalogItem expected=CatalogItem.builder().name("newCatalogItem").id("urn:vcloud:catalogitem:a36fdac9-b8c2-43e2-9a4c-2ffaf3ee13df").type("application/vnd.vmware.vcloud.catalogItem+xml").href(URI.create("https://vcloudbeta.bluelock.com/api/catalogItem/a36fdac9-b8c2-43e2-9a4c-2ffaf3ee13df")).link(Link.builder().rel("up").type("application/vnd.vmware.vcloud.catalog+xml").href(URI.create("https://vcloudbeta.bluelock.com/api/catalog/7212e451-76e1-4631-b2de-ba1dfd8080e4")).build()).link(Link.builder().rel("down").type("application/vnd.vmware.vcloud.metadata+xml").href(URI.create("https://vcloudbeta.bluelock.com/api/catalogItem/a36fdac9-b8c2-43e2-9a4c-2ffaf3ee13df/metadata")).build()).link(Link.builder().rel("edit").type("application/vnd.vmware.vcloud.catalogItem+xml").href(URI.create("https://vcloudbeta.bluelock.com/api/catalogItem/a36fdac9-b8c2-43e2-9a4c-2ffaf3ee13df")).build()).link(Link.builder().rel("remove").href(URI.create("https://vcloudbeta.bluelock.com/api/catalogItem/a36fdac9-b8c2-43e2-9a4c-2ffaf3ee13df")).build()).description("New Catalog Item").entity(ubuntu).build();
  assertEquals(client.getCatalogClient().addCatalogItem(catalogRef,newItem),expected);
}
