{
  vAppTemplateClient.disableDownloadVappTemplate(vAppTemplateURI);
  final Task task=vAppTemplateClient.enableDownloadVappTemplate(vAppTemplateURI);
  assertTaskDoneEventually(task);
  VAppTemplate vAppTemplate=vAppTemplateClient.getVAppTemplate(vAppTemplateURI);
  Set<Task> tasks=vAppTemplate.getTasks();
  for (  Task contender : tasks) {
    if (task.getId().equals(contender.getId())) {
      String status=contender.getStatus();
      if (status.equals(Task.Status.QUEUED) || status.equals(Task.Status.PRE_RUNNING) || status.equals(Task.Status.RUNNING)) {
        fail("Task " + contender + " reported complete, but is included in VAppTemplate in status "+ status);
      }
    }
  }
}
