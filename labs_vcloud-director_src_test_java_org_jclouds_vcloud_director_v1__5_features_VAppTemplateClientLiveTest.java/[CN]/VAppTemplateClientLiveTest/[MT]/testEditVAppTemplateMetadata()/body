{
  Metadata oldMetadata=vappTemplateClient.getVAppTemplateMetadata(vAppTemplateURI);
  String uid="" + random.nextInt();
  String key="mykey-" + uid;
  String val="myval-" + uid;
  MetadataEntry metadataEntry=MetadataEntry.builder().entry(key,val).build();
  Metadata metadata=Metadata.builder().fromMetadata(oldMetadata).entry(metadataEntry).build();
  final Task task=vappTemplateClient.editVAppTemplateMetadata(vAppTemplateURI,metadata);
  retryTaskSuccess.apply(task);
  Metadata newMetadata=vappTemplateClient.getVAppTemplateMetadata(vAppTemplateURI);
  Map<String,String> newMetadataMap=metadataToMap(newMetadata);
  assertEquals(newMetadataMap.get(key),val,"newMetadata=" + newMetadata);
}
