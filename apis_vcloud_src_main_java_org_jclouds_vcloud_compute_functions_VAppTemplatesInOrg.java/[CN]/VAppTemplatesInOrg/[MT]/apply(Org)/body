{
  Iterable<CatalogItem> catalogs=allCatalogItemsInOrg.apply(from);
  Iterable<VAppTemplate> vAppTemplates=vAppTemplatesForCatalogItems.apply(catalogs);
  return Iterables.transform(Iterables.filter(vAppTemplates,Predicates.notNull()),new Function<VAppTemplate,VAppTemplate>(){
    @Override public VAppTemplate apply(    VAppTemplate arg0){
      LoginCredentials creds=getCredentialsFrom(arg0);
      if (creds == null)       credentialStore.remove("image#" + arg0.getHref().toASCIIString());
 else       credentialStore.put("image#" + arg0.getHref().toASCIIString(),creds);
      return arg0;
    }
  }
);
}
