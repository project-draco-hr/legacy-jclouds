{
  NovaApi api=createMock(NovaApi.class);
  FloatingIPApi ipApi=createMock(FloatingIPApi.class);
  expect(api.getFloatingIPExtensionForZone("Zone")).andReturn(Optional.of(ipApi)).atLeastOnce();
  expect(ipApi.listFloatingIPs()).andReturn(ImmutableSet.<FloatingIP>of(FloatingIP.builder().id("1").ip("1.1.1.1").build())).atLeastOnce();
  replay(api);
  replay(ipApi);
  LoadFloatingIpsForInstance parser=new LoadFloatingIpsForInstance(api);
  assertFalse(parser.load(ZoneAndId.fromZoneAndId("Zone","i-blah")).iterator().hasNext());
  verify(api);
  verify(ipApi);
}
