{
  exceptionIfNotActive();
  final SynchronousQueue<?> channel=new SynchronousQueue<Object>();
  Future<T> future=executorService.submit(new Callable<T>(){
    Logger transformerLogger=logFactory.getLogger(responseTransformer.getClass().getName());
    public T call() throws Exception {
      Object o=channel.take();
      if (o instanceof Exception) {
        throw (Exception)o;
      }
      transformerLogger.debug("Processing intermediate result for: %s",o);
      T result=responseTransformer.apply((HttpResponse)o);
      transformerLogger.debug("Processed intermediate result for: %s",o);
      return result;
    }
  }
);
  HttpCommandRendezvous<T> rendezvous=new HttpCommandRendezvous<T>(command,channel,makeListenable(future));
  commandQueue.add(rendezvous);
  return rendezvous.getFuture();
}
