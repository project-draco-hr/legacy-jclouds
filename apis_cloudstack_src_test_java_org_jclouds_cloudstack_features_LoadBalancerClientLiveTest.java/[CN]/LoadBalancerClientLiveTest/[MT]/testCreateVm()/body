{
  if (networksDisabled)   return;
  Long defaultTemplate=(imageId != null && !"".equals(imageId)) ? new Long(imageId) : null;
  vm=VirtualMachineClientLiveTest.createVirtualMachineInNetwork(network,defaultTemplateOrPreferredInZone(defaultTemplate,client,network.getZoneId()),client,jobComplete,virtualMachineRunning);
  if (vm.getPassword() != null && !loginCredentials.hasPasswordOption())   loginCredentials=loginCredentials.toBuilder().password(vm.getPassword()).build();
}
