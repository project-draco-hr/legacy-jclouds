{
  VAppTemplate vAppTemplate=vappTemplateClient.getVAppTemplate(vAppTemplateURI);
  QueryResultRecords queryResult=queryClient.vAppTemplatesQuery(String.format("name==%s",vAppTemplate.getName()));
  Set<URI> hrefs=toHrefs(queryResult);
  assertRecordTypes(queryResult,Arrays.asList(VCloudDirectorMediaType.VAPP_TEMPLATE,null),QueryResultVAppTemplateRecord.class);
  assertEquals(hrefs,Collections.singleton(vAppTemplateURI),"VAppTemplates query result should have found vAppTemplate " + vAppTemplateURI);
}
