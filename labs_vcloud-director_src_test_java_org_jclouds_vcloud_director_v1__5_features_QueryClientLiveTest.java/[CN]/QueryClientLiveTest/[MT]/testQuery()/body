{
  VAppTemplate vAppTemplate=vAppTemplateClient.getVAppTemplate(vAppTemplateURI);
  QueryResultRecords queryResult=queryClient.query("vAppTemplate",String.format("name==%s",vAppTemplate.getName()));
  Set<URI> hrefs=toHrefs(queryResult);
  assertRecordTypes(queryResult,Arrays.asList(VCloudDirectorMediaType.VAPP_TEMPLATE,null),QueryResultVAppTemplateRecord.class);
  assertTrue(hrefs.contains(vAppTemplateURI),"VAppTemplates query result should include vAppTemplate " + vAppTemplateURI + "; but only has "+ hrefs);
}
