{
  VAppTemplate vAppTemplate=vAppTemplateClient.getVAppTemplate(vAppTemplateURI);
  Entity entity=queryClient.entity(vAppTemplate.getId());
  checkEntityType(entity);
  Link link=Iterables.find(entity.getLinks(),ReferencePredicates.<Link>typeEquals(VCloudDirectorMediaType.VAPP_TEMPLATE));
  VAppTemplate retrieved=vAppTemplateClient.getVAppTemplate(link.getHref());
  assertEquals(retrieved,vAppTemplate,String.format(ENTITY_EQUAL,"VAppTemplate"));
}
