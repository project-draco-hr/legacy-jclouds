{
  PEMReader reader;
  try {
    reader=new PEMReader(pem);
    byte[] bytes=reader.getDerBytes();
    if (PEMReader.CERTIFICATE_X509_MARKER.equals(reader.getBeginMarker())) {
      return (X509Certificate)certFactory.generateCertificate(new ByteArrayInputStream(bytes));
    }
 else {
      throw new IOException("Invalid PEM file: Unknown marker for public key " + reader.getBeginMarker());
    }
  }
 catch (  Exception e) {
    Throwables.propagate(e);
    return null;
  }
}
