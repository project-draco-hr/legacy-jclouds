{
  @SuppressWarnings("rawtypes") RestContextSpec<IntegrationTestClient,IntegrationTestAsyncClient> contextSpec=contextSpec(provider,"http://localhost","1","build-foo","","dummy",null,(Class)null,(Class)null,PropertiesBuilder.class,(Class)IntegrationTestContextBuilder.class,Collections.<Module>singleton(new A()));
  Properties props=RestContextFactory.toProperties(contextSpec);
  assertEquals(props.getProperty("test.endpoint"),"http://localhost");
  assertEquals(props.getProperty("test.api-version"),"1");
  assertEquals(props.getProperty("test.build-version"),"build-foo");
  assertEquals(props.getProperty("test.identity"),"dummy");
  assertEquals(props.getProperty("test.credential"),null);
  assertEquals(props.getProperty("test.sync"),null);
  assertEquals(props.getProperty("test.async"),null);
  assertEquals(props.getProperty("test.propertiesbuilder"),PropertiesBuilder.class.getName());
  assertEquals(props.getProperty("test.contextbuilder"),IntegrationTestContextBuilder.class.getName());
  assertEquals(props.getProperty("test.modules"),"org.jclouds.rest.RestContextFactoryTest$A");
  new RestContextFactory().createContext(provider,props);
}
