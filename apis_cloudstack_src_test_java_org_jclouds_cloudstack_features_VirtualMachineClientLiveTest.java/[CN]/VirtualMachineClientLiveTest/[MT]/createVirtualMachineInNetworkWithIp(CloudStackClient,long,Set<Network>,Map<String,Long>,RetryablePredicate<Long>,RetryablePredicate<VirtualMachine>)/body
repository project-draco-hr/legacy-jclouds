{
  DeployVirtualMachineOptions options=new DeployVirtualMachineOptions();
  long zoneId=getFirst(networks,null).getZoneId();
  options.networkIds(Iterables.transform(networks,new Function<Network,Long>(){
    @Override public Long apply(    @Nullable Network network){
      return network.getId();
    }
  }
));
  options.ipToNetworkList(ipToNetwork);
  return createVirtualMachineWithOptionsInZone(options,zoneId,templateId,client,jobComplete,virtualMachineRunning);
}
