{
  if ("windows".equals(instance.getPlatform())) {
    return passwordCredentialsFromWindowsInstance.apply(instance);
  }
 else   if (instance.getKeyName() != null) {
    return LoginCredentials.builder().user(getLoginAccountFor(instance)).privateKey(getPrivateKeyOrNull(instance)).build();
  }
  return null;
}
