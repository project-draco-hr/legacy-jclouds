{
  ChefClient chef=createMock(ChefClient.class);
  Map<String,JsonBall> automatic=ImmutableMap.<String,JsonBall>of();
  Node node=new Node("name",ImmutableSet.<String>of());
  Supplier<Map<String,JsonBall>> automaticSupplier=Suppliers.<Map<String,JsonBall>>ofInstance(automatic);
  Node nodeWithAutomatic=new Node("name",ImmutableMap.<String,JsonBall>of(),ImmutableMap.<String,JsonBall>of(),ImmutableMap.<String,JsonBall>of(),automatic,ImmutableSet.<String>of());
  node.getAutomatic().putAll(automaticSupplier.get());
  chef.createNode(nodeWithAutomatic);
  replay(chef);
  CreateNodeAndPopulateAutomaticAttributesImpl updater=new CreateNodeAndPopulateAutomaticAttributesImpl(chef,automaticSupplier);
  updater.execute("name",ImmutableSet.<String>of());
  verify(chef);
}
