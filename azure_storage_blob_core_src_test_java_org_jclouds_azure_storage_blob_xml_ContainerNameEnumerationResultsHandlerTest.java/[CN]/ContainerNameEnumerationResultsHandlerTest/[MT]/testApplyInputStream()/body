{
  InputStream is=getClass().getResourceAsStream("/test_list_blobs.xml");
  SortedSet<ListableBlobProperties> contents=Sets.newTreeSet();
  contents.add(new ListableBlobPropertiesImpl("blob1.txt",URI.create("http://myaccount.blob.core.windows.net/mycontainer/blob1.txt"),dateService.rfc822DateParse("Thu, 18 Sep 2008 18:41:57 GMT"),"0x8CAE7D55D050B8B",8,"text/plain; charset=UTF-8",null,null));
  contents.add(new ListableBlobPropertiesImpl("blob2.txt",URI.create("http://myaccount.blob.core.windows.net/mycontainer/blob2.txt"),dateService.rfc822DateParse("Thu, 18 Sep 2008 18:41:57 GMT"),"0x8CAE7D55CF6C339",14,"text/plain; charset=UTF-8",null,null));
  contents.add(new ListableBlobPropertiesImpl("newblob1.txt",URI.create("http://myaccount.blob.core.windows.net/mycontainer/newblob1.txt"),dateService.rfc822DateParse("Thu, 18 Sep 2008 18:41:57 GMT"),"0x8CAE7D55CF6C339",25,"text/plain; charset=UTF-8",null,null));
  ListBlobsResponse list=new TreeSetListBlobsResponse(contents,URI.create("http://myaccount.blob.core.windows.net/mycontainer"),"myfolder/",null,4,"newblob2.txt","/",Sets.<String>newTreeSet());
  ListBlobsResponse result=(ListBlobsResponse)factory.create(injector.getInstance(ContainerNameEnumerationResultsHandler.class)).parse(is);
  assertEquals(result,list);
}
