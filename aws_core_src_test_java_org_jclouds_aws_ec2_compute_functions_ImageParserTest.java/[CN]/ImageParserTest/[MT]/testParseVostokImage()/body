{
  InputStream is=getClass().getResourceAsStream("/ec2/vostok.xml");
  Set<Image> result=parseImages(is);
  ImageParser parser=new ImageParser(new EC2PopulateDefaultLoginCredentialsForImageStrategy(),ImmutableSet.<Location>of(defaultLocation),defaultLocation);
  org.jclouds.compute.domain.Image image=parser.apply(Iterables.get(result,0));
  assertEquals(image.getArchitecture(),org.jclouds.compute.domain.Architecture.X86_32);
  assertEquals(image.getDescription(),"vostok-builds/vostok-0.95-5622/vostok-0.95-5622.manifest.xml");
  assertEquals(image.getId(),"ami-870de2ee");
  assertEquals(image.getLocation(),defaultLocation);
  assertEquals(image.getName(),"");
  assertEquals(image.getOsDescription(),"vostok-builds/vostok-0.95-5622/vostok-0.95-5622.manifest.xml");
  assertEquals(image.getOsFamily(),null);
  assertEquals(image.getUserMetadata(),ImmutableMap.<String,String>of("owner","133804938231"));
  assertEquals(image.getVersion(),"");
}
