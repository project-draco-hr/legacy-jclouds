{
  if (masters.containsKey(machineNameOrIdAndNicPort)) {
    return masters.get(machineNameOrIdAndNicPort);
  }
  String query=String.format("/VirtualBox/GuestInfo/Net/%s/V4/IP",machineNameOrIdAndNicPort.getSlotText());
  String currentIp="";
  while (!NetworkUtils.isIpv4(currentIp)) {
    currentIp=manager.get().getVBox().findMachine(machineNameOrIdAndNicPort.getMachineNameOrId()).getGuestPropertyValue(query);
    if (!Strings.nullToEmpty(currentIp).isEmpty())     logger.debug("Found IP address %s for '%s' at slot %s",currentIp,machineNameOrIdAndNicPort.getMachineNameOrId(),machineNameOrIdAndNicPort.getSlotText());
    Uninterruptibles.sleepUninterruptibly(1,TimeUnit.SECONDS);
  }
  masters.put(machineNameOrIdAndNicPort,currentIp);
  return currentIp;
}
