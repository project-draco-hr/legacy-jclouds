{
  ImmutableMap<HttpRequest,HttpResponse> requestResponseMap=ImmutableMap.<HttpRequest,HttpResponse>builder().put(requestForScopes(COMPUTE_READONLY_SCOPE),TOKEN_RESPONSE).put(LIST_ZONES_REQ,LIST_ZONES_RESPONSE).put(LIST_PROJECT_IMAGES_REQUEST,LIST_PROJECT_IMAGES_RESPONSE).put(LIST_GOOGLE_IMAGES_REQUEST,LIST_GOOGLE_IMAGES_RESPONSE).put(LIST_MACHINE_TYPES_REQUEST,LIST_MACHINE_TYPES_RESPONSE).build();
  ComputeService client=requestsSendResponses(requestResponseMap);
  Template template=client.templateBuilder().build();
  Template toMatch=client.templateBuilder().imageId(template.getImage().getId()).build();
  assertEquals(toMatch.getImage(),template.getImage());
}
