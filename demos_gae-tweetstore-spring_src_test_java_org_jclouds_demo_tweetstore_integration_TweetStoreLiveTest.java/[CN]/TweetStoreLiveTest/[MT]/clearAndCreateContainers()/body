{
  container=checkNotNull(System.getProperty(PROPERTY_TWEETSTORE_CONTAINER));
  BlobStoreContextFactory factory=new BlobStoreContextFactory();
  BlobStoreContext s3Context=factory.createContext("s3",checkNotNull(System.getProperty(PROPERTY_AWS_ACCESSKEYID),PROPERTY_AWS_ACCESSKEYID),System.getProperty(PROPERTY_AWS_SECRETACCESSKEY,PROPERTY_AWS_SECRETACCESSKEY));
  BlobStoreContext cfContext=factory.createContext("cloudfiles",checkNotNull(System.getProperty(PROPERTY_RACKSPACE_USER),PROPERTY_RACKSPACE_USER),System.getProperty(PROPERTY_RACKSPACE_KEY,PROPERTY_RACKSPACE_KEY));
  BlobStoreContext azContext=factory.createContext("azureblob",checkNotNull(System.getProperty(PROPERTY_AZURESTORAGE_ACCOUNT),PROPERTY_AZURESTORAGE_ACCOUNT),System.getProperty(PROPERTY_AZURESTORAGE_KEY,PROPERTY_AZURESTORAGE_KEY));
  this.contexts=ImmutableList.of(s3Context,cfContext,azContext);
  boolean deleted=false;
  for (  BlobStoreContext context : contexts) {
    if (context.getBlobStore().containerExists(container)) {
      System.err.printf("deleting container %s at %s%n",container,context.getProviderSpecificContext().getEndPoint());
      context.getBlobStore().deleteContainer(container);
      deleted=true;
    }
  }
  if (deleted) {
    System.err.println("sleeping 60 seconds to allow containers to clear");
    Thread.sleep(60000);
  }
  for (  BlobStoreContext context : contexts) {
    System.err.printf("creating container %s at %s%n",container,context.getProviderSpecificContext().getEndPoint());
    context.getBlobStore().createContainerInLocation("default",container);
  }
  if (deleted) {
    System.err.println("sleeping 5 seconds to allow containers to create");
    Thread.sleep(30000);
  }
}
