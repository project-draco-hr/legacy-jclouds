{
  if (request.getPayload() == null) {
    assertNull(toMatch);
  }
 else {
    String payload=Utils.toStringAndClose(request.getPayload().getInput());
    assertEquals(payload,toMatch);
    if (request.getFirstHeaderOrNull(HttpHeaders.TRANSFER_ENCODING) == null) {
      assertEquals(request.getFirstHeaderOrNull(HttpHeaders.CONTENT_LENGTH),payload.getBytes().length + "");
    }
 else {
      assertEquals(request.getFirstHeaderOrNull(HttpHeaders.TRANSFER_ENCODING),"chunked");
      assertEquals(request.getFirstHeaderOrNull(HttpHeaders.CONTENT_LENGTH),"0");
    }
  }
}
