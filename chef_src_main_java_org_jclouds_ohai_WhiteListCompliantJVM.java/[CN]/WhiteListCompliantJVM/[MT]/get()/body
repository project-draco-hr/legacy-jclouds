{
  Map<String,JsonBall> returnVal=Maps.newLinkedHashMap();
  Properties systemProperties=systemPropertiesProvider.get();
  String now=nanoTimeProvider.get() + "";
  StringBuilder nowBuilder=new StringBuilder(now).insert(now.length() - 6,'.');
  while (nowBuilder.lastIndexOf("0") != -1 && nowBuilder.lastIndexOf("0") == nowBuilder.length() - 1)   nowBuilder.deleteCharAt(nowBuilder.length() - 1);
  now=nowBuilder.toString();
  returnVal.put("ohai_time",new JsonBall(now));
  returnVal.put("java",new JsonBall(json.toJson(systemProperties)));
  try {
    String mac=byteArrayToMacAddress.apply(defaultNetworkInterface.getHardwareAddress());
    returnVal.put("macaddress",new JsonBall(mac));
  }
 catch (  SocketException e) {
    logger.warn(e,"could not read address from %s",defaultNetworkInterface.getDisplayName());
  }
  String platform=systemProperties.getProperty("os.name");
  platform=platform.replaceAll("[ -]","").toLowerCase();
  returnVal.put("platform",new JsonBall(platform));
  returnVal.put("platform_version",new JsonBall(systemProperties.getProperty("os.version")));
  returnVal.put("ohai_time",new JsonBall(now));
  returnVal.put("current_user",new JsonBall(systemProperties.getProperty("user.name")));
  return returnVal;
}
