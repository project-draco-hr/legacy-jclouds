{
  String expected=IOUtils.toString(getClass().getResourceAsStream("/terremark/InstantiateVAppTemplateParams-test.xml"));
  HttpRequest request=new HttpRequest("GET",URI.create("http://test"));
  BindInstantiateVAppTemplateParamsToXmlEntity binder=injector.getInstance(BindInstantiateVAppTemplateParamsToXmlEntity.class);
  Map<String,String> map=Maps.newHashMap();
  map.put("name","name");
  map.put("template","http://catalogItem/3");
  map.put("count","1");
  map.put("megabytes","512");
  map.put("network","http://network");
  binder.bindToRequest(request,map);
  assertEquals(request.getFirstHeaderOrNull(HttpHeaders.CONTENT_TYPE),"application/unknown");
  assertEquals(request.getFirstHeaderOrNull(HttpHeaders.CONTENT_LENGTH),"2247");
  assertEquals(request.getEntity(),expected);
}
