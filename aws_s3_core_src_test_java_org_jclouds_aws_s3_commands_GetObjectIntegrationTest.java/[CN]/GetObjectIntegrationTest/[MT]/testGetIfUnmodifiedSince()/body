{
  String key="apples";
  DateTime before=new DateTime();
  addObjectAndValidateContent(bucketName,key);
  DateTime after=new DateTime().plusSeconds(1);
  client.getObject(bucketName,key,ifUnmodifiedSince(after)).get(10,TimeUnit.SECONDS);
  validateContent(bucketName,key);
  try {
    client.getObject(bucketName,key,ifUnmodifiedSince(before)).get(10,TimeUnit.SECONDS);
    validateContent(bucketName,key);
  }
 catch (  ExecutionException e) {
    if (e.getCause() instanceof HttpResponseException) {
      HttpResponseException ex=(HttpResponseException)e.getCause();
      assertEquals(ex.getResponse().getStatusCode(),412);
    }
 else {
      throw e;
    }
  }
}
