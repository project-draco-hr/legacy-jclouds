{
  if (Thread.currentThread().isInterrupted()) {
    stopMonitoring();
    return;
  }
  MonitorStatus status=completeCondition.apply(monitoredObject);
  logger.debug("monitored object %s status %s",monitoredObject,status.name());
switch (status) {
case DONE:
    stopMonitoring();
  logger.debug("publishing COMPLETED event");
eventBus.post(new CompletedEvent<T>(monitoredObject));
break;
case FAILED:
stopMonitoring();
logger.debug("publishing FAILED event");
eventBus.post(new FailedEvent<T>(monitoredObject));
break;
case CONTINUE:
default :
if (isTimeout()) {
logger.warn("monitor for object %s timed out. Shutting down monitor.",monitoredObject);
stopMonitoring();
logger.debug("publishing TIMEOUT event");
eventBus.post(new TimeoutEvent<T>(monitoredObject));
}
break;
}
}
