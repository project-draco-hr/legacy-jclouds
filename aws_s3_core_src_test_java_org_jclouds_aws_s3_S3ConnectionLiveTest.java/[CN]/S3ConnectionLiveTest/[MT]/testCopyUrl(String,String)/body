{
  httpStreamUrl=checkNotNull(httpStreamUrl != null ? httpStreamUrl : sysHttpStreamUrl,"httpStreamUrl");
  httpStreamETag=checkNotNull(httpStreamETag != null ? httpStreamETag : sysHttpStreamETag,"httpStreamETag");
  String key="hello";
  URL url=new URL(httpStreamUrl);
  byte[] eTag=HttpUtils.fromHexString(httpStreamETag);
  URLConnection connection=url.openConnection();
  int length=connection.getContentLength();
  InputStream input=connection.getInputStream();
  S3Object object=new S3Object(key,input);
  object.setContentLength(length);
  object.getMetadata().setETag(eTag);
  object.getMetadata().setSize(length);
  String bucketName=getBucketName();
  try {
    byte[] newETag=client.putObject(bucketName,object).get(30,TimeUnit.SECONDS);
    assertEquals(newETag,eTag);
  }
  finally {
    returnBucket(bucketName);
  }
}
