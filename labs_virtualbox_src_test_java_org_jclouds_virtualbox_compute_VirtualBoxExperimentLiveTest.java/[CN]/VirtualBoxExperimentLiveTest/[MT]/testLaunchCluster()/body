{
  int numNodes=3;
  final String clusterName="test-launch-cluster";
  Set<? extends NodeMetadata> nodes=context.getComputeService().createNodesInGroup(clusterName,numNodes,TemplateOptions.Builder.overrideLoginUser("toor").runScript(AdminAccess.standard()));
  assertEquals(numNodes,nodes.size(),"wrong number of nodes");
  for (  NodeMetadata node : nodes) {
    assertEquals("test-launch-cluster",node.getGroup());
    logger.debug("Created Node: %s",node);
    SshClient client=context.utils().sshForNode().apply(node);
    client.connect();
    ExecResponse hello=client.exec("echo hello");
    assertEquals(hello.getOutput().trim(),"hello");
  }
  context.getComputeService().destroyNodesMatching(new Predicate<NodeMetadata>(){
    @Override public boolean apply(    NodeMetadata input){
      return input.getId().contains(clusterName);
    }
  }
);
}
