{
  URI endpoint=URI.create("https://dfw.loadbalancers.api.rackspacecloud.com/v1.0/123123/loadbalancers/2000/nodes");
  NodeApi api=requestsSendResponses(rackspaceAuthWithUsernameAndApiKey,responseWithAccess,authenticatedGET().method("POST").payload(payloadFromResourceWithContentType("/nodes-add.json",MediaType.APPLICATION_JSON)).endpoint(endpoint).build(),HttpResponse.builder().statusCode(200).payload(payloadFromResource("/nodes-list.json")).build()).getNodeApiForZoneAndLoadBalancer("DFW",2000);
  NodeAdd nodeAdd1=NodeAdd.builder().address("10.1.1.1").condition(Node.Condition.ENABLED).port(80).weight(3).build();
  NodeAdd nodeAdd2=NodeAdd.builder().address("10.1.1.2").condition(Node.Condition.ENABLED).type(Node.Type.SECONDARY).port(80).weight(8).build();
  NodeAdd nodeAdd3=NodeAdd.builder().address("10.1.1.3").condition(Node.Condition.DISABLED).port(80).weight(12).build();
  Set<NodeAdd> nodeAdds=ImmutableSortedSet.<NodeAdd>of(nodeAdd1,nodeAdd2,nodeAdd3);
  Set<Node> nodes=api.add(nodeAdds);
  assertEquals(nodes,getExpectedNodes());
}
