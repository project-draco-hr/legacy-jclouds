{
  ISession session=null;
  if (machine.getCurrentSnapshot() == null) {
    try {
      session=manager.openMachineSession(machine);
      IProgress progress=session.getConsole().takeSnapshot(snapshotName,snapshotDesc);
      if (progress.getCompleted())       logger.debug("Clone done with snapshot name: %s and descripton: %s",snapshotName,snapshotDesc);
    }
 catch (    Exception e) {
      logger.error(e.getMessage());
      propogate(e);
    }
 finally {
      session.unlockMachine();
    }
  }
  return machine.getCurrentSnapshot();
}
