{
  String s3Bucket=bucketPrefix + "filetestsforadrian";
  client.createBucketIfNotExists(s3Bucket).get(10,TimeUnit.SECONDS);
  context.createS3ObjectMap(s3Bucket).clear();
  assertEquals(client.getBucket(s3Bucket).get(10,TimeUnit.SECONDS).getContents().size(),0);
  S3Object object=new S3Object(key);
  object.getMetaData().setContentType(type);
  object.setData(content);
  assertNotNull(client.addObject(s3Bucket,object).get(10,TimeUnit.SECONDS));
  object=client.getObject(s3Bucket,object.getKey()).get(10,TimeUnit.SECONDS);
  returnedString=S3Utils.getContentAsStringAndClose(object);
  assertEquals(returnedString,realObject);
  assertEquals(client.getBucket(s3Bucket).get(10,TimeUnit.SECONDS).getContents().size(),1);
}
