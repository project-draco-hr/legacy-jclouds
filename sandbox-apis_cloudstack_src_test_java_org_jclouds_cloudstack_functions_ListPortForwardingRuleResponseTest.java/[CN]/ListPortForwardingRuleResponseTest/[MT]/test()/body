{
  InputStream is=getClass().getResourceAsStream("/listportforwardingrulesresponse.json");
  Set<PortForwardingRule> expects=ImmutableSortedSet.<PortForwardingRule>of(PortForwardingRule.builder().id(15).privatePort(22).protocol("tcp").publicPort(2022).virtualMachineId(3).virtualMachineName("i-3-3-VM").IPAddressId(3).IPAddress("72.52.126.32").state("Active").build(),PortForwardingRule.builder().id(18).privatePort(22).protocol("tcp").publicPort(22).virtualMachineId(89).virtualMachineName("i-3-89-VM").IPAddressId(34).IPAddress("72.52.126.63").state("Active").build());
  UnwrapOnlyNestedJsonValue<Set<PortForwardingRule>> parser=i.getInstance(Key.get(new TypeLiteral<UnwrapOnlyNestedJsonValue<Set<PortForwardingRule>>>(){
  }
));
  Set<PortForwardingRule> response=parser.apply(new HttpResponse(200,"ok",Payloads.newInputStreamPayload(is)));
  assertEquals(Sets.newTreeSet(response),expects);
}
