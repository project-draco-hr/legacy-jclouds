{
  InputStream is=getClass().getResourceAsStream("/ec2/describe_instances.xml");
  Set<Reservation> contents=Sets.newTreeSet();
  contents.add(new Reservation(defaultRegion,ImmutableSet.of("default"),ImmutableSet.of(new RunningInstance(defaultRegion,ImmutableSet.of("default"),"23","ec2-72-44-33-4.compute-1.amazonaws.com","ami-6ea54007","i-28a64341",InstanceState.RUNNING,InstanceType.M1_LARGE,(InetAddress)null,"aki-ba3adfd3","example-key-name",dateService.iso8601DateParse("2007-08-07T11:54:42.000Z"),false,AvailabilityZone.US_EAST_1B,null,"10-251-50-132.ec2.internal",null,ImmutableSet.of("774F4FF8"),"ari-badbad00",null,null,null,RootDeviceType.INSTANCE_STORE,null,ImmutableMap.<String,EbsBlockDevice>of()),new RunningInstance(defaultRegion,ImmutableSet.of("default"),"23","ec2-72-44-33-6.compute-1.amazonaws.com","ami-6ea54007","i-28a64435",InstanceState.RUNNING,InstanceType.M1_LARGE,(InetAddress)null,"aki-ba3adfd3","example-key-name",dateService.iso8601DateParse("2007-08-07T11:54:42.000Z"),false,AvailabilityZone.US_EAST_1B,null,"10-251-50-134.ec2.internal",null,ImmutableSet.of("774F4FF8"),"ari-badbad00",null,null,null,RootDeviceType.INSTANCE_STORE,null,ImmutableMap.<String,EbsBlockDevice>of())),"UYY3TLBUXIEON5NQVUUX6OMPWBZIQNFM",null,"r-44a5402d"));
  Set<Reservation> result=getReservations(is);
  assertEquals(result,contents);
}
