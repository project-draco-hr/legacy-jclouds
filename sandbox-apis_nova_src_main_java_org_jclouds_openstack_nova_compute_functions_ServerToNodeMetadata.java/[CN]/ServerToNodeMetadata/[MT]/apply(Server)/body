{
  NodeMetadataBuilder builder=new NodeMetadataBuilder();
  builder.ids(from.getId() + "");
  builder.name(from.getName());
  builder.location(new LocationBuilder().scope(LocationScope.HOST).id(from.getHostId()).description(from.getHostId()).parent(location.get()).build());
  builder.userMetadata(from.getMetadata());
  builder.group(parseGroupFromName(from.getName()));
  Image image=parseImage(from);
  if (image != null) {
    builder.imageId(image.getId());
    builder.operatingSystem(image.getOperatingSystem());
  }
  builder.hardware(parseHardware(from));
  builder.state(serverToNodeState.get(from.getStatus()));
  builder.publicAddresses(Iterables.transform(from.getAddresses().getPublicAddresses(),Address.newAddress2StringFunction()));
  builder.privateAddresses(Iterables.transform(from.getAddresses().getPrivateAddresses(),Address.newAddress2StringFunction()));
  builder.credentials(credentialStore.get("node#" + from.getId()));
  builder.uri(from.getURI());
  return builder.build();
}
