{
  NodeMetadataBuilder builder=new NodeMetadataBuilder();
  builder.ids(from.getId() + "");
  builder.name(from.getName());
  builder.hostname(from.getName());
  Location location=findLocationWithId(from.getLocation().getId());
  builder.location(location);
  builder.group(nodeNamingConvention.groupInUniqueNameOrNull(from.getName()));
  builder.imageId(from.getImageId() + "");
  builder.operatingSystem(parseOperatingSystem(from,location));
  builder.hardware(null);
  if (from.getBillingData() != null && from.getBillingData().getDateCancelled() != null && RunningState.NOTRUNNING == from.getState())   builder.state(NodeState.TERMINATED);
 else   builder.state(runningStateToNodeState.get(from.getState()));
  builder.publicAddresses(getPublicAddresses.apply(from));
  return builder.build();
}
