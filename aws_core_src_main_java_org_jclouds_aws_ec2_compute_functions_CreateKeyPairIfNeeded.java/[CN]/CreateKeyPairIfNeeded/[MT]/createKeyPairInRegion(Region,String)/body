{
  logger.debug(">> creating keyPair region(%s) name(%s)",region,name);
  KeyPair keyPair;
  try {
    keyPair=ec2Client.getKeyPairServices().createKeyPairInRegion(region,name);
    logger.debug("<< created keyPair(%s)",keyPair.getKeyName());
  }
 catch (  AWSResponseException e) {
    if (e.getError().getCode().equals("InvalidKeyPair.Duplicate")) {
      keyPair=Iterables.getLast(ec2Client.getKeyPairServices().describeKeyPairsInRegion(region,name));
      logger.debug("<< reused keyPair(%s)",keyPair.getKeyName());
    }
 else {
      throw e;
    }
  }
  return keyPair;
}
