{
  super(ioWorkerExecutor,retryHandler,errorHandler,wire);
  this.utils=utils;
  params=new BasicHttpParams();
  if (globalMaxConnections > 0)   ConnManagerParams.setMaxTotalConnections(params,globalMaxConnections);
  if (globalMaxConnectionsPerHost > 0) {
    ConnPerRoute connectionsPerRoute=new ConnPerRouteBean(globalMaxConnectionsPerHost);
    ConnManagerParams.setMaxConnectionsPerRoute(params,connectionsPerRoute);
  }
  HttpProtocolParams.setVersion(params,HttpVersion.HTTP_1_1);
  SchemeRegistry schemeRegistry=new SchemeRegistry();
  schemeRegistry.register(new Scheme("http",PlainSocketFactory.getSocketFactory(),80));
  schemeRegistry.register(new Scheme("https",SSLSocketFactory.getSocketFactory(),443));
  cm=new ThreadSafeClientConnManager(params,schemeRegistry);
}
