{
  NodeMetadataBuilder builder=new NodeMetadataBuilder();
  builder.ids(from.getUuid() + "");
  builder.name(from.getAlias());
  builder.location(from(locations.get()).firstMatch(LocationPredicates.idEquals(from.getUuid() + "")).orNull());
  builder.group(nodeNamingConvention.groupInUniqueNameOrNull(from.getType()));
  builder.imageId(from.getType() + "");
  Image image=from(images.get()).firstMatch(ImagePredicates.idEquals(from.getUuid() + "")).orNull();
  if (image != null)   builder.operatingSystem(image.getOperatingSystem());
  builder.hardware(from(hardware.get()).firstMatch(HardwarePredicates.idEquals(from.getUuid() + "")).orNull());
  builder.status(serverStatusToNodeStatus.get(from.getState()));
  try {
    if (from.getState() == VM.State.RUNNING) {
      Optional<String> ip=from.getPublicAddress();
      if (ip.isPresent()) {
        builder.publicAddresses(ImmutableSet.<String>of(ip.get()));
        builder.privateAddresses(ImmutableSet.<String>of(ip.get()));
      }
    }
  }
 catch (  Exception ex) {
  }
  builder.credentials(LoginCredentials.fromCredentials(credentialStore.get(from.getUuid() + "")));
  return builder.build();
}
