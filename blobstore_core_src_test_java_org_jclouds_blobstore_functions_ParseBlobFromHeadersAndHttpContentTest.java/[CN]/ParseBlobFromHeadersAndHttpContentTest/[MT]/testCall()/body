{
  ParseSystemAndUserMetadataFromHeaders metadataParser=createMock(ParseSystemAndUserMetadataFromHeaders.class);
  ParseBlobFromHeadersAndHttpContent callable=new ParseBlobFromHeadersAndHttpContent(metadataParser,blobProvider);
  HttpResponse response=createMock(HttpResponse.class);
  expect(response.getFirstHeaderOrNull("Content-Length")).andReturn("100");
  expect(response.getFirstHeaderOrNull("Content-Range")).andReturn(null);
  expect(response.getHeaders()).andReturn(ImmutableMultimap.of("Content-Length","100"));
  expect(response.getContent()).andReturn(null);
  replay(response);
  callable.apply(response);
}
