{
  ParseSystemAndUserMetadataFromHeaders metadataParser=createMock(ParseSystemAndUserMetadataFromHeaders.class);
  ParseBlobFromHeadersAndHttpContent callable=new ParseBlobFromHeadersAndHttpContent(metadataParser,blobProvider);
  Multimap<String,String> allHeaders=ImmutableMultimap.of("key","value");
  HttpResponse from=new HttpResponse();
  from.setHeaders(allHeaders);
  Blob object=blobProvider.create(null);
  callable.addAllHeadersTo(from,object);
  assertEquals(object.getAllHeaders().get("key"),Collections.singletonList("value"));
}
